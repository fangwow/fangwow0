<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="keywords" content="hexo,个人博客,blog">
  <meta name="description" content="个人博客">
  <meta http-equiv="x-dns-prefetch-control" content="on">
  <link rel="dns-prefetch" href="https://busuanzi.ibruce.info">
  
  <link rel="dns-prefetch" href="https://widget.daovoice.io">
  <link rel="dns-prefetch" href="https://widget-static-cdn.daovoice.io">
  <link rel="dns-prefetch" href="https://im.daovoice.io">
  
  
  <link rel="dns-prefetch" href="https://hm.baidu.com/">
  
  
  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
  <link rel="dns-prefetch" href="https://api.github.com">
  <link rel="dns-prefetch" href="https://avatars3.githubusercontent.com">
  
  <link rel="stylesheet" type="text/css" href="/songfang0/./style/main.d9e3dd.css">
	<link rel="shortcut icon" href="/favicon.ico" title="Favicon">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
	<title>vue项目后台管理系统</title>
  
  <script>var _hmt=_hmt||[];(function(){var hm=document.createElement("script");hm.src="https://hm.baidu.com/hm.js?awwssw1snsnsnn1ndndnndnd99j";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s);})();
  </script>
  
  
    <script>(function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/123456.js","daovoice");daovoice('init',{app_id: "123456"});daovoice('update');
  </script>
  
</head>
<body>
<canvas id="pattern-placeholder" height="230"></canvas>
<div class="navbar-header">
  <a class="blog-title" href="/songfang0/">web前端总结</a>
  <a class="face-img" href="/songfang0/">
    <img src="https://tse1-mm.cn.bing.net/th?id=OIP.Wo0E2kACycBZa4AF_UoUjwAAAA&amp;w=97&amp;h=100&amp;c=8&amp;rs=1&amp;qlt=90&amp;pid=3.1&amp;rm=2">
  </a>
</div>
<main>
  <div class="article-title">
    
  
  <h1 class="title">
    vue项目后台管理系统
  </h1>
  


    <ul class="article-info">
      <li>
        发布
        <time datetime="2019-04-12T16:01:57.000Z" itemprop="datePublished">2019-04-13</time>
      </li>
      <li>
        
    更新 <time datetime="2019-04-12T16:04:49.277Z" itemprop="dateUpdated">2019-04-13</time>

      </li>
      <li id="busuanzi_container_page_pv">
        阅读 <span id="busuanzi_value_page_pv"></span>
      </li>
    </ul>
  </div>
  <div class="container">
    <div class="article">
      <div class="content">
        
        <h2 id="1-项目介绍"><a href="#1-项目介绍" class="headerlink" title="1.项目介绍"></a>1.项目介绍</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">完成用户管理、权限管理、商品管理、分类参数、订单管理、数据统计功能</span><br><span class="line">技术栈:vue+vue-cli+webpack+vue-router+axios+element-ui第三方主流UI库</span><br></pre></td></tr></table></figure>
<h2 id="2-环境搭建"><a href="#2-环境搭建" class="headerlink" title="2.  环境搭建"></a>2.  环境搭建</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.运行sql文件</span><br><span class="line">2.启动服务器  把项目跑起来  后端使用的是node.js</span><br><span class="line">	安装node_modules  npm i</span><br><span class="line">	在config文件夹中打开default.json文件中配置数据库连接信息</span><br><span class="line">	到后台根目录下启动服务器 node app.js</span><br><span class="line">3.接口文件  api-server-&gt;vue后台-&gt;docs/index.html</span><br></pre></td></tr></table></figure>
<h2 id="3-vue-cli创建项目结构"><a href="#3-vue-cli创建项目结构" class="headerlink" title="3.   vue-cli创建项目结构"></a>3.   vue-cli创建项目结构</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">1.vue init webpack shop</span><br><span class="line">2.回车 </span><br><span class="line">	项目名字 描述 </span><br><span class="line">	编译方式   for most users</span><br><span class="line">	安装vue-router   y</span><br><span class="line">	使用ESLint检测你的代码   y  </span><br><span class="line">		选择要使用的代码规范    standard:代码末尾不能有分号</span><br><span class="line">	set up unit tests?     是否设置单元测试 n</span><br><span class="line">	Setup e2e tests     no</span><br><span class="line">3.npm run dev  默认不会打开浏览器</span><br><span class="line">4.不会自动打开浏览器</span><br><span class="line">	1）在文件package.json中 配置 scripts: dev 后面添加--open</span><br><span class="line">	重新运行npm run dev打开浏览器</span><br><span class="line">	2）在config文件夹中的index.js文件中设置autoOpenBrowser:true即可</span><br></pre></td></tr></table></figure>
<h2 id="4-element-ui"><a href="#4-element-ui" class="headerlink" title="4.  element-ui"></a>4.  element-ui</h2><h4 id="4-1-文档分析"><a href="#4-1-文档分析" class="headerlink" title="4.1  文档分析"></a>4.1  文档分析</h4><h4 id="4-2-安装-引入"><a href="#4-2-安装-引入" class="headerlink" title="4.2  安装-引入"></a>4.2  安装-引入</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">1.安装  npm i element-ui -S</span><br><span class="line">2.如果需要与webpack配合使用，在main.js文件中引入</span><br><span class="line">	1)完整引入</span><br><span class="line">	import Vue from &apos;vue&apos;;</span><br><span class="line">    import ElementUI from &apos;element-ui&apos;;</span><br><span class="line">    import &apos;element-ui/lib/theme-chalk/index.css&apos;;</span><br><span class="line">    import App from &apos;./App.vue&apos;;</span><br><span class="line"></span><br><span class="line">    Vue.use(ElementUI);</span><br><span class="line"></span><br><span class="line">    new Vue(&#123;</span><br><span class="line">      el: &apos;#app&apos;,</span><br><span class="line">      render: h =&gt; h(App)</span><br><span class="line">    &#125;);</span><br><span class="line">    2)按需引入</span><br><span class="line">完整引入可以在任意组件的template中使用element-ui里面的组件</span><br></pre></td></tr></table></figure>
<h2 id="5-项目模板简化-调整"><a href="#5-项目模板简化-调整" class="headerlink" title="5.  项目模板简化-调整"></a>5.  项目模板简化-调整</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">删除模板中不用的图片、样式、js文件</span><br></pre></td></tr></table></figure>
<h2 id="6-git-版本控制"><a href="#6-git-版本控制" class="headerlink" title="6.  git-版本控制"></a>6.  git-版本控制</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">git init </span><br><span class="line">git status</span><br><span class="line">git add .</span><br><span class="line">git commit -m &quot;&quot;</span><br><span class="line">新建远程仓库</span><br><span class="line">关联仓库  git remote add origin 链接</span><br><span class="line">推送 git push -u origin master</span><br><span class="line">git branch  查看分支 </span><br><span class="line">git checkout -b 分支名   新建某个分支并且切换到该分支</span><br></pre></td></tr></table></figure>
<h2 id="7-登录"><a href="#7-登录" class="headerlink" title="7.  登录"></a>7.  登录</h2><h3 id="7-1-新建分支-login组件-配置路由"><a href="#7-1-新建分支-login组件-配置路由" class="headerlink" title="7.1  新建分支-login组件-配置路由"></a>7.1  新建分支-login组件-配置路由</h3><p><code>index.js==&gt;router.js</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &apos;vue&apos;</span><br><span class="line">import vueRouter from &apos;vue-router&apos;</span><br><span class="line">Vue.use(vueRouter);</span><br><span class="line">import Login from &quot;../components/login.vue&quot;;</span><br><span class="line">在webpack模板中提供新功能  @自动锁定src</span><br><span class="line">import Login from &quot;@/components/login.vue&quot;;</span><br><span class="line">export default new Router(&#123;</span><br><span class="line">   routes: [</span><br><span class="line">   	   &#123;</span><br><span class="line">           name: &apos;home&apos;,</span><br><span class="line">           path: &apos;/&apos;,</span><br><span class="line">           redirect: &#123;</span><br><span class="line">               name: &apos;login&apos;</span><br><span class="line">           &#125;</span><br><span class="line">   	   &#125;,</span><br><span class="line">       &#123;</span><br><span class="line">           name: &apos;login&apos;,</span><br><span class="line">           path: &apos;/login&apos;,</span><br><span class="line">           component: Login</span><br><span class="line">       &#125;</span><br><span class="line">   ]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><code>login.vue</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div&gt;登录&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"> export default &#123;</span><br><span class="line">     </span><br><span class="line"> &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h3 id="7-2-引入表单组件"><a href="#7-2-引入表单组件" class="headerlink" title="7.2  引入表单组件"></a>7.2  引入表单组件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.找组件</span><br><span class="line">2.引入标签</span><br><span class="line">3.提供该组件的属性值和数据/方法</span><br><span class="line">web前端助手-&gt;FEHelper</span><br></pre></td></tr></table></figure>
<h3 id="7-3-样式调整-水平垂直居中"><a href="#7-3-样式调整-水平垂直居中" class="headerlink" title="7.3  样式调整-水平垂直居中"></a>7.3  样式调整-水平垂直居中</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">1.form水平垂直居中</span><br><span class="line">2.背景色</span><br><span class="line">3.圆角</span><br><span class="line">4.按钮宽度</span><br><span class="line"></span><br><span class="line">.wrap &#123;</span><br><span class="line">    height: 100%;</span><br><span class="line">    background-color: #324152;</span><br><span class="line">    让里面的元素水平垂直居中</span><br><span class="line">    display: flex;</span><br><span class="line">    justify-content: center;</span><br><span class="line">    align-items: center;</span><br><span class="line">&#125;</span><br><span class="line">.wrap form &#123;</span><br><span class="line">    background-color: #fff;</span><br><span class="line">    border-radius: 10px;</span><br><span class="line">    width: 400px;</span><br><span class="line">    padding: 300px;</span><br><span class="line">&#125;</span><br><span class="line">.wrap .form &#123;</span><br><span class="line">    width: 100%;</span><br><span class="line">&#125;</span><br><span class="line">公共样式：</span><br><span class="line">html,body&#123;</span><br><span class="line">    height: 100%;</span><br><span class="line">    margin: 0;</span><br><span class="line">    padding: 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="7-4-axios插件"><a href="#7-4-axios插件" class="headerlink" title="7.4  axios插件"></a>7.4  axios插件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">1.安装axios</span><br><span class="line">	npm i axios </span><br><span class="line">2.使用axios第一种写法</span><br><span class="line">	import axios from &apos;axios&apos;;</span><br><span class="line">	Vue.prototype.$http = axios;</span><br><span class="line">3.导入</span><br><span class="line">1)http.js</span><br><span class="line">import axios from &apos;axios&apos;;   将axios变成vue的插件</span><br><span class="line">const Http = &#123;&#125;;</span><br><span class="line">Http.install = function (Vue, options) &#123;</span><br><span class="line">  Vue.prototype.$http = axios;</span><br><span class="line">&#125;</span><br><span class="line">2)导出</span><br><span class="line">export default Http;</span><br><span class="line">3)在main.js文件中导入</span><br><span class="line">import Http from &apos;@plugins/http.js&apos;;</span><br><span class="line">使用vue的插件</span><br><span class="line">Vue.use(Http);</span><br><span class="line">4)在login.vue文件中</span><br><span class="line">export default &#123;</span><br><span class="line">    mounted()&#123;</span><br><span class="line">        console.log(this.$http);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="7-5-发送登录请求"><a href="#7-5-发送登录请求" class="headerlink" title="7.5  发送登录请求"></a>7.5  发送登录请求</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">接口: 登录验证接口  login post </span><br><span class="line">点击按钮发送请求</span><br><span class="line">1.配置基准url   http.js</span><br><span class="line">axios.defaults.baseURL = &apos;...&apos;;</span><br><span class="line">2.login.vue</span><br><span class="line">&lt;button @click=&apos;handleLogin()&apos;&gt;登录&lt;/button&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    methods: &#123;</span><br><span class="line">        handleLogin()&#123;</span><br><span class="line">            this.$http.post(&apos;login&apos;,this.formdata)</span><br><span class="line">                .then(res =&gt; &#123;</span><br><span class="line">                	const &#123;data:&#123;meta:&#123;mag,status&#125;&#125;&#125; = res;</span><br><span class="line">                	if(status === 200)&#123;</span><br><span class="line">                        alert(msg);</span><br><span class="line">                	&#125;else&#123;</span><br><span class="line">                        alert(msg);</span><br><span class="line">                	&#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">存在的用户: admin 123456</span><br></pre></td></tr></table></figure>
<h3 id="7-6-引入提示框组件"><a href="#7-6-引入提示框组件" class="headerlink" title="7.6  引入提示框组件"></a>7.6  引入提示框组件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">http://element-cn.eleme.io/#/zh-CN/component/message</span><br><span class="line">if(status === 200)&#123;</span><br><span class="line">    this.$message(&#123;</span><br><span class="line">    	message: msg,</span><br><span class="line">    	type: &apos;success&apos;</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;else&#123;</span><br><span class="line">    this.$message(&#123;</span><br><span class="line">        message: msg,</span><br><span class="line">        type: &apos;warning&apos;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="7-7-登录成功-进入home组件"><a href="#7-7-登录成功-进入home组件" class="headerlink" title="7.7  登录成功-进入home组件"></a>7.7  登录成功-进入home组件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">if(status === 200)&#123;</span><br><span class="line">    this.$message(&#123;</span><br><span class="line">    	message: msg,</span><br><span class="line">    	type: &apos;success&apos;</span><br><span class="line">	&#125;);</span><br><span class="line">	第一步:成功后跳转到首页:改标识  修改页面</span><br><span class="line">	this.$router.push(&#123;</span><br><span class="line">        name: &apos;home&apos;</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>router.js</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">导入home.vue 文件</span><br><span class="line">import Home from &apos;@/components/home.vue&apos;; </span><br><span class="line">export default new Router(&#123;</span><br><span class="line">    routes: [</span><br><span class="line">    	渲染首页</span><br><span class="line">        &#123;</span><br><span class="line">            name: &apos;home&apos;,</span><br><span class="line">            path:　&apos;／&apos;,</span><br><span class="line">            component: Home</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><code>home.vue</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div&gt;首页内容&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h3 id="7-8-简化登录请求代码-async和await"><a href="#7-8-简化登录请求代码-async和await" class="headerlink" title="7.8  简化登录请求代码-async和await"></a>7.8  简化登录请求代码-async和await</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.找到异步操作　在前面加await</span><br><span class="line">2.找到距离异步操作最近的函数　前面加async</span><br></pre></td></tr></table></figure>
<p><code>异步操作</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">    methods: &#123;</span><br><span class="line">        async handleLogin()&#123;</span><br><span class="line">            const res = await this.$http.post(&apos;login&apos;,this.formdata);</span><br><span class="line">            const &#123;data:&#123;meta:&#123;mag,status&#125;&#125;&#125; = res;</span><br><span class="line">            if(status === 200)&#123;</span><br><span class="line">               ...</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">               ...</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="7-9-保存token值"><a href="#7-9-保存token值" class="headerlink" title="7.9  保存token值"></a>7.9  保存token值</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">登录成功后　　后台会返回用户信息　token</span><br><span class="line">发送axios之后的响应,res,打印console.log(res);里面的data数据中data中有token,是唯一标识</span><br><span class="line">if(status === 200)&#123;</span><br><span class="line">	保存用户token 值</span><br><span class="line">	localStorage.setItem(&apos;token&apos;,data.data.token);</span><br><span class="line">    this.$message.success(msg);</span><br><span class="line">    this.$router.push(&#123;</span><br><span class="line">    	name: &apos;home&apos;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;else&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="8-首页"><a href="#8-首页" class="headerlink" title="8.  首页"></a>8.  首页</h2><h3 id="8-1-侧边栏－导航组件－文档"><a href="#8-1-侧边栏－导航组件－文档" class="headerlink" title="8.1  侧边栏－导航组件－文档"></a>8.1  侧边栏－导航组件－文档</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">http://element-cn.eleme.io/#/zh-CN/component/menu  导航栏</span><br><span class="line">default-active	当前激活菜单的 index	</span><br><span class="line">unique-opened	是否只保持一个子菜单的展开</span><br><span class="line">router	是否使用 vue-router 的模式，启用该模式会在激活导航时以 index 作为 path 进行路由跳转</span><br><span class="line">&lt;el-aside width=&quot;200px&quot; class=&apos;aside&apos;&gt;</span><br><span class="line">	&lt;el-menu</span><br><span class="line">      default-active=&quot;2&quot;&gt;</span><br><span class="line">      &lt;el-submenu index=&quot;1&quot;&gt;</span><br><span class="line">        &lt;el-menu-item-group title=&quot;分组2&quot;&gt;</span><br><span class="line">          &lt;el-menu-item index=&quot;1-3&quot;&gt;选项3&lt;/el-menu-item&gt;</span><br><span class="line">        &lt;/el-menu-item-group&gt;</span><br><span class="line">      &lt;/el-submenu&gt;</span><br><span class="line">    &lt;/el-menu&gt;</span><br><span class="line">&lt;/el-aside&gt;</span><br></pre></td></tr></table></figure>
<h3 id="8-2-侧边栏－引入导航组件－调整"><a href="#8-2-侧边栏－引入导航组件－调整" class="headerlink" title="8.2  侧边栏－引入导航组件－调整"></a>8.2  侧边栏－引入导航组件－调整</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">unique-opened	是否只保持一个子菜单的展开</span><br><span class="line">default-active	当前激活菜单的 index</span><br><span class="line">调整列表：显示几级  控制点击哪个哪个下拉列表展开</span><br><span class="line">一级导航  el-submenu</span><br><span class="line">二级导航  el-menu-item</span><br><span class="line">注意:每个Index值不一样</span><br></pre></td></tr></table></figure>
<h3 id="8-3-头部-退出功能"><a href="#8-3-头部-退出功能" class="headerlink" title="8.3  头部-退出功能"></a>8.3  头部-退出功能</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">点击退出:</span><br><span class="line">	1.清除token  session</span><br><span class="line">	2.回到登录页</span><br><span class="line">	3.给出提示</span><br><span class="line">1)&lt;a href=&apos;#&apos; @click.prevent = &quot;handleLoginout()&quot;&gt;&lt;/a&gt;</span><br><span class="line">2)export default &#123;</span><br><span class="line">    methods: &#123;</span><br><span class="line">    	退出</span><br><span class="line">        handleLoginout()&#123;</span><br><span class="line">            1.清除token localStorage</span><br><span class="line">            localStorage.clear();</span><br><span class="line">            2.退出到登录页</span><br><span class="line">            this.$router.push(&#123;</span><br><span class="line">                name: &apos;login&apos;</span><br><span class="line">            &#125;);</span><br><span class="line">            3.提示</span><br><span class="line">            this.$message.success(&apos;退出成功&apos;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="8-4-进入首页的权限验证"><a href="#8-4-进入首页的权限验证" class="headerlink" title="8.4  进入首页的权限验证"></a>8.4  进入首页的权限验证</h3><p><code>home.vue</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">beforeCreate()&#123;</span><br><span class="line">	如果没有token，则跳转到登录页</span><br><span class="line">    if(!localStorage.getItem(&apos;token&apos;))&#123;</span><br><span class="line">        this.$message.warining(&apos;请先登录&apos;);</span><br><span class="line">        重定向</span><br><span class="line">        this.$router.push(&#123;</span><br><span class="line">           	name: &apos;login&apos;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="9-用户管理"><a href="#9-用户管理" class="headerlink" title="9.  用户管理"></a>9.  用户管理</h2><h3 id="9-1-用户列表"><a href="#9-1-用户列表" class="headerlink" title="9.1  用户列表"></a>9.1  用户列表</h3><h4 id="9-1-1-新建组件-路由配置"><a href="#9-1-1-新建组件-路由配置" class="headerlink" title="9.1.1 新建组件-路由配置"></a>9.1.1 新建组件-路由配置</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.el-menu开启路由模式 router</span><br><span class="line">2.home.vue el-main里面是router-view </span><br><span class="line">3.新建users.vue</span><br><span class="line">4.配置路由(在home的路由配置里面children)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">home.vue</span><br><span class="line">default-active	当前激活菜单的 index</span><br><span class="line">unique-opened	是否只保持一个子菜单的展开</span><br><span class="line">router	是否使用 vue-router 的模式，启用该模式会在激活导航时以 index 作为 path 进行路由跳转</span><br><span class="line">&lt;el-menu default-active=&quot;2&quot; unique-opened router&gt;</span><br><span class="line">      &lt;el-submenu index=&quot;1&quot;&gt;</span><br><span class="line">            &lt;el-menu-item-group&gt;</span><br><span class="line">              &lt;template slot=&quot;title&quot;&gt;分组一&lt;/template&gt;</span><br><span class="line">              &lt;el-menu-item index=&quot;users&quot;&gt;用户列表&lt;/el-menu-item&gt;</span><br><span class="line">            &lt;/el-menu-item-group&gt;</span><br><span class="line">      &lt;/el-submenu&gt;</span><br><span class="line">&lt;/el-menu&gt;</span><br></pre></td></tr></table></figure>
<p><code>router.js</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">导入组件</span><br><span class="line">&lt;el-main class=&apos;main&apos;&gt;</span><br><span class="line">	&lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">&lt;/el-main&gt;</span><br><span class="line">import Users from &apos;users&apos;;</span><br><span class="line">export default new Router&#123;</span><br><span class="line">    routes: [</span><br><span class="line">        &#123;</span><br><span class="line">            name: &apos;home&apos;,</span><br><span class="line">            path: &apos;/home&apos;,</span><br><span class="line">            component: Home,</span><br><span class="line">            children: [</span><br><span class="line">                &#123;</span><br><span class="line">                    name: &apos;users&apos;,</span><br><span class="line">                    path: &apos;/users&apos;,</span><br><span class="line">                    component: Users</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>users.vue</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;&lt;/template&gt;</span><br><span class="line">&lt;script&gt;&lt;/script&gt;</span><br><span class="line">&lt;style&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h4 id="9-1-2-面包屑和搜索框"><a href="#9-1-2-面包屑和搜索框" class="headerlink" title="9.1.2  面包屑和搜索框"></a>9.1.2  面包屑和搜索框</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">整体:卡片</span><br><span class="line">面包屑+搜索框+按钮</span><br><span class="line">users.vue</span><br><span class="line">卡片</span><br><span class="line">&lt;el-card class=&quot;card&quot;&gt;</span><br><span class="line">    面包屑</span><br><span class="line">    &lt;el-breadcrumb separator-class=&quot;el-icon-arrow-right&quot;&gt;</span><br><span class="line">          &lt;el-breadcrumb-item :to=&quot;&#123; path: &apos;/&apos; &#125;&quot;&gt;首页&lt;/el-breadcrumb-item&gt;</span><br><span class="line">          &lt;el-breadcrumb-item&gt;用户管理&lt;/el-breadcrumb-item&gt;</span><br><span class="line">          &lt;el-breadcrumb-item&gt;用户列表&lt;/el-breadcrumb-item&gt;</span><br><span class="line">    &lt;/el-breadcrumb&gt;</span><br><span class="line">    搜索框</span><br><span class="line">    &lt;el-row&gt;</span><br><span class="line">    	&lt;el-col&gt;</span><br><span class="line">    		&lt;el-input placeholder=&quot;请输入内容&quot; v-model=&quot;query&quot; class=&quot;input-with-select&quot;&gt;</span><br><span class="line">                &lt;el-button slot=&quot;append&quot; icon=&quot;el-icon-search&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">             &lt;/el-input&gt;</span><br><span class="line">             &lt;el-button type=&quot;primary&quot;&gt;添加用户&lt;/el-button&gt;</span><br><span class="line">    	&lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">&lt;/el-card&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">        data()&#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                query: &apos;&apos;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">	.card &#123;</span><br><span class="line">        height: 100%</span><br><span class="line">	&#125;</span><br><span class="line">	.input-with-select &#123;</span><br><span class="line">        margin-top: 20px;</span><br><span class="line">        width: 350px;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h4 id="9-1-3-引入表格组件"><a href="#9-1-3-引入表格组件" class="headerlink" title="9.1.3  引入表格组件"></a>9.1.3  引入表格组件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">表格</span><br><span class="line">data属性值是表格中的数据</span><br><span class="line">&lt;el-table :data=&quot;tableData&quot; style=&quot;width: 100%&quot;&gt;</span><br><span class="line">      &lt;el-table-column</span><br><span class="line">        prop=&quot;date&quot;</span><br><span class="line">        label=&quot;日期&quot;</span><br><span class="line">        width=&quot;180&quot;&gt;</span><br><span class="line">      &lt;/el-table-column&gt;</span><br><span class="line">      &lt;el-table-column</span><br><span class="line">        prop=&quot;name&quot;</span><br><span class="line">        label=&quot;姓名&quot;</span><br><span class="line">        width=&quot;180&quot;&gt;</span><br><span class="line">      &lt;/el-table-column&gt;</span><br><span class="line">      &lt;el-table-column</span><br><span class="line">        prop=&quot;address&quot;</span><br><span class="line">        label=&quot;地址&quot;&gt;</span><br><span class="line">      &lt;/el-table-column&gt;</span><br><span class="line">&lt;/el-table&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">      data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          query: &apos;&apos;,</span><br><span class="line">          tableData: [&#123;</span><br><span class="line">            date: &apos;2016-05-02&apos;,</span><br><span class="line">            name: &apos;王小虎&apos;,</span><br><span class="line">            address: &apos;上海市普陀区金沙江路 1518 弄&apos;</span><br><span class="line">          &#125;, &#123;</span><br><span class="line">            date: &apos;2016-05-04&apos;,</span><br><span class="line">            name: &apos;王小虎&apos;,</span><br><span class="line">            address: &apos;上海市普陀区金沙江路 1517 弄&apos;</span><br><span class="line">          &#125;, &#123;</span><br><span class="line">            date: &apos;2016-05-01&apos;,</span><br><span class="line">            name: &apos;王小虎&apos;,</span><br><span class="line">            address: &apos;上海市普陀区金沙江路 1519 弄&apos;</span><br><span class="line">          &#125;, &#123;</span><br><span class="line">            date: &apos;2016-05-03&apos;,</span><br><span class="line">            name: &apos;王小虎&apos;,</span><br><span class="line">            address: &apos;上海市普陀区金沙江路 1516 弄&apos;</span><br><span class="line">          &#125;]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h4 id="9-1-4-请求数据"><a href="#9-1-4-请求数据" class="headerlink" title="9.1.4  请求数据"></a>9.1.4  请求数据</h4><p><code>users.vue</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">接口：用户数据列表  users get</span><br><span class="line">export default &#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            query: &apos;&apos;,</span><br><span class="line">            tableData: [],</span><br><span class="line">            query: &apos;&apos;,</span><br><span class="line">            pagenum: 1,</span><br><span class="line">            pagesize: 2,</span><br><span class="line">            total: -1</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    created()&#123;</span><br><span class="line">        this.getTableDate();</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">    	获取用户列表</span><br><span class="line">        async getTableDate()&#123;</span><br><span class="line">        	授权token  需要设置为token的值</span><br><span class="line">        	const AUTH_TOKEN = localStorage.getItem(&apos;token&apos;);</span><br><span class="line">        	axios.defaults.headers.common[&apos;Authorization&apos;] = AUTH_TOKEN;</span><br><span class="line">            const res = await this.$http.get(&apos;users?query=$&#123;this.query&#125;&amp;pagenum=$&#123;this.pagenum&#125;$pagesize=$&#123;this.pagesize&#125;&apos;);</span><br><span class="line">            console.log(res);  获取到的数据为Null  因为token无效</span><br><span class="line">            原因是  所有接口数据中 除了登录不需要授权 其他所有的请求都需要授权</span><br><span class="line">            必须要在axios文件中设置一个请求头,在Http.js文件中添加请求头axios发送请求,vue将axios封装成vue插件</span><br><span class="line">            const &#123;meta:&#123;status,msg&#125;,data:&#123;total,users&#125;&#125; = res.data;</span><br><span class="line">            </span><br><span class="line">            判断状态。。。。。。。</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">或者</span><br><span class="line">async getData()&#123;</span><br><span class="line">    const AUTH_TOKEN = window.localStorage.getItem(&apos;token&apos;);</span><br><span class="line">    this.$http.defaults.headers.common[&apos;Authorization&apos;] = AUTH_TOKEN;</span><br><span class="line">    const res = await this.$http.get(&apos;users?query=&apos;+this.query+&apos;&amp;pagenum=&apos;+this.pagenum+&apos;&amp;pagesize=&apos;+this.pagesize);</span><br><span class="line">    console.log(res);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>http.js</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">导入</span><br><span class="line">import axios from &apos;axios&apos;;</span><br><span class="line">const Http = &#123;&#125;;</span><br><span class="line">Http.install = function(Vue,options)&#123;</span><br><span class="line">	设置基准值</span><br><span class="line">	axios.defaults.baseURL = &apos;http://localhost:8888/api/private/v1/&apos;;</span><br><span class="line">	授权token,如果写在这 那么所有发送请求都会授权token,所以不能写在这</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="9-1-5-渲染数据-一般数据"><a href="#9-1-5-渲染数据-一般数据" class="headerlink" title="9.1.5  渲染数据-一般数据"></a>9.1.5  渲染数据-一般数据</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">1.this.tableData = res.data.data.users</span><br><span class="line">2.给prop赋值</span><br><span class="line">3.表格数据分为两类</span><br><span class="line">	一般数据(单元格的内容就是prop的值)</span><br><span class="line">	特殊数据</span><br><span class="line">if(status === 200)&#123;</span><br><span class="line">    this.tableData = users;</span><br><span class="line">    this.total = total;</span><br><span class="line">    this.$message.success(msg);</span><br><span class="line">&#125;else&#123;</span><br><span class="line">    this.$message.warning(msg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;el-table&gt;</span><br><span class="line">	prop=&apos;id&apos;</span><br><span class="line">	prop=&apos;username&apos;</span><br><span class="line">	prop=&apos;email&apos;</span><br><span class="line">	prop=&apos;mobile&apos;</span><br><span class="line">	prop=&apos;create_time&apos;</span><br><span class="line">	prop=&apos;mg_state&apos;</span><br><span class="line">&lt;/el-table&gt;</span><br></pre></td></tr></table></figure>
<h4 id="9-1-6-渲染数据-日期格式处理"><a href="#9-1-6-渲染数据-日期格式处理" class="headerlink" title="9.1.6  渲染数据-日期格式处理"></a>9.1.6  渲染数据-日期格式处理</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">1.使用全局过滤器   main.js文件中</span><br><span class="line">	导入 import moment from &apos;moment&apos;;</span><br><span class="line">	Vue.filter(&apos;fmDate&apos;,(v) =&gt; &#123;</span><br><span class="line">        return moment(v).format(&apos;YYYY-MM-DD&apos;);</span><br><span class="line">	&#125;);</span><br><span class="line">2.安装moment   npm i moment;</span><br><span class="line">3.在main.js文件中引入</span><br><span class="line">	import moment from &apos;moment&apos;;</span><br><span class="line">4.在users.vue文件中</span><br><span class="line">prop的值不支持过滤器的使用</span><br><span class="line">&lt;el-table-column prop=&apos;create_time&apos; label=&quot;创建日期&quot; width=&quot;150&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">5.如果单元格的内容不是prop的key对应的值，此时，需要给被显示内容的外层包裹容器template</span><br><span class="line">目的:在里层使用外层tableData-&gt;组件传值</span><br><span class="line">slot-scope作用:承上启下/传递数据</span><br><span class="line">&apos;tableData&apos;自动获取上层数据的值 : data=&apos;tableData&apos;</span><br><span class="line">在里层通过tableDat.row来使用</span><br><span class="line">&lt;el-table-column label=&quot;创建日期&quot; width=&quot;150&quot;&gt;</span><br><span class="line">    &lt;template slot-scope=&apos;tableData&apos;&gt;</span><br><span class="line">    	&#123;&#123;tableData.row.create_time|fmDate&#125;&#125;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">&lt;/el-table-column&gt;</span><br><span class="line">6.注意: slot-scope的值可以是任意值,一般都是scope</span><br><span class="line">通过template的属性slot-scope可以把上层数据tableData传递给里层进行使用</span><br><span class="line"></span><br><span class="line">&lt;el-table-column label=&quot;创建日期&quot; width=&quot;150&quot;&gt;</span><br><span class="line">    &lt;template slot-scope=&apos;scope&apos;&gt;</span><br><span class="line">    	&#123;&#123;scope.row.create_time|fmDate&#125;&#125;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">&lt;/el-table-column&gt;</span><br><span class="line">scope会自动获取上层有数据的值  :data=&apos;tableData&apos;</span><br><span class="line">scope.row是数据源中的每个元素</span><br><span class="line">slot-scope和element-ui没任何关系,是vue的API</span><br></pre></td></tr></table></figure>
<h4 id="9-1-7-用户状态开关"><a href="#9-1-7-用户状态开关" class="headerlink" title="9.1.7  用户状态开关"></a>9.1.7  用户状态开关</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">element-ui  开关</span><br><span class="line">&lt;el-table-column label=&quot;用户状态&quot; width=&quot;180&quot;&gt;</span><br><span class="line">	1）如果单元格的内容不是prop的key对应的值，此时，需要给被显示内容的外层包裹容器template</span><br><span class="line">	2）通过slot-scope获取上层数据</span><br><span class="line">    &lt;template slot-scope=&apos;scope&apos;&gt;</span><br><span class="line">        &lt;el-switch</span><br><span class="line">        3)获取数据  scope.row.mg_state</span><br><span class="line">        v-model=&quot;scope.row.mg_state&quot;</span><br><span class="line">        active-color=&quot;#13ce66&quot;</span><br><span class="line">        inactive-color=&quot;#ff4949&quot;&gt;</span><br><span class="line">        &lt;/el-switch&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">&lt;/el-table-column&gt;</span><br></pre></td></tr></table></figure>
<h4 id="9-1-8-操作"><a href="#9-1-8-操作" class="headerlink" title="9.1.8  操作"></a>9.1.8  操作</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">align=&apos;center&apos; :文本居中</span><br><span class="line">header-align=&apos;center&apos;: 表头居中</span><br><span class="line">&lt;el-table-column align=&apos;center&apos; header-align=&apos;center&apos; label=&quot;操作&quot; width=&quot;230&quot;&gt;</span><br><span class="line">    &lt;template slot-scope=&apos;scope&apos;&gt;</span><br><span class="line">        &lt;el-button round plain size=&apos;mini&apos; type=&quot;primary&quot; icon=&quot;el-icon-edit&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button round plain size=&apos;mini&apos; type=&quot;primary&quot; icon=&quot;el-icon-delete&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button round plain size=&apos;mini&apos; type=&quot;primary&quot; icon=&quot;el-icon-check&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">&lt;/el-table-column&gt;</span><br></pre></td></tr></table></figure>
<h3 id="9-2-分页组件"><a href="#9-2-分页组件" class="headerlink" title="9.2  分页组件"></a>9.2  分页组件</h3><h4 id="9-2-1-分页文档引入"><a href="#9-2-1-分页文档引入" class="headerlink" title="9.2.1  分页文档引入"></a>9.2.1  分页文档引入</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">分页组件</span><br><span class="line">@size-change:每页显示的数据条数改变时</span><br><span class="line">@current-change:当前页显示数据条数改变时</span><br><span class="line">current-page:当前页码</span><br><span class="line">page-sizes:当前页显示数据条数数组</span><br><span class="line">page-size:当前页显示的条数</span><br><span class="line">total：总条数</span><br><span class="line">&lt;el-pagination</span><br><span class="line">    @size-change=&quot;handleSizeChange&quot;</span><br><span class="line">    @current-change=&quot;handleCurrentChange&quot;</span><br><span class="line">    :current-page=&quot;currentPage4&quot;</span><br><span class="line">    :page-sizes=&quot;[100, 200, 300, 400]&quot;</span><br><span class="line">    :page-size=&quot;100&quot;</span><br><span class="line">    layout=&quot;total, sizes, prev, pager, next, jumper&quot;</span><br><span class="line">    :total=&quot;400&quot;&gt;</span><br><span class="line">&lt;/el-pagination&gt;</span><br><span class="line">方法:</span><br><span class="line">methods: &#123;</span><br><span class="line">    handleSizeChange(val) &#123;</span><br><span class="line">    	console.log(`每页 $&#123;val&#125; 条`);</span><br><span class="line">    &#125;,</span><br><span class="line">    handleCurrentChange(val) &#123;</span><br><span class="line">    	console.log(`当前页: $&#123;val&#125;`);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="9-2-2-配置数据"><a href="#9-2-2-配置数据" class="headerlink" title="9.2.2  配置数据"></a>9.2.2  配置数据</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">组件配置：</span><br><span class="line">&lt;el-pagination</span><br><span class="line">    @size-change=&quot;handleSizeChange&quot;</span><br><span class="line">    @current-change=&quot;handleCurrentChange&quot;</span><br><span class="line">    :current-page=&quot;pagenum&quot;</span><br><span class="line">    :page-sizes=&quot;[2, 4, 6, 8]&quot;</span><br><span class="line">    :page-size=&quot;2&quot;</span><br><span class="line">    layout=&quot;total, sizes, prev, pager, next, jumper&quot;</span><br><span class="line">    :total=&quot;total&quot;&gt;</span><br><span class="line">&lt;/el-pagination&gt;</span><br><span class="line">数据</span><br><span class="line">data()&#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        input: &apos;&apos;,</span><br><span class="line">        tableData: [],</span><br><span class="line">        query:&apos;&apos;,</span><br><span class="line">        pagenum: 1,</span><br><span class="line">        pagesize: 2,</span><br><span class="line">        total: -1</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">methods: &#123;</span><br><span class="line">      handleSizeChange(val) &#123;</span><br><span class="line">        console.log(`每页 $&#123;val&#125; 条`);</span><br><span class="line">      &#125;,</span><br><span class="line">      handleCurrentChange(val) &#123;</span><br><span class="line">        console.log(`当前页: $&#123;val&#125;`);</span><br><span class="line">      &#125;,</span><br><span class="line">      async getData()&#123;</span><br><span class="line">        const AUTH_TOKEN = window.localStorage.getItem(&apos;token&apos;);</span><br><span class="line">        this.$http.defaults.headers.common[&apos;Authorization&apos;] = AUTH_TOKEN;</span><br><span class="line">        const res = await this.$http.get(&apos;users?query=&apos;+this.query+&apos;&amp;pagenum=&apos;+this.pagenum+&apos;&amp;pagesize=&apos;+this.pagesize);</span><br><span class="line">        console.log(res);</span><br><span class="line">        const &#123;data:&#123;pagenum,total,users&#125;,meta:&#123;msg,status&#125;&#125; = res.data;</span><br><span class="line">        if(status == 200)&#123;</span><br><span class="line">          this.$message.success(msg);</span><br><span class="line">          this.tableData = users;</span><br><span class="line">          this.total = total;</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">          this.$message.warning(msg);</span><br><span class="line">        &#125;      </span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="10-2-3-分页请求"><a href="#10-2-3-分页请求" class="headerlink" title="10.2.3  分页请求"></a>10.2.3  分页请求</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">接口:用户数据列表  get users</span><br><span class="line">点击页码时,发送新请求</span><br><span class="line">每页娴熟数据条数改变时，发送新请求</span><br><span class="line">methods: &#123;</span><br><span class="line">	 每页条数改变时,重新渲染页面</span><br><span class="line">      handleSizeChange(val) &#123;</span><br><span class="line">        this.pagenum = 1;</span><br><span class="line">        this.pagesize = val;</span><br><span class="line">        this.getData();</span><br><span class="line">        console.log(`每页 $&#123;val&#125; 条`);</span><br><span class="line">      &#125;,</span><br><span class="line">      当前页面改变时,重新渲染页面</span><br><span class="line">      handleCurrentChange(val) &#123;</span><br><span class="line">        this.pagenum = val;</span><br><span class="line">        this.getData();</span><br><span class="line">        console.log(`当前页: $&#123;val&#125;`);</span><br><span class="line">      &#125;,</span><br><span class="line">      async getData()&#123;</span><br><span class="line">        const AUTH_TOKEN = window.localStorage.getItem(&apos;token&apos;);</span><br><span class="line">        this.$http.defaults.headers.common[&apos;Authorization&apos;] = AUTH_TOKEN;</span><br><span class="line">        const res = await this.$http.get(&apos;users?query=&apos;+this.query+&apos;&amp;pagenum=&apos;+this.pagenum+&apos;&amp;pagesize=&apos;+this.pagesize);</span><br><span class="line">        console.log(res);</span><br><span class="line">        const &#123;data:&#123;pagenum,total,users&#125;,meta:&#123;msg,status&#125;&#125; = res.data;</span><br><span class="line">        if(status == 200)&#123;</span><br><span class="line">          this.$message.success(msg);</span><br><span class="line">          this.tableData = users;</span><br><span class="line">          this.total = total;</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">          this.$message.warning(msg);</span><br><span class="line">        &#125;      </span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="9-3-搜索用户"><a href="#9-3-搜索用户" class="headerlink" title="9.3  搜索用户"></a>9.3  搜索用户</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">1）点击搜索按钮,将this.input的值赋给query查询参数,渲染表格</span><br><span class="line">2)点击输入框的清空,触发清空事件,渲染所有数据</span><br><span class="line">	给输入框加 clearable  属性,可清空  清空事件 @clear=&apos;&apos;</span><br><span class="line">&lt;el-col&gt;</span><br><span class="line">    &lt;el-input placeholder=&quot;请输入内容&quot; clearable @clear=&apos;getAllUser()&apos; v-model=&quot;input&quot; class=&quot;input-with-select&quot;&gt;</span><br><span class="line">    	&lt;el-button slot=&quot;append&quot; @click=&apos;searchUser()&apos; icon=&quot;el-icon-search&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">    &lt;/el-input&gt;</span><br><span class="line">    &lt;el-button plain&gt;朴素按钮&lt;/el-button&gt;</span><br><span class="line">&lt;/el-col&gt;</span><br><span class="line">//清空数据时触发</span><br><span class="line">getAllUser()&#123;</span><br><span class="line">    this.query = this.input;  如果不重新设置this.query = &apos;&apos; 还是原来的值</span><br><span class="line">    this.getData();</span><br><span class="line">&#125;,</span><br><span class="line">//搜索用户</span><br><span class="line">searchUser()&#123;</span><br><span class="line">	设置第一页开始显示</span><br><span class="line">    this.pagenum = 1;</span><br><span class="line">    this.query = this.input;</span><br><span class="line">    this.getData();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="9-4-添加用户"><a href="#9-4-添加用户" class="headerlink" title="9.4  添加用户"></a>9.4  添加用户</h3><h4 id="9-4-1-打开对话框"><a href="#9-4-1-打开对话框" class="headerlink" title="9.4.1  打开对话框"></a>9.4.1  打开对话框</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">对话框组件</span><br><span class="line">&lt;el-button plain @click = &apos;openDialog()&apos;&gt;添加用户&lt;/el-button&gt;</span><br><span class="line">对话框</span><br><span class="line">&lt;el-dialog title=&quot;添加用户&quot; :visible.sync=&quot;dialogFormVisible&quot;&gt;</span><br><span class="line">      &lt;el-form :model=&quot;form&quot;&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;姓名&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span><br><span class="line">          &lt;el-input v-model=&quot;form.username&quot; auto-complete=&quot;off&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;密码&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span><br><span class="line">          &lt;el-input v-model=&quot;form.password&quot; auto-complete=&quot;off&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;邮箱&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span><br><span class="line">          &lt;el-input v-model=&quot;form.email&quot; auto-complete=&quot;off&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;电话&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span><br><span class="line">          &lt;el-input v-model=&quot;form.mobile&quot; auto-complete=&quot;off&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">      &lt;/el-form&gt;</span><br><span class="line">      &lt;div slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">        &lt;el-button @click=&quot;dialogFormVisible = false&quot;&gt;取 消&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; @click=&quot;dialogFormVisible = false&quot;&gt;确 定&lt;/el-button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">&lt;/el-dialog&gt;</span><br><span class="line">数据</span><br><span class="line">data()&#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        //添加用户的值 默认为false隐藏</span><br><span class="line">        dialogFormVisible:false,</span><br><span class="line">        //对话框数据</span><br><span class="line">        form: &#123;</span><br><span class="line">          username: &apos;&apos;,</span><br><span class="line">          password: &apos;&apos;,</span><br><span class="line">          email: &apos;&apos;,</span><br><span class="line">          mobile:&apos;&apos;</span><br><span class="line">        &#125;,</span><br><span class="line">        //对话框宽度</span><br><span class="line">        formLabelWidth: &apos;150px&apos;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">methods: &#123;</span><br><span class="line">     //点击按钮显示对话框</span><br><span class="line">      openDialog()&#123;</span><br><span class="line">      	清空对话框中的数据</span><br><span class="line">      	this.form = &#123;&#125;;</span><br><span class="line">        this.dialogFormVisible = true;</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="9-4-2-发送请求"><a href="#9-4-2-发送请求" class="headerlink" title="9.4.2  发送请求"></a>9.4.2  发送请求</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">添加用户:添加用户  users post</span><br><span class="line">&lt;div slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">    &lt;el-button @click=&quot;dialogFormVisible = false&quot;&gt;取 消&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button type=&quot;primary&quot; @click=&quot;addUser()&quot;&gt;确 定&lt;/el-button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">1)点击确定按钮,发送请求，请求成功之后,关闭对话框,重新渲染页面,给出提示,打开对话框清空数据</span><br><span class="line">//添加用户</span><br><span class="line">      async addUser()&#123;</span><br><span class="line">        const res = await this.$http.post(&apos;users&apos;,this.form);</span><br><span class="line">        //console.log(res);</span><br><span class="line">        const &#123;meta: &#123;msg,status&#125;&#125; = res.data;</span><br><span class="line">        if(status == 201)&#123;</span><br><span class="line">          this.dialogFormVisible = false;</span><br><span class="line">          this.getData();</span><br><span class="line">          this.$message.success(msg);</span><br><span class="line">        &#125;else &#123;</span><br><span class="line">          this.$message.warning(msg);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      //点击按钮显示对话框</span><br><span class="line">      openDialog()&#123;</span><br><span class="line">      	清空数据</span><br><span class="line">        this.form = &#123;&#125;;</span><br><span class="line">        this.dialogFormVisible = true;</span><br><span class="line">      &#125;</span><br><span class="line">2)点击取消,关闭对话框</span><br></pre></td></tr></table></figure>
<h3 id="9-5-删除用户"><a href="#9-5-删除用户" class="headerlink" title="9.5  删除用户"></a>9.5  删除用户</h3><h4 id="9-5-1-打开确认框"><a href="#9-5-1-打开确认框" class="headerlink" title="9.5.1  打开确认框"></a>9.5.1  打开确认框</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template slot-scope=&apos;scope&apos;&gt;</span><br><span class="line">    &lt;el-button round plain size=&apos;mini&apos; type=&quot;primary&quot; icon=&quot;el-icon-edit&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button round plain size=&apos;mini&apos; @click=&apos;deleteUser()&apos; type=&quot;primary&quot; icon=&quot;el-icon-delete&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button round plain size=&apos;mini&apos; type=&quot;primary&quot; icon=&quot;el-icon-check&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">删除处理</span><br><span class="line">//删除用户</span><br><span class="line">deleteUser()&#123;</span><br><span class="line">    this.$confirm(&apos;确认删除该用户?&apos;, &apos;提示&apos;, &#123;</span><br><span class="line">        confirmButtonText: &apos;确定&apos;,</span><br><span class="line">        cancelButtonText: &apos;取消&apos;,</span><br><span class="line">        type: &apos;warning&apos;</span><br><span class="line">    &#125;).then(() =&gt; &#123;</span><br><span class="line">    	this.$message.success(&apos;删除成功!&apos;);</span><br><span class="line">    &#125;).catch(() =&gt; &#123;</span><br><span class="line">    	this.$message.info(&apos;已取消删除!&apos;);     </span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="9-5-2-处理响应"><a href="#9-5-2-处理响应" class="headerlink" title="9.5.2  处理响应"></a>9.5.2  处理响应</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">接口: 删除单个用户  delete users/:id</span><br><span class="line">点击删除框中的确认按钮=&gt;发送请求</span><br><span class="line">	如果删除成功,重新渲染列表，设置从第一页开始渲染</span><br><span class="line">	如果删除失败,给出提示</span><br><span class="line">//删除用户</span><br><span class="line">deleteUser(id)&#123;</span><br><span class="line">    this.$confirm(&apos;确认删除该用户?&apos;, &apos;提示&apos;, &#123;</span><br><span class="line">        confirmButtonText: &apos;确定&apos;,</span><br><span class="line">        cancelButtonText: &apos;取消&apos;,</span><br><span class="line">        type: &apos;warning&apos;</span><br><span class="line">    &#125;).then(async () =&gt; &#123;</span><br><span class="line">        const res = await this.$http.delete(`users/$&#123;id&#125;`);</span><br><span class="line">        console.log(res);</span><br><span class="line">        const &#123;meta:&#123;msg,status&#125;&#125; = res.data;</span><br><span class="line">        if(status == 200)&#123;</span><br><span class="line">            this.$message.success(msg);</span><br><span class="line">            this.pagenum = 1;</span><br><span class="line">            this.getData();</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            this.$message.info(msg);     </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).catch(() =&gt; &#123;</span><br><span class="line">    	this.$message.info(&apos;已取消删除!&apos;);     </span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">注意:传参  async的位置</span><br></pre></td></tr></table></figure>
<h3 id="9-6-编辑"><a href="#9-6-编辑" class="headerlink" title="9.6  编辑"></a>9.6  编辑</h3><h4 id="9-6-1-点击按钮显示对话框"><a href="#9-6-1-点击按钮显示对话框" class="headerlink" title="9.6.1  点击按钮显示对话框"></a>9.6.1  点击按钮显示对话框</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">1.点击编辑按钮,注册点击事件</span><br><span class="line">&lt;template slot-scope=&apos;scope&apos;&gt;</span><br><span class="line">    &lt;el-button round plain size=&apos;mini&apos; @click=&apos;edit(scope.row.id)&apos; type=&quot;primary&quot; icon=&quot;el-icon-edit&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button round plain size=&apos;mini&apos; @click=&apos;deleteUser(scope.row.id)&apos; type=&quot;primary&quot; icon=&quot;el-icon-delete&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button round plain size=&apos;mini&apos; type=&quot;primary&quot; icon=&quot;el-icon-check&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">2.弹出对话框</span><br><span class="line">&lt;el-dialog title=&quot;编辑用户&quot; :visible.sync=&quot;dialogFormVisibleEdit&quot;&gt;</span><br><span class="line">    &lt;el-form :model=&quot;form&quot;&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;姓名&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span><br><span class="line">        	&lt;el-input v-model=&quot;form.username&quot; auto-complete=&quot;off&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;邮箱&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span><br><span class="line">        	&lt;el-input v-model=&quot;form.email&quot; auto-complete=&quot;off&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;电话&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span><br><span class="line">        	&lt;el-input v-model=&quot;form.mobile&quot; auto-complete=&quot;off&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">    &lt;/el-form&gt;</span><br><span class="line">    &lt;div slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">        &lt;el-button @click=&quot;dialogFormVisibleEdit = false&quot;&gt;取 消&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; @click=&quot;editUser()&quot;&gt;确 定&lt;/el-button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/el-dialog&gt;</span><br><span class="line">3.数据</span><br><span class="line">data()&#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        dialogFormVisibleEdit:false</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">methods: &#123;</span><br><span class="line">    //编辑用户</span><br><span class="line">      edit()&#123;</span><br><span class="line">      	弹出对话框</span><br><span class="line">        this.dialogFormVisibleEdit = true;</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="9-6-2-显示编辑数据"><a href="#9-6-2-显示编辑数据" class="headerlink" title="9.6.2  显示编辑数据"></a>9.6.2  显示编辑数据</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">接口: 根据 ID 查询用户信息   users/:id get</span><br><span class="line">//编辑用户  打开对话框,根据传递过来的数据进行查询数据，并渲染到表单</span><br><span class="line">async edit(id)&#123;</span><br><span class="line">    this.dialogFormVisibleEdit = true;</span><br><span class="line">    //根据id查询数据</span><br><span class="line">    const res = await this.$http.get(`users/$&#123;id&#125;`);</span><br><span class="line">    const &#123;data,meta:&#123;msg,status&#125;&#125; = res.data;</span><br><span class="line">    if(status == 200)&#123;</span><br><span class="line">    	this.form = data;</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">    	this.$message.warning(msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="9-6-3-发送请求"><a href="#9-6-3-发送请求" class="headerlink" title="9.6.3  发送请求"></a>9.6.3  发送请求</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">接口: 编辑用户提交   users/:id put</span><br><span class="line">//修改数据</span><br><span class="line">async editUser()&#123;</span><br><span class="line">    const res = await this.$http.put(`users/$&#123;this.form.id&#125;`,this.form);</span><br><span class="line">    const &#123;meta:&#123;msg,status&#125;&#125; = res.data;</span><br><span class="line">    if(status == 200)&#123;</span><br><span class="line">        this.$message.success(msg);</span><br><span class="line">        //关闭对话框</span><br><span class="line">        //this.dialogFormVisibleEdit = false;</span><br><span class="line">        //重新渲染页面</span><br><span class="line">        //this.getData();</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">    	this.$message.warning(msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="9-6-4-修改用户状态"><a href="#9-6-4-修改用户状态" class="headerlink" title="9.6.4  修改用户状态"></a>9.6.4  修改用户状态</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">接口: 修改用户状态   users/:uId/state/:type  put</span><br><span class="line">1.开关状态改变时,触发change事件   开关是表单元素,v-model是数据双向绑定的,所以不需要重新渲染页面</span><br><span class="line">&lt;el-table-column align=&apos;center&apos; header-align=&apos;center&apos; label=&quot;用户状态&quot; width=&quot;100&quot;&gt;</span><br><span class="line">    &lt;template slot-scope=&apos;scope&apos;&gt;</span><br><span class="line">        &lt;el-switch</span><br><span class="line">            @change=&apos;changeStatue(scope.row)&apos;</span><br><span class="line">            v-model=&quot;scope.row.mg_state&quot;</span><br><span class="line">            active-color=&quot;#13ce66&quot;</span><br><span class="line">            inactive-color=&quot;#ff4949&quot;&gt;</span><br><span class="line">        &lt;/el-switch&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">&lt;/el-table-column&gt;</span><br><span class="line">2.//修改用户状态   参数写在url中  id 和type</span><br><span class="line">async changeStatue(user)&#123;</span><br><span class="line">	const res = await this.$http.put(`users/$&#123;user.id&#125;/state/$&#123;user.mg_state&#125;`);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="9-7-分配角色"><a href="#9-7-分配角色" class="headerlink" title="9.7  分配角色"></a>9.7  分配角色</h3><h4 id="9-7-1-点击按钮，弹出对话框"><a href="#9-7-1-点击按钮，弹出对话框" class="headerlink" title="9.7.1  点击按钮，弹出对话框"></a>9.7.1  点击按钮，弹出对话框</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">1.&lt;template slot-scope=&apos;scope&apos;&gt;</span><br><span class="line">    &lt;el-button round plain size=&apos;mini&apos; @click=&apos;edit(scope.row.id)&apos; type=&quot;primary&quot; icon=&quot;el-icon-edit&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button round plain size=&apos;mini&apos; @click=&apos;deleteUser(scope.row.id)&apos; type=&quot;primary&quot; icon=&quot;el-icon-delete&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button round plain size=&apos;mini&apos; @click=&apos;showRole(scope.row)&apos; type=&quot;primary&quot; icon=&quot;el-icon-check&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">2.&lt;el-dialog title=&quot;分配角色&quot; :visible.sync=&quot;dialogFormVisibleRole&quot;&gt;</span><br><span class="line">      &lt;el-form :model=&quot;form&quot;&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;用户名称&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span><br><span class="line">          &#123;&#123;currentUserName&#125;&#125;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;角色名称&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span><br><span class="line">          &lt;el-select v-model=&apos;currentId&apos;&gt;</span><br><span class="line">            &lt;el-option label=&quot;请选择&quot; value=&quot;shanghai&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">            &lt;el-option label=&quot;测试&quot; value=&quot;beijing&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">          &lt;/el-select&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">      &lt;/el-form&gt;</span><br><span class="line">      &lt;div slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">        &lt;el-button @click=&quot;dialogFormVisibleRole = false&quot;&gt;取 消&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; @click=&quot;dialogFormVisibleRole = false&quot;&gt;确 定&lt;/el-button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/el-dialog&gt;</span><br><span class="line">3.data()&#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        //分配角色</span><br><span class="line">        dialogFormVisibleRole: false,</span><br><span class="line">        currentId: -1,</span><br><span class="line">        roles:[],  角色数组</span><br><span class="line">        currentUserName: &apos;&apos;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">methods:&#123;</span><br><span class="line">     //分配角色</span><br><span class="line">      showRole(user)&#123;</span><br><span class="line">        this.dialogFormVisibleRole = true;</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="9-7-2-显示对话框-下拉列表"><a href="#9-7-2-显示对话框-下拉列表" class="headerlink" title="9.7.2  显示对话框-下拉列表"></a>9.7.2  显示对话框-下拉列表</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select:</span><br><span class="line">v-model写在select中</span><br><span class="line">如果v-model绑定数据的值和option的value一样,默认显示option(label值)</span><br><span class="line">如果选择了某个option，此时,v-model绑定的数据值就是被选中的option的value值</span><br></pre></td></tr></table></figure>
<h4 id="9-7-3-显示当前用户的名字和角色"><a href="#9-7-3-显示当前用户的名字和角色" class="headerlink" title="9.7.3  显示当前用户的名字和角色"></a>9.7.3  显示当前用户的名字和角色</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">接口:角色列表  get roles  </span><br><span class="line">打开对话框,获取数据,将获取到的数据显示在下拉框中</span><br><span class="line">label显示的是下拉框中的内容,value是id号</span><br><span class="line">如果:value和:value不加:冒号,则显示的是字符串  v.rolename不是内容</span><br><span class="line">methods:&#123;</span><br><span class="line">     //分配角色</span><br><span class="line">      async showRole(user)&#123;</span><br><span class="line">      	显示当前用户的名字</span><br><span class="line">      	this.currentUserName = user.username;</span><br><span class="line">        this.dialogFormVisibleRole = true;</span><br><span class="line">        const res = await this.$http.get(&apos;roles&apos;);</span><br><span class="line">        console.log(res);</span><br><span class="line">        const &#123;data,meta:&#123;msg,status&#125;&#125; = res.data;</span><br><span class="line">        if(status == 200)&#123;</span><br><span class="line">          this.roles = data;</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">          this.$message.info(msg);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">渲染数据</span><br><span class="line">&lt;el-form-item label=&quot;角色名称&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span><br><span class="line">    &lt;el-select v-model=&apos;currentId&apos;&gt;</span><br><span class="line">        &lt;el-option label=&quot;请选择&quot; disabled value=&quot;shanghai&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">        &lt;el-option v-for=&apos;(v,i) in roles&apos; :key=&apos;i&apos; :label=&quot;v.roleName&quot; :value=&quot;v.id&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">    &lt;/el-select&gt;</span><br><span class="line">&lt;/el-form-item&gt;</span><br></pre></td></tr></table></figure>
<h4 id="9-7-4-点击确定-修改角色"><a href="#9-7-4-点击确定-修改角色" class="headerlink" title="9.7.4  点击确定-修改角色"></a>9.7.4  点击确定-修改角色</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">1.显示当前用户名</span><br><span class="line">定义数据 currentUserName </span><br><span class="line">方法中传入一个参数 scope.row</span><br><span class="line">this.currentUserName = scope.row.username;</span><br><span class="line">在标签中使用:  &#123;&#123;currentUserName&#125;&#125;</span><br><span class="line">2.显示当前用户的角色名字</span><br><span class="line">	根据用户id查询角色id,将查询到的角色id赋值给select的v-model值,从而显示出来</span><br><span class="line">//分配角色</span><br><span class="line">async showRole(user)&#123;</span><br><span class="line">    //显示当前用户的名字</span><br><span class="line">    console.log(user);</span><br><span class="line">    this.currentUserName = user.username;</span><br><span class="line">    this.dialogFormVisibleRole = true;</span><br><span class="line">    const res = await this.$http.get(&apos;roles&apos;);</span><br><span class="line">    console.log(res);</span><br><span class="line">    const &#123;data,meta:&#123;msg,status&#125;&#125; = res.data;</span><br><span class="line">    if(status == 200)&#123;</span><br><span class="line">    this.roles = data;</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">    this.$message.info(msg);</span><br><span class="line">    &#125;</span><br><span class="line">    //根据当前用户id请求角色id</span><br><span class="line">    const res2 = await this.$http.get(`users/$&#123;user.id&#125;`);</span><br><span class="line">    //console.log(res2);</span><br><span class="line">    this.currentId = res2.data.data.rid;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="9-7-5-修改用户角色"><a href="#9-7-5-修改用户角色" class="headerlink" title="9.7.5  修改用户角色"></a>9.7.5  修改用户角色</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">接口： 分配用户角色   users/:id/role put</span><br><span class="line">1. &lt;el-table-column align=&apos;center&apos; header-align=&apos;center&apos; label=&quot;操作&quot; width=&quot;230&quot;&gt;</span><br><span class="line">    &lt;template slot-scope=&apos;scope&apos;&gt;</span><br><span class="line">        &lt;el-button round plain size=&apos;mini&apos; @click=&apos;edit(scope.row.id)&apos; type=&quot;primary&quot; icon=&quot;el-icon-edit&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button round plain size=&apos;mini&apos; @click=&apos;deleteUser(scope.row.id)&apos; type=&quot;primary&quot; icon=&quot;el-icon-delete&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button round plain size=&apos;mini&apos; @click=&apos;showRole(scope.row)&apos; type=&quot;primary&quot; icon=&quot;el-icon-check&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">&lt;/el-table-column&gt;</span><br><span class="line">2.&lt;el-dialog title=&quot;分配角色&quot; :visible.sync=&quot;dialogFormVisibleRole&quot;&gt;</span><br><span class="line">    &lt;el-form :model=&quot;form&quot;&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;用户名称&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span><br><span class="line">        	&#123;&#123;currentUserName&#125;&#125;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;角色名称&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span><br><span class="line">            &lt;el-select v-model=&apos;currentId&apos;&gt;</span><br><span class="line">                &lt;el-option label=&quot;请选择&quot; disabled value=&quot;shanghai&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">                &lt;el-option v-for=&apos;(v,i) in roles&apos; :key=&apos;i&apos; :label=&quot;v.roleName&quot; :value=&quot;v.id&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">            &lt;/el-select&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">    &lt;/el-form&gt;</span><br><span class="line">    &lt;div slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">        &lt;el-button @click=&quot;dialogFormVisibleRole = false&quot;&gt;取 消&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; @click=&quot;setRole()&quot;&gt;确 定&lt;/el-button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/el-dialog&gt;</span><br><span class="line">3.data()&#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        //分配角色</span><br><span class="line">        dialogFormVisibleRole: false,</span><br><span class="line">        currentId: -1,</span><br><span class="line">        roles: [],</span><br><span class="line">        currentUserName: &apos;&apos;,</span><br><span class="line">        currentUserId:&apos;&apos;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">      //修改角色</span><br><span class="line">      async setRole()&#123;</span><br><span class="line">        const res = await this.$http.put(`users/$&#123;this.currentUserId&#125;/role`,&#123;rid:this.currentId&#125;);</span><br><span class="line">        const &#123;meta:&#123;msg,status&#125;&#125; = res.data;</span><br><span class="line">        if(status == 200)&#123;</span><br><span class="line">          this.$message.success(msg);</span><br><span class="line">          //关闭对话框</span><br><span class="line">           this.dialogFormVisibleRole = false;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      //分配角色</span><br><span class="line">      async showRole(user)&#123;</span><br><span class="line">        //console.log(user);</span><br><span class="line">        //显示当前用户的名字</span><br><span class="line">        this.currentUserName = user.username;</span><br><span class="line">        //当前用户的id</span><br><span class="line">        this.currentUserId = user.id;</span><br><span class="line">        this.dialogFormVisibleRole = true;</span><br><span class="line">        const res = await this.$http.get(&apos;roles&apos;);</span><br><span class="line">        console.log(res);</span><br><span class="line">        const &#123;data,meta:&#123;msg,status&#125;&#125; = res.data;</span><br><span class="line">        if(status == 200)&#123;</span><br><span class="line">          this.roles = data;</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">          this.$message.info(msg);</span><br><span class="line">        &#125;</span><br><span class="line">        //根据当前用户id请求角色id</span><br><span class="line">        const res2 = await this.$http.get(`users/$&#123;user.id&#125;`);</span><br><span class="line">        //console.log(res2);</span><br><span class="line">        //当前角色id</span><br><span class="line">        this.currentId = res2.data.data.rid;</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">git branch</span><br><span class="line">git status </span><br><span class="line">git add .</span><br><span class="line">git commit -m &quot;&quot;</span><br><span class="line">git checkout master  切换到主分支</span><br><span class="line">git status  查看状态</span><br><span class="line">git merge dev-users  合并分支</span><br><span class="line">git push 推</span><br></pre></td></tr></table></figure>
<h2 id="10-权限管理"><a href="#10-权限管理" class="headerlink" title="10.  权限管理"></a>10.  权限管理</h2><h3 id="10-1-权限列表"><a href="#10-1-权限列表" class="headerlink" title="10.1  权限列表"></a>10.1  权限列表</h3><h4 id="10-1-1-自定义面包屑组件"><a href="#10-1-1-自定义面包屑组件" class="headerlink" title="10.1.1  自定义面包屑组件"></a>10.1.1  自定义面包屑组件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">cusBread.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;el-breadcrumb separator-class=&quot;el-icon-arrow-right&quot;&gt;</span><br><span class="line">      &lt;el-breadcrumb-item :to=&quot;&#123; path: &apos;/&apos; &#125;&quot;&gt;首页&lt;/el-breadcrumb-item&gt;</span><br><span class="line">      &lt;el-breadcrumb-item&gt;&#123;&#123;this.level1&#125;&#125;&lt;/el-breadcrumb-item&gt;</span><br><span class="line">      &lt;el-breadcrumb-item&gt;&#123;&#123;this.level2&#125;&#125;&lt;/el-breadcrumb-item&gt;</span><br><span class="line">    &lt;/el-breadcrumb&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">	export default &#123;</span><br><span class="line">		//组件名字</span><br><span class="line">		name: &apos;my-bread&apos;,</span><br><span class="line">		props: [&apos;level1&apos;,&apos;level2&apos;]</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/scpript&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">main.js</span><br><span class="line">import MyBread from &apos;@/components/cusBread.vue&apos;</span><br><span class="line">//定义全局组件</span><br><span class="line">Vue.component(&quot;my-bread&quot;,MyBread);</span><br><span class="line">在rights.vue中使用</span><br><span class="line">&lt;my-bread &apos;level1=&apos;权限管理&apos; level2=&apos;权限列表&apos;&gt;&lt;/my-bread&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">组件：</span><br><span class="line">	场景|特点:当页面中有多个位置有一样的标签结构时,封装成一个组件</span><br><span class="line">	组件中的数据来源是其他组件,数据不能写在data中，要写在prop中</span><br><span class="line">	组件通信: 父传子</span><br><span class="line">	组件分类:全局|局部</span><br></pre></td></tr></table></figure>
<h4 id="10-1-2-axios-拦截器统一设置请求头"><a href="#10-1-2-axios-拦截器统一设置请求头" class="headerlink" title="10.1.2 axios-拦截器统一设置请求头"></a>10.1.2 axios-拦截器统一设置请求头</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">axios文档中拦截器:</span><br><span class="line">	在请求或和响应被then和catch处理前拦截他们</span><br><span class="line">	由于在非登录请求中都要设置 token,所以在axios拦截器中发送请求之前要先处理token</span><br><span class="line">main.js文件中</span><br><span class="line">//设置发送请求baseUrl</span><br><span class="line">axios.defaults.baseURL = &apos;http://localhost:8888/api/private/v1/&apos;;</span><br><span class="line">// 设置请求拦截</span><br><span class="line">// 添加一个请求拦截器</span><br><span class="line">axios.interceptors.request.use(function (config) &#123;</span><br><span class="line">	//在发送请求之前希望做些什么</span><br><span class="line">	//如果请求的不是登录请求，则设置拦截进行下面的代码</span><br><span class="line">	//根据config.url可以获取当前请求的地址</span><br><span class="line">	console.log(config);</span><br><span class="line">	if(config.url !== &apos;login&apos;)&#123;</span><br><span class="line">		const AUTH_TOKEN = window.localStorage.getItem(&apos;token&apos;);</span><br><span class="line">    	config.headers.Authorization = AUTH_TOKEN;</span><br><span class="line">	&#125;</span><br><span class="line">    return config;</span><br><span class="line">  &#125;, function (error) &#123;</span><br><span class="line">    // Do something with request error</span><br><span class="line">    return Promise.reject(error);</span><br><span class="line">  &#125;);</span><br><span class="line">Vue.prototype.$http = axios;</span><br><span class="line">设置拦截之后就不需要在发送请求之前设置头部token</span><br></pre></td></tr></table></figure>
<h4 id="10-1-3-表格展示-显示层级"><a href="#10-1-3-表格展示-显示层级" class="headerlink" title="10.1.3  表格展示-显示层级"></a>10.1.3  表格展示-显示层级</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">1.如果组件的内容是开始和结束标签的里面,此时需要给内容的外层套一个template</span><br><span class="line">2.如果内容里面用到了数据,并且数据来源label是当前组件的父组件的数据el-table,此时需要加一个slot-scope</span><br><span class="line">&lt;template slot-scope=&apos;scope&apos;&gt;</span><br><span class="line">	&lt;span v-if=&quot;scope.row.level === &apos;0&apos;&quot;&gt;一级&lt;/span&gt;</span><br><span class="line">	&lt;span v-if=&quot;scope.row.level === &apos;1&apos;&quot;&gt;二级&lt;/span&gt;</span><br><span class="line">	&lt;span v-if=&quot;scope.row.level === &apos;2&apos;&quot;&gt;三级&lt;/span&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">要显示的层级不是 0 1 2,而是一级、二级、三级</span><br><span class="line">&lt;el-table-column label=&quot;层级&quot; width=&quot;240&quot;&gt;</span><br><span class="line">    &lt;template slot-scope=&apos;scope&apos;&gt;</span><br><span class="line">        &lt;span v-if=&quot;scope.row.level === &apos;0&apos;&quot;&gt;一级&lt;/span&gt;</span><br><span class="line">        &lt;span v-if=&quot;scope.row.level === &apos;1&apos;&quot;&gt;二级&lt;/span&gt;</span><br><span class="line">        &lt;span v-if=&quot;scope.row.level === &apos;2&apos;&quot;&gt;三级&lt;/span&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">&lt;/el-table-column&gt;</span><br></pre></td></tr></table></figure>
<h3 id="10-2-角色列表"><a href="#10-2-角色列表" class="headerlink" title="10.2  角色列表"></a>10.2  角色列表</h3><h4 id="10-2-1-表格展示-展开行功能分析"><a href="#10-2-1-表格展示-展开行功能分析" class="headerlink" title="10.2.1 表格展示-展开行功能分析"></a>10.2.1 表格展示-展开行功能分析</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">表格展开功能：</span><br><span class="line">	通过设置 type=&quot;expand&quot; 和 Scoped slot 可以开启展开行功能，el-table-column 的模板会被渲染成为展开行的内容，展开行可访问的属性与使用自定义列模板时的 Scoped slot 相同。</span><br><span class="line">&lt;el-table :data=&quot;roles&quot; height=&apos;480px&apos; style=&quot;width: 100%&quot;&gt;</span><br><span class="line">	表格可展开</span><br><span class="line">    &lt;el-table-column type=&quot;expand&quot; width=&quot;100&quot;&gt;</span><br><span class="line">        &lt;template slot-scope=&apos;right&apos;&gt;</span><br><span class="line">            &lt;el-row&gt;</span><br><span class="line">                &lt;el-col&gt;&lt;span&gt;选项一&lt;/span&gt;&lt;/el-col&gt;</span><br><span class="line">                &lt;el-col&gt;</span><br><span class="line">                    &lt;el-row&gt;</span><br><span class="line">                        &lt;el-col&gt;&lt;span&gt;选项二&lt;/span&gt;&lt;/el-col&gt;</span><br><span class="line">                        &lt;el-col&gt;&lt;span&gt;选项三&lt;/span&gt;&lt;/el-col&gt;</span><br><span class="line">                    &lt;/el-row&gt;</span><br><span class="line">                &lt;/el-col&gt;</span><br><span class="line">            &lt;/el-row&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column type=&quot;index&quot; label=&quot;#&quot; width=&quot;100&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;roleName&quot; label=&quot;角色名称&quot; width=&quot;240&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;roleDesc&quot; label=&quot;角色描述&quot; width=&quot;240&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column align=&apos;center&apos; header-align=&apos;center&apos; label=&quot;操作&quot; width=&quot;230&quot;&gt;</span><br><span class="line">        &lt;template slot-scope=&apos;scope&apos;&gt;</span><br><span class="line">            &lt;el-button round plain size=&apos;mini&apos; type=&quot;primary&quot; icon=&quot;el-icon-edit&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">            &lt;el-button round plain size=&apos;mini&apos; type=&quot;primary&quot; icon=&quot;el-icon-delete&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">            &lt;el-button round plain size=&apos;mini&apos; type=&quot;primary&quot; icon=&quot;el-icon-check&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">	&lt;/el-table-column&gt;</span><br><span class="line">&lt;/el-table&gt;</span><br></pre></td></tr></table></figure>
<h4 id="10-2-2-表格展示-展开行-一级权限"><a href="#10-2-2-表格展示-展开行-一级权限" class="headerlink" title="10.2.2  表格展示-展开行-一级权限"></a>10.2.2  表格展示-展开行-一级权限</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table-column type=&quot;expand&quot; width=&quot;100&quot;&gt;</span><br><span class="line">    &lt;template slot-scope=&apos;scope&apos;&gt;</span><br><span class="line">        &lt;el-row v-for=&apos;(item1,i) in scope.row.children&apos;&gt;</span><br><span class="line">            &lt;el-col&gt;&lt;span&gt;&#123;&#123;item1.authName&#125;&#125;&lt;/span&gt;&lt;/el-col&gt;</span><br><span class="line">            &lt;el-col&gt;</span><br><span class="line">                &lt;el-row&gt;</span><br><span class="line">                    &lt;el-col&gt;&lt;span&gt;选项二&lt;/span&gt;&lt;/el-col&gt;</span><br><span class="line">                    &lt;el-col&gt;&lt;span&gt;选项三&lt;/span&gt;&lt;/el-col&gt;</span><br><span class="line">                &lt;/el-row&gt;</span><br><span class="line">            &lt;/el-col&gt;</span><br><span class="line">        &lt;/el-row&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">&lt;/el-table-column&gt;</span><br></pre></td></tr></table></figure>
<h4 id="10-2-3-表格展示-展开行-二级三级权限"><a href="#10-2-3-表格展示-展开行-二级三级权限" class="headerlink" title="10.2.3  表格展示-展开行-二级三级权限"></a>10.2.3  表格展示-展开行-二级三级权限</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table :data=&quot;roles&quot; height=&apos;480px&apos; style=&quot;width: 100%&quot;&gt;</span><br><span class="line">	&lt;el-table-column type=&quot;expand&quot; width=&quot;100&quot;&gt;</span><br><span class="line">		&lt;template slot-scope=&apos;scope&apos;&gt;</span><br><span class="line">            &lt;el-row v-for=&apos;(item1,i) in scope.row.children&apos; :key=&apos;i&apos;&gt;</span><br><span class="line">                &lt;el-col :span=&apos;4&apos;&gt;&lt;span&gt;&#123;&#123;item1.authName&#125;&#125;&lt;/span&gt;&lt;/el-col&gt;</span><br><span class="line">                &lt;el-col :span=&apos;20&apos;&gt;</span><br><span class="line">                	二级权限</span><br><span class="line">                    &lt;el-row v-for=&apos;(item2,i) in item1.children&apos; :key=&apos;i&apos;&gt;</span><br><span class="line">                        &lt;el-col :span=&apos;4&apos;&gt;&lt;span&gt;&#123;&#123;item2.authName&#125;&#125;&lt;/span&gt;&lt;/el-col&gt;</span><br><span class="line">                        三级权限</span><br><span class="line">                        &lt;el-col :span=&apos;20&apos;&gt;&lt;span v-for=&apos;(item3,i) in item2.children&apos; :key=&apos;i&apos;&gt;	&#123;&#123;item3.authName&#125;&#125;&lt;/span&gt;&lt;/el-col&gt;</span><br><span class="line">                    &lt;/el-row&gt;</span><br><span class="line">                &lt;/el-col&gt;</span><br><span class="line">            &lt;/el-row&gt;</span><br><span class="line">    	&lt;/template&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column type=&quot;index&quot; label=&quot;#&quot; width=&quot;100&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;roleName&quot; label=&quot;角色名称&quot; width=&quot;240&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column prop=&quot;roleDesc&quot; label=&quot;角色描述&quot; width=&quot;240&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">	&lt;el-table-column align=&apos;center&apos; header-align=&apos;center&apos; label=&quot;操作&quot; width=&quot;230&quot;&gt;</span><br><span class="line">        &lt;template slot-scope=&apos;scope&apos;&gt;</span><br><span class="line">            &lt;el-button round plain size=&apos;mini&apos; type=&quot;primary&quot; icon=&quot;el-icon-edit&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">            &lt;el-button round plain size=&apos;mini&apos; type=&quot;primary&quot; icon=&quot;el-icon-delete&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">            &lt;el-button round plain size=&apos;mini&apos; type=&quot;primary&quot; icon=&quot;el-icon-check&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line">&lt;/el-table&gt;</span><br><span class="line"></span><br><span class="line">添加样式： 标记   把所有span标签换成 el-tag</span><br></pre></td></tr></table></figure>
<h4 id="10-2-4-展开行-样式调整-处理无权限"><a href="#10-2-4-展开行-样式调整-处理无权限" class="headerlink" title="10.2.4  展开行-样式调整-处理无权限"></a>10.2.4  展开行-样式调整-处理无权限</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">1.给每个标签添加x号  给每个&lt;el-tag&gt;标签添加 closable</span><br><span class="line">&lt;el-tag closable&gt;&lt;/el-tag&gt;</span><br><span class="line">2添加箭头符号  &gt;   element-ui图标  </span><br><span class="line">&lt;i class=&apos;el-icon-arrow-right&apos;&gt;&lt;/i&gt;</span><br><span class="line">3.在展开行的位置处理无权限的内容</span><br><span class="line">&lt;el-row v-if=&apos;v-if=&apos;&apos;scope.row.children.length===0&apos;&gt;</span><br><span class="line">	&lt;el-col&gt;</span><br><span class="line">		&lt;span&gt;该角色未分配权限&lt;/span&gt;</span><br><span class="line">	&lt;/el-col&gt;</span><br><span class="line">&lt;/el-row&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">代码：</span><br><span class="line">&lt;el-table-column type=&quot;expand&quot; width=&quot;100&quot;&gt;</span><br><span class="line">	   &lt;template slot-scope=&apos;scope&apos;&gt;</span><br><span class="line">           &lt;el-row v-for=&apos;(item1,i) in scope.row.children&apos; :key=&apos;i&apos;&gt;</span><br><span class="line">               &lt;el-col :span=&apos;4&apos;&gt;&lt;el-tag closable&gt;&#123;&#123;item1.authName&#125;&#125;&lt;/el-tag&gt;&lt;i class=&apos;el-icon-arrow-right&apos;&gt;&lt;/i&gt;&lt;/el-col&gt;</span><br><span class="line">               &lt;el-col :span=&apos;20&apos;&gt;</span><br><span class="line">                   &lt;el-row v-for=&apos;(item2,i) in item1.children&apos; :key=&apos;i&apos;&gt;</span><br><span class="line">                       &lt;el-col :span=&apos;4&apos;&gt;&lt;el-tag closable&gt;&#123;&#123;item2.authName&#125;&#125;&lt;/el-tag&gt;&lt;i class=&apos;el-icon-arrow-right&apos;&gt;&lt;/i&gt;&lt;/el-col&gt;</span><br><span class="line">                       &lt;el-col :span=&apos;20&apos;&gt;&lt;el-tag closable v-for=&apos;(item3,i) in item2.children&apos; :key=&apos;i&apos;&gt;&#123;&#123;item3.authName&#125;&#125;&lt;/el-tag&gt;&lt;/el-col&gt;</span><br><span class="line">                   &lt;/el-row&gt;</span><br><span class="line">               &lt;/el-col&gt;</span><br><span class="line">           &lt;/el-row&gt;</span><br><span class="line">           &lt;el-row v-if=&apos;v-if=&apos;&apos;scope.row.children.length===0&apos;&gt;</span><br><span class="line">               &lt;el-col&gt;</span><br><span class="line">               		&lt;span&gt;该角色未分配权限&lt;/span&gt;</span><br><span class="line">               &lt;/el-col&gt;</span><br><span class="line">           &lt;/el-row&gt;</span><br><span class="line">	   &lt;/template&gt;</span><br><span class="line">&lt;/el-table-column&gt;</span><br></pre></td></tr></table></figure>
<h3 id="10-3-修改权限-树形结构"><a href="#10-3-修改权限-树形结构" class="headerlink" title="10.3  修改权限-树形结构"></a>10.3  修改权限-树形结构</h3><h4 id="10-3-1-显示对话框"><a href="#10-3-1-显示对话框" class="headerlink" title="10.3.1  显示对话框"></a>10.3.1  显示对话框</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">点击√弹出对话框</span><br><span class="line"> 1.&lt;el-button round plain size=&apos;mini&apos; @click=&apos;showRights()&apos; type=&quot;primary&quot; icon=&quot;el-icon-check&quot;&gt;&lt;/el-button&gt;</span><br><span class="line"> 2.点击√,对话框显示</span><br><span class="line"> data()&#123;</span><br><span class="line">     return &#123;</span><br><span class="line">         roles: [],</span><br><span class="line">         dialogVisible: false</span><br><span class="line">     &#125;</span><br><span class="line">&#125;,</span><br><span class="line">methods: &#123;</span><br><span class="line">    //分配权限</span><br><span class="line">    showRights()&#123;</span><br><span class="line">    	this.dialogVisible = true;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="10-3-1-文档分析"><a href="#10-3-1-文档分析" class="headerlink" title="10.3.1   文档分析"></a>10.3.1   文档分析</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">1.打开对话框的同时,获取所有的权限，并查询当前角色下的所有权限，将有的权限打勾</span><br><span class="line">2.树形控件  tree</span><br><span class="line">3.树形结构</span><br><span class="line">data: 树形结构的数据源</span><br><span class="line">node-key： 每个节点的位移标识  通常是 data中的id值</span><br><span class="line">default-expanded-keys设置默认展开的节点   数组:[id值]</span><br><span class="line">default-checked-keys设置默认选中的节点     数组:[id值]</span><br><span class="line">props 配置选项  = &#123;label,children&#125;</span><br><span class="line">label和children值来源于data数据中的key名</span><br><span class="line">每个节点都有半选和全选:如果子节点全部选中,则节点全选</span><br><span class="line">显示树形结构</span><br><span class="line">&lt;el-dialog</span><br><span class="line">    title=&quot;分配权限&quot;</span><br><span class="line">    :visible.sync=&quot;dialogVisible&quot;</span><br><span class="line">    width=&quot;50%&quot;&gt;</span><br><span class="line">    &lt;el-tree</span><br><span class="line">        default-expand-all</span><br><span class="line">        ref=&apos;tree&apos;</span><br><span class="line">        :data=&quot;treeData&quot;</span><br><span class="line">        show-checkbox</span><br><span class="line">        node-key=&quot;id&quot;</span><br><span class="line">        :default-expanded-keys=&quot;expandedArr&quot;</span><br><span class="line">        :default-checked-keys=&quot;checkedArr&quot;</span><br><span class="line">        :props=&quot;defaultProps&quot;&gt;</span><br><span class="line">    &lt;/el-tree&gt;</span><br><span class="line">    &lt;span slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">        &lt;el-button @click=&quot;dialogVisible = false&quot;&gt;取 消&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; @click=&quot;dialogVisible = false&quot;&gt;确 定&lt;/el-button&gt;</span><br><span class="line">    &lt;/span&gt;</span><br><span class="line">&lt;/el-dialog&gt;</span><br></pre></td></tr></table></figure>
<h4 id="10-3-2-配置数据"><a href="#10-3-2-配置数据" class="headerlink" title="10.3.2  配置数据"></a>10.3.2  配置数据</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">接口:获取树形权限列表</span><br><span class="line">获取所有选项,将所有选项显示在弹出框中,并将所有的id保存在默认展开的数组中</span><br><span class="line">1.注册点击事件</span><br><span class="line">&lt;el-button round plain size=&apos;mini&apos; @click=&apos;showRights(scope.row)&apos; type=&quot;primary&quot; icon=&quot;el-icon-check&quot;&gt;&lt;/el-button&gt;</span><br><span class="line">2.弹出框</span><br><span class="line">&lt;el-tree</span><br><span class="line">	default-expand-all  展开所有节点</span><br><span class="line">    :data=&quot;treeData&quot;</span><br><span class="line">    show-checkbox</span><br><span class="line">    node-key=&quot;id&quot;</span><br><span class="line">    默认展开的权限id</span><br><span class="line">    :default-expanded-keys=&quot;expandedArr&quot;</span><br><span class="line">    默认选中的权限id</span><br><span class="line">    :default-checked-keys=&quot;checkedArr&quot;</span><br><span class="line">    :props=&quot;defaultProps&quot;&gt;</span><br><span class="line">&lt;/el-tree&gt;</span><br><span class="line">3.数据配置</span><br><span class="line">export default &#123;</span><br><span class="line">	data()&#123;</span><br><span class="line">		return &#123;</span><br><span class="line">            roles: [],</span><br><span class="line">            //树形结构配置</span><br><span class="line">            dialogVisible: false,</span><br><span class="line">            //树形结构数据</span><br><span class="line">            treeData: [],</span><br><span class="line">            //默认展开的权限的id</span><br><span class="line">            expandedArr:[],</span><br><span class="line">            //默认选中的权限的id</span><br><span class="line">            checkedArr:[],</span><br><span class="line">            //树形结构配置</span><br><span class="line">            defaultProps: &#123;</span><br><span class="line">                children: &apos;children&apos;,</span><br><span class="line">                label: &apos;authName&apos;</span><br><span class="line">            &#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">    created()&#123;</span><br><span class="line">    	this.getRoles();</span><br><span class="line">    &#125;,</span><br><span class="line">	methods: &#123;</span><br><span class="line">        //分配权限</span><br><span class="line">        async showRights()&#123;</span><br><span class="line">            //显示对话框</span><br><span class="line">            this.dialogVisible = true;</span><br><span class="line">            //获取树形结构的权限数据</span><br><span class="line">            const res = await this.$http.get(`rights/tree`);</span><br><span class="line">            console.log(res);</span><br><span class="line">            this.treeData = res.data.data;</span><br><span class="line">            第一种方法:获取所有权限的id</span><br><span class="line">            //const tempArr = [];</span><br><span class="line">            //this.treeData.forEach(item1 =&gt; &#123;</span><br><span class="line">            //   tempArr.push(item1.id);</span><br><span class="line">            //  item1.children.forEach(item2 =&gt; &#123;</span><br><span class="line">            //      tempArr.push(item2.id);</span><br><span class="line">            //     item2.children.forEach(item3 =&gt; &#123;</span><br><span class="line">            //         tempArr.push(item3.id);</span><br><span class="line">            //     &#125;);</span><br><span class="line">            // &#125;);</span><br><span class="line">            //&#125;);</span><br><span class="line">            //this.expandedArr = tempArr;</span><br><span class="line">            第二种方法: 给标签添加属性  default-expand-all  是否默认展开所有节点</span><br><span class="line">        &#125;,</span><br><span class="line">        //删除权限</span><br><span class="line">        async deleRights(role,rights)&#123;</span><br><span class="line">            const res = await this.$http.delete(`roles/$&#123;role.id&#125;/rights/$&#123;rights.id&#125;`);</span><br><span class="line">            console.log(res);</span><br><span class="line">            this.roles = res.data.data;</span><br><span class="line">        &#125;,</span><br><span class="line">        //渲染权限列表</span><br><span class="line">        async getRoles()&#123;</span><br><span class="line">            const res = await this.$http.get(`roles`);</span><br><span class="line">            console.log(res);</span><br><span class="line">            //this.roles = res.data.data;</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="10-3-3-显示已有权限"><a href="#10-3-3-显示已有权限" class="headerlink" title="10.3.3  显示已有权限"></a>10.3.3  显示已有权限</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">接口:获取所有权限列表</span><br><span class="line">获取当前角色所拥有的权限，将权限保存在默认勾选的数组中</span><br><span class="line">//分配权限</span><br><span class="line">async showRights()&#123;</span><br><span class="line">     //显示对话框</span><br><span class="line">     this.dialogVisible = true;</span><br><span class="line">     //获取树形结构的权限数据</span><br><span class="line">     const res = await this.$http.get(`rights/tree`);</span><br><span class="line">     console.log(res);</span><br><span class="line">     this.treeData = res.data.data;</span><br><span class="line">     //获取当前角色拥有的权限id</span><br><span class="line">	 const tempArr = [];</span><br><span class="line">	 role.children.forEach(item1 =&gt; &#123;</span><br><span class="line">	 	前两个不需要添加,因为只要里面的id选中，外面的id会自动选中</span><br><span class="line">	     //tempArr.push(item1.id);</span><br><span class="line">         item1.children.forEach(item2 =&gt; &#123;</span><br><span class="line">             //tempArr.push(item2.id);</span><br><span class="line">             item2.children.forEach(item3 =&gt; &#123;</span><br><span class="line">             	tempArr.push(item3.id);</span><br><span class="line">             &#125;);</span><br><span class="line">         &#125;);</span><br><span class="line">     &#125;);</span><br><span class="line">     this.checkedArr = tempArr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="10-3-4-分配权限-分析"><a href="#10-3-4-分配权限-分析" class="headerlink" title="10.3.4  分配权限-分析"></a>10.3.4  分配权限-分析</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1.点击确定按钮 -&gt;发送请求     setRights()</span><br><span class="line">2.获取节点中全选的节点的id  </span><br><span class="line">3.获取节点中半选的节点的id   </span><br><span class="line">4.发送请求</span><br><span class="line">	const res = await this.$http.post(`posts/$&#123;this.currRoleId&#125;/rights`,&#123;</span><br><span class="line">        rids:以,分割的权限id的列表</span><br><span class="line">	&#125;);</span><br><span class="line">5.关闭对话框</span><br><span class="line">6.更新表格</span><br></pre></td></tr></table></figure>
<h4 id="10-3-5-分配权限-实现"><a href="#10-3-5-分配权限-实现" class="headerlink" title="10.3.5  分配权限-实现"></a>10.3.5  分配权限-实现</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">接口:角色授权</span><br><span class="line">1.&lt;el-button type=&quot;primary&quot; @click=&quot;setRights()&quot;&gt;确 定&lt;/el-button&gt;&lt;/el-button&gt;</span><br><span class="line">2.&lt;el-tree</span><br><span class="line">    ref=&apos;tree&apos;</span><br><span class="line">    :data=&quot;treeData&quot;</span><br><span class="line">    show-checkbox</span><br><span class="line">    node-key=&quot;id&quot;</span><br><span class="line">    :default-expanded-keys=&quot;expandedArr&quot;</span><br><span class="line">    :default-checked-keys=&quot;checkedArr&quot;</span><br><span class="line">    :props=&quot;defaultProps&quot;&gt;</span><br><span class="line">&lt;/el-tree&gt;</span><br><span class="line">3.&lt;script&gt;</span><br><span class="line">	export default &#123;</span><br><span class="line">		data()&#123;</span><br><span class="line">			return &#123;</span><br><span class="line">				roles: [],</span><br><span class="line">				//树形结构配置</span><br><span class="line">				dialogVisible: false,</span><br><span class="line">				//树形结构</span><br><span class="line">				treeData: [],</span><br><span class="line">				//默认展开的权限的id</span><br><span class="line">				expandedArr:[],</span><br><span class="line">				//默认选中的权限的id</span><br><span class="line">				checkedArr:[],</span><br><span class="line">				//树形结构配置</span><br><span class="line">				defaultProps: &#123;</span><br><span class="line">		          children: &apos;children&apos;,</span><br><span class="line">		          label: &apos;authName&apos;</span><br><span class="line">		        &#125;,</span><br><span class="line">		        currRoleId:&apos;&apos;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		created()&#123;</span><br><span class="line">			this.getRoles();</span><br><span class="line">		&#125;,</span><br><span class="line">		methods: &#123;</span><br><span class="line">			//点击确定按钮分配权限</span><br><span class="line">			async setRights()&#123;</span><br><span class="line">				//通过tree树形结构的方法自动获取id     通过获取元素来操作方法   vue中通过ref来操作DOM元素</span><br><span class="line">				//1.获取节点中全选的节点的id  </span><br><span class="line">				//2.获取节点中半选的节点的id   </span><br><span class="line">				const arr1 = this.$refs.tree.getCheckedKeys();</span><br><span class="line">				const arr2 = this.$refs.tree.getHalfCheckedKeys();</span><br><span class="line">				//以,分割的权限id的列表   或者通过数组的方法 arr1.concat(arr2)</span><br><span class="line">				const arr = [...arr1,...arr2];</span><br><span class="line">				//3.发送请求</span><br><span class="line">					//const res = await this.$http.post(`posts/$&#123;this.currRoleId&#125;/rights`,&#123;</span><br><span class="line">				    //    rids:以,分割的权限id的列表</span><br><span class="line">					//&#125;);</span><br><span class="line">					const res = await this.$http.post(`posts/$&#123;this.currRoleId&#125;/rights`,&#123;</span><br><span class="line">				        rids:arr.join(&apos;,&apos;)</span><br><span class="line">					&#125;);</span><br><span class="line">					console.log(res);</span><br><span class="line">				//4.关闭对话框</span><br><span class="line">				this.dialogVisible = false;</span><br><span class="line">				//5.更新表格</span><br><span class="line">				this.getRoles();</span><br><span class="line">			&#125;,</span><br><span class="line">			//分配权限</span><br><span class="line">			async showRights(role)&#123;</span><br><span class="line">				//获取当前角色的id</span><br><span class="line">				this.currRoleId = role.id;</span><br><span class="line">				//显示对话框</span><br><span class="line">				this.dialogVisible = true;</span><br><span class="line">				//获取树形结构的权限数据</span><br><span class="line">				const res = await this.$http.get(`rights/tree`);</span><br><span class="line">				console.log(res);</span><br><span class="line">				this.treeData = res.data.data;</span><br><span class="line">			&#125;,</span><br><span class="line">			//删除权限</span><br><span class="line">			async deleRights(role,rights)&#123;</span><br><span class="line">				const res = await this.$http.delete(`roles/$&#123;role.id&#125;/rights/$&#123;rights.id&#125;`);</span><br><span class="line">				console.log(res);</span><br><span class="line">				this.roles = res.data.data;</span><br><span class="line">	            //获取当前角色拥有的权限id</span><br><span class="line">	            const tempArr = [];</span><br><span class="line">	            role.children.forEach(item1 =&gt; &#123;</span><br><span class="line">	                //tempArr.push(item1.id);</span><br><span class="line">	                item1.children.treeData.forEach(item2 =&gt; &#123;</span><br><span class="line">	                   // tempArr.push(item2.id);</span><br><span class="line">	                    item2.children.treeData.forEach(item3 =&gt; &#123;</span><br><span class="line">	                        tempArr.push(item3.id);</span><br><span class="line">	                    &#125;);</span><br><span class="line">	                &#125;);</span><br><span class="line">	            &#125;);</span><br><span class="line">	            this.checkedArr = tempArr;</span><br><span class="line">			&#125;,</span><br><span class="line">			//渲染权限列表</span><br><span class="line">			async getRoles()&#123;</span><br><span class="line">				const res = await this.$http.get(`roles`);</span><br><span class="line">				console.log(res);</span><br><span class="line">				//this.roles = res.data.data;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/scpript&gt;</span><br></pre></td></tr></table></figure>
<h2 id="11-首页-侧边栏-动态导航"><a href="#11-首页-侧边栏-动态导航" class="headerlink" title="11.  首页-侧边栏-动态导航"></a>11.  首页-侧边栏-动态导航</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">1.&lt;el-submenu  v-for=&quot;(item1,i) in menus&quot; :index=&quot;&apos;&apos;+item1.order&quot; :key=&apos;item1.id&apos;&gt;</span><br><span class="line">    &lt;template slot=&quot;title&quot;&gt; </span><br><span class="line">        &lt;i class=&quot;el-icon-location&quot;&gt;&lt;/i&gt;</span><br><span class="line">        &lt;span&gt;&#123;&#123;item1.authName&#125;&#125;&lt;/span&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;el-menu-item :index=&quot;item2.path&quot; v-for=&apos;(item2,i) in item1.children&apos;  :key=&apos;item2.id&apos;&gt;</span><br><span class="line">    	&lt;i class=&quot;el-icon-document&quot;&gt;&lt;/i&gt;&#123;&#123;item2.authName&#125;&#125;</span><br><span class="line">    &lt;/el-menu-item&gt; </span><br><span class="line">&lt;/el-submenu&gt;</span><br><span class="line">2.data()&#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      menus: []</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created()&#123;</span><br><span class="line">    this.getMenus();</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeCreate()&#123;</span><br><span class="line">    if(!window.localStorage.getItem(&apos;token&apos;))&#123;</span><br><span class="line">      this.$message.warning(&apos;请先登录&apos;);</span><br><span class="line">      this.$router.push(&#123;</span><br><span class="line">        name: &apos;login&apos;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    //侧边栏-动态导航</span><br><span class="line">    async getMenus()&#123;</span><br><span class="line">      const res = await this.$http.get(`menus`);</span><br><span class="line">      console.log(res);</span><br><span class="line">      this.menus = res.data.data;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="12-导航守卫-路由拦截器"><a href="#12-导航守卫-路由拦截器" class="headerlink" title="12.  导航守卫-路由拦截器"></a>12.  导航守卫-路由拦截器</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">在home渲染之前,判断是否登录</span><br><span class="line">在路由配置生效之前,判断是否登录</span><br><span class="line">在每个标识生效之前，判断是不是登录标识,如果是则继续,如果不是,判断有没有token,则跳转到登录页面</span><br><span class="line">全局守卫:</span><br><span class="line">//导航守卫</span><br><span class="line">router.beforeEach((to,from,next) =&gt; &#123;</span><br><span class="line">    if(to.name === &apos;login&apos;)&#123;</span><br><span class="line">      next();</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">      if(!window.localStorage.getItem(&apos;token&apos;))&#123;</span><br><span class="line">      	提示消息</span><br><span class="line">        Message.warning(&apos;请先登录&apos;);</span><br><span class="line">        router.push(&#123;</span><br><span class="line">          name: &apos;login&apos;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;else&#123;</span><br><span class="line">        next();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">export default router;</span><br></pre></td></tr></table></figure>
<h2 id="13-商品管理"><a href="#13-商品管理" class="headerlink" title="13.   商品管理"></a>13.   商品管理</h2><h3 id="13-1-添加商品-步骤条"><a href="#13-1-添加商品-步骤条" class="headerlink" title="13.1  添加商品-步骤条"></a>13.1  添加商品-步骤条</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.添加提示框</span><br><span class="line">2.添加步骤条</span><br></pre></td></tr></table></figure>
<p><code>goodslist.vue</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;el-card&gt;</span><br><span class="line">  		&lt;el-breadcrumb separator-class=&quot;el-icon-arrow-right&quot;&gt;</span><br><span class="line">	        &lt;el-breadcrumb-item :to=&quot;&#123; path: &apos;/&apos; &#125;&quot;&gt;首页&lt;/el-breadcrumb-item&gt;</span><br><span class="line">	        &lt;el-breadcrumb-item&gt;商品管理&lt;/el-breadcrumb-item&gt;</span><br><span class="line">	        &lt;el-breadcrumb-item&gt;商品列表&lt;/el-breadcrumb-item&gt;</span><br><span class="line">      	&lt;/el-breadcrumb&gt;</span><br><span class="line">      	&lt;el-row class=&apos;info&apos;&gt;</span><br><span class="line">      		&lt;el-col&gt;</span><br><span class="line">      			&lt;el-alert title=&quot;添加商品信息&quot; type=&quot;info&quot; center show-icon :closable=&quot;false&quot;&gt;&lt;/el-alert&gt;</span><br><span class="line">      		&lt;/el-col&gt;</span><br><span class="line">      	&lt;/el-row&gt;</span><br><span class="line">      	&lt;el-steps :active=&quot;1&quot;&gt;</span><br><span class="line">		  &lt;el-step title=&quot;步骤 1&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">		  &lt;el-step title=&quot;步骤 2&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">		  &lt;el-step title=&quot;步骤 3&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">		  &lt;el-step title=&quot;步骤 4&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">		  &lt;el-step title=&quot;步骤 5&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">		&lt;/el-steps&gt;</span><br><span class="line">	&lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">	export default &#123;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/scpript&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h3 id="13-2-添加商品-tabs标签"><a href="#13-2-添加商品-tabs标签" class="headerlink" title="13.2   添加商品-tabs标签"></a>13.2   添加商品-tabs标签</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">当选中的是下面哪个el-tab-pane时,v-model值是当前选中的name值</span><br><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;el-card&gt;</span><br><span class="line">  		&lt;el-breadcrumb separator-class=&quot;el-icon-arrow-right&quot;&gt;</span><br><span class="line">	        &lt;el-breadcrumb-item :to=&quot;&#123; path: &apos;/&apos; &#125;&quot;&gt;首页&lt;/el-breadcrumb-item&gt;</span><br><span class="line">	        &lt;el-breadcrumb-item&gt;商品管理&lt;/el-breadcrumb-item&gt;</span><br><span class="line">	        &lt;el-breadcrumb-item&gt;商品列表&lt;/el-breadcrumb-item&gt;</span><br><span class="line">      	&lt;/el-breadcrumb&gt;</span><br><span class="line">      	&lt;el-row class=&apos;info&apos;&gt;</span><br><span class="line">      		&lt;el-col&gt;</span><br><span class="line">      			&lt;el-alert title=&quot;添加商品信息&quot; type=&quot;info&quot; center show-icon :closable=&quot;false&quot;&gt;&lt;/el-alert&gt;</span><br><span class="line">      		&lt;/el-col&gt;</span><br><span class="line">      	&lt;/el-row&gt;</span><br><span class="line">		&lt;el-steps :active=&quot;1*active&quot;&gt;</span><br><span class="line">			&lt;el-step title=&quot;基本信息&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">			&lt;el-step title=&quot;商品参数&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">			&lt;el-step title=&quot;商品属性&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">			&lt;el-step title=&quot;商品图片&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">			&lt;el-step title=&quot;商品内容&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">		&lt;/el-steps&gt;</span><br><span class="line">      	&#123;&#123;active&#125;&#125;</span><br><span class="line">		&lt;el-tabs v-model=&quot;active&quot; tab-position=&quot;left&quot; style=&quot;height: 350px&quot; class=&apos;tabs&apos;&gt;</span><br><span class="line">		    &lt;el-tab-pane name=&apos;1&apos; label=&quot;基本信息&quot;&gt;基本信息&lt;/el-tab-pane&gt;</span><br><span class="line">		    &lt;el-tab-pane name=&apos;2&apos; label=&quot;商品参数&quot;&gt;商品参数&lt;/el-tab-pane&gt;</span><br><span class="line">		    &lt;el-tab-pane name=&apos;3&apos; label=&quot;商品属性&quot;&gt;商品属性&lt;/el-tab-pane&gt;</span><br><span class="line">		    &lt;el-tab-pane name=&apos;4&apos; label=&quot;商品图片&quot;&gt;商品图片&lt;/el-tab-pane&gt;</span><br><span class="line">		    &lt;el-tab-pane name=&apos;5&apos; label=&quot;商品内容&quot;&gt;商品内容&lt;/el-tab-pane&gt;</span><br><span class="line">  		&lt;/el-tabs&gt;</span><br><span class="line">	&lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">	export default &#123;</span><br><span class="line">		data()&#123;</span><br><span class="line">			return &#123;</span><br><span class="line">				active: &quot;1&quot;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h3 id="13-3-添加商品基本信息-绑定表单数据"><a href="#13-3-添加商品基本信息-绑定表单数据" class="headerlink" title="13.3  添加商品基本信息-绑定表单数据"></a>13.3  添加商品基本信息-绑定表单数据</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">接口:添加商品</span><br><span class="line">因为添加商品,最后是要提交数据的，所以添加一个表单</span><br><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;el-card&gt;</span><br><span class="line">		&lt;my-bread level1=&apos;商品管理&apos; level2=&apos;商品列表&apos;&gt;&lt;/my-bread&gt;</span><br><span class="line">      	&lt;el-row class=&apos;info&apos;&gt;</span><br><span class="line">      		&lt;el-col&gt;</span><br><span class="line">      			&lt;el-alert title=&quot;添加商品信息&quot; type=&quot;info&quot; center show-icon :closable=&quot;false&quot;&gt;&lt;/el-alert&gt;</span><br><span class="line">      		&lt;/el-col&gt;</span><br><span class="line">      	&lt;/el-row&gt;</span><br><span class="line">		&lt;el-steps :active=&quot;1*active&quot;&gt;</span><br><span class="line">			&lt;el-step title=&quot;基本信息&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">			&lt;el-step title=&quot;商品参数&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">			&lt;el-step title=&quot;商品属性&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">			&lt;el-step title=&quot;商品图片&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">			&lt;el-step title=&quot;商品内容&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">		&lt;/el-steps&gt;</span><br><span class="line">		添加表单：</span><br><span class="line">		&lt;el-form v-model=&apos;form&apos; height=&apos;400px&apos; class=&apos;form&apos;&gt;</span><br><span class="line">			&lt;el-tabs v-model=&quot;active&quot; tab-position=&quot;left&quot; style=&quot;height: 500px&quot; class=&apos;tabs&apos;&gt;</span><br><span class="line">				添加表单数据</span><br><span class="line">				&lt;el-tab-pane name=&apos;1&apos; label=&quot;基本信息&quot;&gt;</span><br><span class="line">					&lt;el-form-item label=&quot;商品名称&quot;&gt;</span><br><span class="line">						&lt;el-input v-model=&quot;form.goods_name&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">					&lt;/el-form-item&gt;</span><br><span class="line">					&lt;el-form-item label=&quot;商品价格&quot;&gt;</span><br><span class="line">						&lt;el-input v-model=&quot;form.goods_cat&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">					&lt;/el-form-item&gt;</span><br><span class="line">					&lt;el-form-item label=&quot;商品重量&quot;&gt;</span><br><span class="line">						&lt;el-input v-model=&quot;form.goods_price&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">					&lt;/el-form-item&gt;</span><br><span class="line">					&lt;el-form-item label=&quot;商品数量&quot;&gt;</span><br><span class="line">						&lt;el-input v-model=&quot;form.goods_number&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">					&lt;/el-form-item&gt;</span><br><span class="line">					&lt;el-form-item label=&quot;商品分类&quot;&gt;</span><br><span class="line">						...级联选择器</span><br><span class="line">					&lt;/el-form-item&gt;</span><br><span class="line">				&lt;/el-tab-pane&gt;</span><br><span class="line">				&lt;el-tab-pane name=&apos;2&apos; label=&quot;商品参数&quot;&gt;商品参数&lt;/el-tab-pane&gt;</span><br><span class="line">				&lt;el-tab-pane name=&apos;3&apos; label=&quot;商品属性&quot;&gt;商品属性&lt;/el-tab-pane&gt;</span><br><span class="line">				&lt;el-tab-pane name=&apos;4&apos; label=&quot;商品图片&quot;&gt;商品图片&lt;/el-tab-pane&gt;</span><br><span class="line">				&lt;el-tab-pane name=&apos;5&apos; label=&quot;商品内容&quot;&gt;商品内容&lt;/el-tab-pane&gt;</span><br><span class="line">			&lt;/el-tabs&gt;</span><br><span class="line">		&lt;/el-form&gt;</span><br><span class="line">	&lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">	export default &#123;</span><br><span class="line">		data()&#123;</span><br><span class="line">			return &#123;</span><br><span class="line">				active: &quot;1&quot;,</span><br><span class="line">				数据名来源于接口数据</span><br><span class="line">				form: &#123;</span><br><span class="line">					goods_name: &apos;&apos;,</span><br><span class="line">					goods_cat: &apos;&apos;,</span><br><span class="line">					goods_price: &apos;&apos;,</span><br><span class="line">					goods_number: &apos;&apos;,</span><br><span class="line">					goods_weight: &apos;&apos;,</span><br><span class="line">					goods_introduce: &apos;&apos;,</span><br><span class="line">					pics: &apos;&apos;,</span><br><span class="line">					attrs: &apos;&apos;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br></pre></td></tr></table></figure>
<h3 id="13-4-级联选择器"><a href="#13-4-级联选择器" class="headerlink" title="13.4  级联选择器"></a>13.4  级联选择器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">接口:商品数据列表</span><br><span class="line">1.&lt;!--级联选择器 表单元素</span><br><span class="line">        options： 绑定数据</span><br><span class="line">        v-model绑定的是一个数组:被选中的label的value值</span><br><span class="line">        props=&#123;label/children/value&#125;配置选项</span><br><span class="line">        值来源是options绑定的数据的key名</span><br><span class="line">        @change选择发生改变时会触发--&gt;</span><br><span class="line">&lt;el-form-item label=&quot;商品分类&quot;&gt;</span><br><span class="line">    &lt;el-cascader</span><br><span class="line">        clearable</span><br><span class="line">        expand-trigger=&quot;hover&quot;</span><br><span class="line">        :options=&quot;options&quot;</span><br><span class="line">        v-model=&quot;selectedOptions2&quot;</span><br><span class="line">        :props = &quot;defaultProp&quot;</span><br><span class="line">        @change=&quot;handleChange&quot;&gt;</span><br><span class="line">    &lt;/el-cascader&gt;</span><br><span class="line">&lt;/el-form-item&gt;</span><br><span class="line">2.export default &#123;</span><br><span class="line">		data()&#123;</span><br><span class="line">			return &#123;</span><br><span class="line">				active: &quot;1&quot;,</span><br><span class="line">				form: &#123;</span><br><span class="line">					goods_name: &apos;&apos;,</span><br><span class="line">					goods_cat: &apos;&apos;,</span><br><span class="line">					goods_price: &apos;&apos;,</span><br><span class="line">					goods_number: &apos;&apos;,</span><br><span class="line">					goods_weight: &apos;&apos;,</span><br><span class="line">					goods_introduce: &apos;&apos;,</span><br><span class="line">					pics: &apos;&apos;,</span><br><span class="line">					attrs: &apos;&apos;</span><br><span class="line">				&#125;,</span><br><span class="line">				//级联数据要使用的数据</span><br><span class="line">				options: &apos;&apos;,</span><br><span class="line">				selectedOptions2: [],</span><br><span class="line">				defaultProp: &#123;</span><br><span class="line">					label: &apos;cat_name&apos;,</span><br><span class="line">					value: &apos;cat_id&apos;,</span><br><span class="line">					children: &apos;children&apos;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		mounted()&#123;</span><br><span class="line">			this.getGoodsCate();</span><br><span class="line">		&#125;,</span><br><span class="line">		methods:&#123;</span><br><span class="line">			//级联选择器中内容改变时触发</span><br><span class="line">			handleChange()&#123;</span><br><span class="line"></span><br><span class="line">			&#125;,</span><br><span class="line">			//获取商品数据列表 级联数据</span><br><span class="line">			async getGoodsCate()&#123;</span><br><span class="line">				const res = await this.$http.get(`categories?type=3`);</span><br><span class="line">				//console.log(res);</span><br><span class="line">				this.options = res.data.data;</span><br><span class="line">				console.log(this.options);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h3 id="13-5-商品参数-获取动态参数数据"><a href="#13-5-商品参数-获取动态参数数据" class="headerlink" title="13.5  商品参数-获取动态参数数据"></a>13.5  商品参数-获取动态参数数据</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">接口:分类参数管理-参数列表</span><br><span class="line">如果要获取动态参数，必须选择商品的三级分类</span><br><span class="line">1.&lt;el-form label-position=&apos;top&apos; v-model=&apos;form&apos; height=&apos;400px&apos; class=&apos;form&apos;&gt;</span><br><span class="line">	第一:给tab注册tab 被选中时触发 的事件  tab-click 来检测是不是第二个tab栏被选中</span><br><span class="line">	&lt;el-tabs v-model=&quot;active&quot; @tab-click = &apos;changeTab()&apos; tab-position=&quot;left&quot; style=&quot;height: 550px&quot; class=&apos;tabs&apos;&gt;</span><br><span class="line">        &lt;el-tab-pane name=&apos;1&apos; label=&quot;基本信息&quot;&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;商品名称&quot;&gt;</span><br><span class="line">            	&lt;el-input v-model=&quot;form.goods_name&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;商品价格&quot;&gt;</span><br><span class="line">            	&lt;el-input v-model=&quot;form.goods_cat&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;商品重量&quot;&gt;</span><br><span class="line">            	&lt;el-input v-model=&quot;form.goods_price&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;商品数量&quot;&gt;</span><br><span class="line">            	&lt;el-input v-model=&quot;form.goods_number&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;商品分类&quot;&gt;</span><br><span class="line">                &lt;el-cascader</span><br><span class="line">                    clearable</span><br><span class="line">                    expand-trigger=&quot;hover&quot;</span><br><span class="line">                    :options=&quot;options&quot;</span><br><span class="line">                    v-model=&quot;selectedOptions2&quot;</span><br><span class="line">                    :props = &quot;defaultProp&quot;</span><br><span class="line">                    @change=&quot;handleChange&quot;&gt;</span><br><span class="line">                &lt;/el-cascader&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">        &lt;/el-tab-pane&gt;</span><br><span class="line">        &lt;el-tab-pane name=&apos;2&apos; label=&quot;商品参数&quot;&gt;商品参数&lt;/el-tab-pane&gt;</span><br><span class="line">        &lt;el-tab-pane name=&apos;3&apos; label=&quot;商品属性&quot;&gt;商品属性&lt;/el-tab-pane&gt;</span><br><span class="line">        &lt;el-tab-pane name=&apos;4&apos; label=&quot;商品图片&quot;&gt;商品图片&lt;/el-tab-pane&gt;</span><br><span class="line">        &lt;el-tab-pane name=&apos;5&apos; label=&quot;商品内容&quot;&gt;商品内容&lt;/el-tab-pane&gt;</span><br><span class="line">	&lt;/el-tabs&gt;</span><br><span class="line">&lt;/el-form&gt;</span><br><span class="line">2.tab栏被选中</span><br><span class="line">//当tab栏选中切换时</span><br><span class="line">async changeTab()&#123;</span><br><span class="line">    // 判断当前是不是商品参数这一项,如果是的话，判断有没有选中三级分类，有则获取动态商品参数</span><br><span class="line">    //当选中哪一项,v-model的值就是该name的值</span><br><span class="line">    if(this.active === &apos;2&apos;)&#123;</span><br><span class="line">        if(this.selectedOptions2.length === 3)&#123;</span><br><span class="line">        	$&#123;this.selectedOptions2[2]&#125;:当前选中的三级分类的id</span><br><span class="line">            const res = await this.$http.get(`categories/$&#123;this.selectedOptions2[2]&#125;/attributes?sel=many`);</span><br><span class="line">            console.log(res);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            this.$message.warning(&apos;请选择完整的三级分类&apos;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="13-6-商品参数-复选框组"><a href="#13-6-商品参数-复选框组" class="headerlink" title="13.6   商品参数-复选框组"></a>13.6   商品参数-复选框组</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">1.使用组件</span><br><span class="line">复选框  是表单元素 所以需要外层需要使用el-for-item</span><br><span class="line">&lt;el-tab-pane name=&apos;2&apos; label=&quot;商品参数&quot;&gt;</span><br><span class="line">    &lt;el-form-item v-for=&apos;(item1,i) in arrDy&apos; :key=&apos;item1.attr_id&apos; :label=&quot;item1.attr_name&quot;&gt;</span><br><span class="line">        &lt;el-checkbox-group v-model=&quot;checkList&quot;&gt;</span><br><span class="line">        	&lt;el-checkbox v-for=&apos;(item2,i) in item1.attr_vals&apos; :key=&apos;i&apos; :label=&quot;item2&quot;&gt;&lt;/el-checkbox&gt;</span><br><span class="line">        &lt;/el-checkbox-group&gt;</span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">&lt;/el-tab-pane&gt;</span><br><span class="line">2.export default &#123;</span><br><span class="line">		data()&#123;</span><br><span class="line">			return &#123;</span><br><span class="line">				active: &quot;1&quot;,</span><br><span class="line">				form: &#123;</span><br><span class="line">					goods_name: &apos;&apos;,</span><br><span class="line">					goods_cat: &apos;&apos;,</span><br><span class="line">					goods_price: &apos;&apos;,</span><br><span class="line">					goods_number: &apos;&apos;,</span><br><span class="line">					goods_weight: &apos;&apos;,</span><br><span class="line">					goods_introduce: &apos;&apos;,</span><br><span class="line">					pics: &apos;&apos;,</span><br><span class="line">					attrs: &apos;&apos;</span><br><span class="line">				&#125;,</span><br><span class="line">				//级联数据要使用的数据</span><br><span class="line">				options: [],</span><br><span class="line">				selectedOptions2: [1,3,6],</span><br><span class="line">				defaultProp: &#123;</span><br><span class="line">					label: &apos;cat_name&apos;,</span><br><span class="line">					value: &apos;cat_id&apos;,</span><br><span class="line">					children: &apos;children&apos;</span><br><span class="line">				&#125;,</span><br><span class="line">				//复选框组数据</span><br><span class="line">				checkList: [],</span><br><span class="line">				//动态参数数组</span><br><span class="line">				arrDy: []</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		mounted()&#123;</span><br><span class="line">			this.getGoodsCate();</span><br><span class="line">		&#125;,</span><br><span class="line">		methods:&#123;</span><br><span class="line">			//当tab栏选中切换时</span><br><span class="line">			async changeTab()&#123;</span><br><span class="line">				// 判断当前是不是商品参数这一项,如果是的话，判断有没有选中三级分类，有则获取动态商品参数</span><br><span class="line">				//当选中哪一项,v-model的值就是该name的值</span><br><span class="line">				if(this.active === &apos;2&apos;)&#123;</span><br><span class="line">					if(this.selectedOptions2.length === 3)&#123;</span><br><span class="line">						const res = await this.$http.get(`categories/$&#123;this.selectedOptions2[2]&#125;/attributes?sel=many`);</span><br><span class="line">						console.log(res);</span><br><span class="line">						this.arrDy = res.data.data;</span><br><span class="line">						因为获取参数值中attr-vals的值是字符串所以必须先转为数组</span><br><span class="line">						判断如果输入的是空格|空字符串的可能,如果是空字符串,则返回空数组</span><br><span class="line">						也要考虑中间有空格的情况</span><br><span class="line">						this.arrDy.forEach(item =&gt; &#123;</span><br><span class="line">							item.attr_vals = item.attr_vals.trim().length === 0 ? [] : item.attr_vals.trim().split(&apos;,&apos;);</span><br><span class="line">						&#125;);</span><br><span class="line">					&#125;else&#123;</span><br><span class="line">						this.$message.warning(&apos;请选择完整的三级分类&apos;);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;,</span><br><span class="line">			//级联选择器中内容改变时触发</span><br><span class="line">			handleChange()&#123;</span><br><span class="line"></span><br><span class="line">			&#125;,</span><br><span class="line">			//获取商品数据列表 级联数据</span><br><span class="line">			async getGoodsCate()&#123;</span><br><span class="line">				const res = await this.$http.get(`categories?type=3`);</span><br><span class="line">				//console.log(res);</span><br><span class="line">				this.options = res.data.data;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h3 id="13-7-图片上传-文档"><a href="#13-7-图片上传-文档" class="headerlink" title="13.7  图片上传-文档"></a>13.7  图片上传-文档</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Upload上传</span><br><span class="line">&lt;el-tab-pane name=&apos;4&apos; label=&quot;商品图片&quot;&gt;</span><br><span class="line">    &lt;!-- action：图片上传的地址</span><br><span class="line">    :on-remove:  移除图片触发的函数 </span><br><span class="line">    list-type: picture   图片以列表缩略图显示--&gt;</span><br><span class="line">    &lt;el-upload</span><br><span class="line">        action=&quot;https://jsonplaceholder.typicode.com/posts/&quot;</span><br><span class="line">        :on-remove=&quot;handleRemove&quot;</span><br><span class="line">        list-type=&quot;picture&quot;&gt;</span><br><span class="line">        &lt;el-button size=&quot;small&quot; type=&quot;primary&quot;&gt;点击上传&lt;/el-button&gt;</span><br><span class="line">        &lt;div slot=&quot;tip&quot; class=&quot;el-upload__tip&quot;&gt;只能上传jpg/png文件，且不超过500kb&lt;/div&gt;</span><br><span class="line">    &lt;/el-upload&gt;</span><br><span class="line">&lt;/el-tab-pane&gt;</span><br></pre></td></tr></table></figure>
<h3 id="13-8-图片上传-配置属性"><a href="#13-8-图片上传-配置属性" class="headerlink" title="13.8  图片上传-配置属性"></a>13.8  图片上传-配置属性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">接口:图片上传</span><br><span class="line">请求路径中需要添加前缀:因为设置的baseUrl只是针对axios请求的,而上传图片不针对axios</span><br><span class="line">1.&lt;el-tab-pane name=&apos;4&apos; label=&quot;商品图片&quot;&gt;</span><br><span class="line">        &lt;!-- action：图片上传的地址</span><br><span class="line">        :on-remove:  移除图片触发的函数 </span><br><span class="line">        list-type: picture   图片以列表缩略图显示--&gt;</span><br><span class="line">    &lt;el-upload</span><br><span class="line">    	图片请求地址</span><br><span class="line">        action=&quot;http://localhost:8888/api/private/v1/upload&quot;</span><br><span class="line">        :on-remove=&quot;handleRemove&quot;</span><br><span class="line">        :on-success=&quot;handleSuccess&quot;</span><br><span class="line">        list-type=&quot;picture&quot;&gt;</span><br><span class="line">        &lt;el-button size=&quot;small&quot; type=&quot;primary&quot;&gt;点击上传&lt;/el-button&gt;</span><br><span class="line">        &lt;div slot=&quot;tip&quot; class=&quot;el-upload__tip&quot;&gt;只能上传jpg/png文件，且不超过500kb&lt;/div&gt;</span><br><span class="line">    &lt;/el-upload&gt;</span><br><span class="line">&lt;/el-tab-pane&gt;</span><br><span class="line">2.</span><br><span class="line">data()&#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">//上传文件的函数</span><br><span class="line">handleRemove(file)&#123;</span><br><span class="line">    console.log(&apos;移除成功&apos;);</span><br><span class="line">    console.log(file);</span><br><span class="line">&#125;,</span><br><span class="line">handleSuccess(response)&#123;</span><br><span class="line">    console.log(&apos;上传成功&apos;);</span><br><span class="line">    console.log(response);</span><br><span class="line">    图片存储服务器临时路径里面</span><br><span class="line">    response.data.tmp_path</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="14-3-商品内容-富文本编辑器"><a href="#14-3-商品内容-富文本编辑器" class="headerlink" title="14.3  商品内容-富文本编辑器"></a>14.3  商品内容-富文本编辑器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/surmon-china/vue-quill-editor</span><br><span class="line">vue资源: 富文本编辑器  Rich Text Editing</span><br><span class="line">1.安装: npm install vue-quill-editor --save</span><br><span class="line">2.引入:</span><br><span class="line">	局部引入</span><br><span class="line">	import &apos;quill/dist/quill.core.css&apos;</span><br><span class="line">	import &apos;quill/dist/quill.snow.css&apos;</span><br><span class="line">	import &apos;quill/dist/quill.bubble.css&apos;</span><br><span class="line">	import &#123; quillEditor &#125; from &apos;vue-quill-editor&apos;</span><br><span class="line">	export default &#123;</span><br><span class="line">		//富文本编辑器</span><br><span class="line">		components: &#123;</span><br><span class="line">			quillEditor</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">3.在template中使用</span><br><span class="line">&lt;quill-editor&gt;&lt;/quill-editor&gt;</span><br></pre></td></tr></table></figure>
<p><code>goodsadd.vue</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;el-card&gt;</span><br><span class="line">		&lt;my-bread level1=&apos;商品管理&apos; level2=&apos;商品列表&apos;&gt;&lt;/my-bread&gt;</span><br><span class="line">      	&lt;el-row class=&apos;info&apos;&gt;</span><br><span class="line">      		&lt;el-col&gt;</span><br><span class="line">      			&lt;el-alert title=&quot;添加商品信息&quot; type=&quot;info&quot; center show-icon :closable=&quot;false&quot;&gt;&lt;/el-alert&gt;</span><br><span class="line">      		&lt;/el-col&gt;</span><br><span class="line">      	&lt;/el-row&gt;</span><br><span class="line">		&lt;el-steps :active=&quot;1*active&quot;&gt;</span><br><span class="line">			&lt;el-step title=&quot;基本信息&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">			&lt;el-step title=&quot;商品参数&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">			&lt;el-step title=&quot;商品属性&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">			&lt;el-step title=&quot;商品图片&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">			&lt;el-step title=&quot;商品内容&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">		&lt;/el-steps&gt;</span><br><span class="line">		&lt;el-form label-position=&apos;top&apos; v-model=&apos;form&apos; height=&apos;400px&apos; class=&apos;form&apos;&gt;</span><br><span class="line">			&lt;el-tabs v-model=&quot;active&quot; @tab-click = &apos;changeTab()&apos; tab-position=&quot;left&quot; style=&quot;height: 550px&quot; class=&apos;tabs&apos;&gt;</span><br><span class="line">				&lt;el-tab-pane name=&apos;1&apos; label=&quot;基本信息&quot;&gt;</span><br><span class="line">					&lt;el-form-item label=&quot;商品名称&quot;&gt;</span><br><span class="line">						&lt;el-input v-model=&quot;form.goods_name&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">					&lt;/el-form-item&gt;</span><br><span class="line">					&lt;el-form-item label=&quot;商品价格&quot;&gt;</span><br><span class="line">						&lt;el-input v-model=&quot;form.goods_price&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">					&lt;/el-form-item&gt;</span><br><span class="line">					&lt;el-form-item label=&quot;商品重量&quot;&gt;</span><br><span class="line">						&lt;el-input v-model=&quot;form.goods_weight&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">					&lt;/el-form-item&gt;</span><br><span class="line">					&lt;el-form-item label=&quot;商品数量&quot;&gt;</span><br><span class="line">						&lt;el-input v-model=&quot;form.goods_number&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">					&lt;/el-form-item&gt;</span><br><span class="line">					&lt;el-form-item label=&quot;商品分类&quot;&gt;</span><br><span class="line">						&lt;el-cascader</span><br><span class="line">							clearable</span><br><span class="line">							expand-trigger=&quot;hover&quot;</span><br><span class="line">							:options=&quot;options&quot;</span><br><span class="line">							v-model=&quot;selectedOptions2&quot;</span><br><span class="line">							:props = &quot;defaultProp&quot;</span><br><span class="line">							@change=&quot;handleChange&quot;&gt;</span><br><span class="line">						&lt;/el-cascader&gt;</span><br><span class="line">					&lt;/el-form-item&gt;</span><br><span class="line">				&lt;/el-tab-pane&gt;</span><br><span class="line">				&lt;el-tab-pane name=&apos;2&apos; label=&quot;商品参数&quot;&gt;</span><br><span class="line">					&lt;el-form-item v-for=&apos;(item1,i) in arrDy&apos; :key=&apos;item1.attr_id&apos; :label=&quot;item1.attr_name&quot;&gt;</span><br><span class="line">						&lt;!-- v-model控制的是全部选中的元素 --&gt;</span><br><span class="line">						&lt;el-checkbox-group v-model=&quot;item1.attr_vals&quot;&gt;</span><br><span class="line">							&lt;el-checkbox v-for=&apos;(item2,i) in item1.attr_vals&apos; :key=&apos;i&apos; :label=&quot;item2&quot; border&gt;&lt;/el-checkbox&gt;</span><br><span class="line">						&lt;/el-checkbox-group&gt;</span><br><span class="line">					&lt;/el-form-item&gt;</span><br><span class="line">				&lt;/el-tab-pane&gt;</span><br><span class="line">				&lt;el-tab-pane name=&apos;3&apos; label=&quot;商品属性&quot;&gt;</span><br><span class="line">					&lt;el-form-item :label=&quot;item.attr_name&quot; v-for=&apos;(item,i) in arrStatic&apos; :key=&apos;item.attr_id&apos;&gt;</span><br><span class="line">						&lt;el-input v-model=&quot;item.attr_vals&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">					&lt;/el-form-item&gt;</span><br><span class="line">				&lt;/el-tab-pane&gt;</span><br><span class="line">				&lt;el-tab-pane name=&apos;4&apos; label=&quot;商品图片&quot;&gt;</span><br><span class="line">					&lt;el-form-item&gt;</span><br><span class="line">						&lt;!-- action：图片上传的地址</span><br><span class="line">						:on-remove:  移除图片触发的函数 </span><br><span class="line">						list-type: picture   图片以列表缩略图显示--&gt;</span><br><span class="line">						&lt;el-upload</span><br><span class="line">							action=&quot;http://localhost:8888/api/private/v1/upload&quot;</span><br><span class="line">							:on-remove=&quot;handleRemove&quot;</span><br><span class="line">							:on-success=&quot;handleSuccess&quot;</span><br><span class="line">							:headers = &apos;headers&apos;</span><br><span class="line">							list-type=&quot;picture&quot;&gt;</span><br><span class="line">							&lt;el-button size=&quot;small&quot; type=&quot;primary&quot;&gt;点击上传&lt;/el-button&gt;</span><br><span class="line">							&lt;div slot=&quot;tip&quot; class=&quot;el-upload__tip&quot;&gt;只能上传jpg/png文件，且不超过500kb&lt;/div&gt;</span><br><span class="line">						&lt;/el-upload&gt;</span><br><span class="line">					&lt;/el-form-item&gt;</span><br><span class="line">				&lt;/el-tab-pane&gt;</span><br><span class="line">				&lt;el-tab-pane name=&apos;5&apos; label=&quot;商品内容&quot;&gt;</span><br><span class="line">					&lt;el-form-item&gt;</span><br><span class="line">						&lt;el-button&gt;添加商品&lt;/el-button&gt;</span><br><span class="line">						//富文本编辑器</span><br><span class="line">						&lt;quill-editor v-model=&apos;form.goods_introduce&apos;&gt;&lt;/quill-editor&gt;</span><br><span class="line">					&lt;/el-form-item&gt;</span><br><span class="line">				&lt;/el-tab-pane&gt;</span><br><span class="line">			&lt;/el-tabs&gt;</span><br><span class="line">		&lt;/el-form&gt;</span><br><span class="line">	&lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">	// 富文本编辑器局部引入</span><br><span class="line">	import &apos;quill/dist/quill.core.css&apos;</span><br><span class="line">	import &apos;quill/dist/quill.snow.css&apos;</span><br><span class="line">	import &apos;quill/dist/quill.bubble.css&apos;</span><br><span class="line">	import &#123; quillEditor &#125; from &apos;vue-quill-editor&apos;</span><br><span class="line">	export default &#123;</span><br><span class="line">		//富文本编辑器</span><br><span class="line">		components: &#123;</span><br><span class="line">			quillEditor</span><br><span class="line">			//quill-editor:quill-edito</span><br><span class="line">		&#125;,</span><br><span class="line">		data()&#123;</span><br><span class="line">			return &#123;</span><br><span class="line">				active: &quot;1&quot;,</span><br><span class="line">				form: &#123;</span><br><span class="line">					goods_name: &apos;&apos;,</span><br><span class="line">					goods_cat: &apos;&apos;,</span><br><span class="line">					goods_price: &apos;&apos;,</span><br><span class="line">					goods_number: &apos;&apos;,</span><br><span class="line">					goods_weight: &apos;&apos;,</span><br><span class="line">					goods_introduce: &apos;&apos;,</span><br><span class="line">					pics: [],</span><br><span class="line">					attrs: []</span><br><span class="line">				&#125;,</span><br><span class="line">				//级联数据要使用的数据</span><br><span class="line">				options: [],</span><br><span class="line">				selectedOptions2: [1,3,6],</span><br><span class="line">				defaultProp: &#123;</span><br><span class="line">					label: &apos;cat_name&apos;,</span><br><span class="line">					value: &apos;cat_id&apos;,</span><br><span class="line">					children: &apos;children&apos;</span><br><span class="line">				&#125;,</span><br><span class="line">				//复选框组数据</span><br><span class="line">				//checkList: [],</span><br><span class="line">				//动态参数数组</span><br><span class="line">				arrDy: [],</span><br><span class="line">				//静态参数数组</span><br><span class="line">				arrStatic: [],</span><br><span class="line">				//上传图片</span><br><span class="line">				headers: &#123;</span><br><span class="line">					Authorization: window.localStorage.getItem(&apos;token&apos;)</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		mounted()&#123;</span><br><span class="line">			this.getGoodsCate();</span><br><span class="line">		&#125;,</span><br><span class="line">		methods:&#123;</span><br><span class="line">			//上传文件的函数</span><br><span class="line">			handleRemove(file)&#123;</span><br><span class="line">				console.log(&apos;移除成功&apos;);</span><br><span class="line">				console.log(file);</span><br><span class="line">			&#125;,</span><br><span class="line">            handleSuccess(response)&#123;</span><br><span class="line">				console.log(&apos;上传成功&apos;);</span><br><span class="line">				console.log(response);</span><br><span class="line">				//response.data.tmp_path</span><br><span class="line">			&#125;,</span><br><span class="line">			//当tab栏选中切换时</span><br><span class="line">			async changeTab()&#123;</span><br><span class="line">				// 判断当前是不是商品参数这一项,如果是的话，判断有没有选中三级分类，有则获取动态商品参数</span><br><span class="line">				//当选中哪一项,v-model的值就是该name的值</span><br><span class="line">				if(this.active === &apos;2&apos;)&#123;</span><br><span class="line">					if(this.selectedOptions2.length === 3)&#123;</span><br><span class="line">						const res = await this.$http.get(`categories/$&#123;this.selectedOptions2[2]&#125;/attributes?sel=many`);</span><br><span class="line">						console.log(res);</span><br><span class="line">						this.arrDy = res.data.data;</span><br><span class="line">						this.arrDy.forEach(item =&gt; &#123;</span><br><span class="line">							item.attr_vals = item.attr_vals.trim().length === 0 ? [] : item.attr_vals.trim().split(&apos;,&apos;);</span><br><span class="line">						&#125;);</span><br><span class="line">					&#125;else&#123;</span><br><span class="line">						this.$message.warning(&apos;请选择完整的三级分类&apos;);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">				//判断当前是不是商品属性这一项,如果是的话判断有没有选中三级分类,有则获取静态商品数据</span><br><span class="line">				if(this.active === &apos;3&apos;)&#123;</span><br><span class="line">					if(this.selectedOptions2.length === 3)&#123;</span><br><span class="line">						const res = await this.$http.get(`categories/$&#123;this.selectedOptions2[2]&#125;/attributes?sel=only`);</span><br><span class="line">						console.log(res);</span><br><span class="line">						this.arrStatic = res.data.data;</span><br><span class="line">					&#125;else&#123;</span><br><span class="line">						this.$message.warning(&apos;请选择完整的三级分类&apos;);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;,</span><br><span class="line">			//级联选择器中内容改变时触发</span><br><span class="line">			handleChange()&#123;</span><br><span class="line"></span><br><span class="line">			&#125;,</span><br><span class="line">			//获取商品数据列表 级联数据</span><br><span class="line">			async getGoodsCate()&#123;</span><br><span class="line">				const res = await this.$http.get(`categories?type=3`);</span><br><span class="line">				//console.log(res);</span><br><span class="line">				this.options = res.data.data;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">.form &#123;</span><br><span class="line">	height: 400px;</span><br><span class="line">	overflow: auto;</span><br><span class="line">&#125;</span><br><span class="line">.quill-editor &#123;</span><br><span class="line">	margin-top: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.ql-editor &#123;</span><br><span class="line">	height: 200px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h3 id="13-10-表单数据处理-分类和图片"><a href="#13-10-表单数据处理-分类和图片" class="headerlink" title="13.10  表单数据处理-分类和图片"></a>13.10  表单数据处理-分类和图片</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">接口:添加商品</span><br><span class="line">发送添加商品请求，处理数据</span><br><span class="line">数据处理： 处理分类id   goods_cat  图片临时路径</span><br><span class="line">//添加商品</span><br><span class="line">addGoods()&#123;</span><br><span class="line">    //处理数据  商品分类 级联选择器数据 数组用,号分割开的字符串</span><br><span class="line">    this.form.goods_cat = this.selectedOptions2.join(&apos;,&apos;);</span><br><span class="line">&#125;,</span><br><span class="line">//上传文件的函数</span><br><span class="line">handleRemove(file)&#123;</span><br><span class="line">    console.log(&apos;移除成功&apos;);</span><br><span class="line">    const index = this.form.pics.findIndex((item) =&gt; &#123;</span><br><span class="line">        return item.pic === file.response.data.tmp_path;</span><br><span class="line">    &#125;);</span><br><span class="line">    // console.log(index);</span><br><span class="line">    this.form.pics.splice(index,1);</span><br><span class="line">&#125;,</span><br><span class="line">handleSuccess(response)&#123;</span><br><span class="line">    console.log(&apos;上传成功&apos;);</span><br><span class="line">    //console.log(response);</span><br><span class="line">    //把临时路径放在数组中</span><br><span class="line">    this.form.pics.push(&#123;</span><br><span class="line">        pic: response.data.tmp_path</span><br><span class="line">    &#125;);</span><br><span class="line">    //console.log(this.form.pics);</span><br><span class="line">    //response.data.tmp_path</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="13-11-表单数据处理"><a href="#13-11-表单数据处理" class="headerlink" title="13.11  表单数据处理"></a>13.11  表单数据处理</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">将动态参数和静态参数数据的id和value放入attrs数组</span><br><span class="line">//添加商品</span><br><span class="line">addGoods()&#123;</span><br><span class="line">    // 发送请求之前先处理数据</span><br><span class="line">    // goods_cat:商品id以,分割的字符串</span><br><span class="line">    this.form.goods_cat = this.selectedOptions2.join(&apos;,&apos;);</span><br><span class="line">    // 处理临时路径 this.form.pics</span><br><span class="line">    // 处理 attrs  静态参数和动态参数id</span><br><span class="line">    const arr1 = this.arrDy;</span><br><span class="line">    const arr2 = this.arrStatic;</span><br><span class="line">    const arr = [...arr1, ...arr2];</span><br><span class="line">    const newArr = arr.map(item =&gt; &#123;</span><br><span class="line">    	return &#123;attr_id: item.attr_id,attr_vals: item.attr_vals&#125;;</span><br><span class="line">    &#125;);</span><br><span class="line">    console.log(newArr);</span><br><span class="line">    this.form.attrs = newArr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="13-12-发送请求-回到商品列表页"><a href="#13-12-发送请求-回到商品列表页" class="headerlink" title="13.12  发送请求-回到商品列表页"></a>13.12  发送请求-回到商品列表页</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;el-card&gt;</span><br><span class="line">		&lt;my-bread level1=&apos;商品管理&apos; level2=&apos;商品列表&apos;&gt;&lt;/my-bread&gt;</span><br><span class="line">      	&lt;el-row class=&apos;info&apos;&gt;</span><br><span class="line">      		&lt;el-col&gt;</span><br><span class="line">      			&lt;el-alert title=&quot;添加商品信息&quot; type=&quot;info&quot; center show-icon :closable=&quot;false&quot;&gt;&lt;/el-alert&gt;</span><br><span class="line">      		&lt;/el-col&gt;</span><br><span class="line">      	&lt;/el-row&gt;</span><br><span class="line">		&lt;el-steps :active=&quot;1*active&quot;&gt;</span><br><span class="line">			&lt;el-step title=&quot;基本信息&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">			&lt;el-step title=&quot;商品参数&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">			&lt;el-step title=&quot;商品属性&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">			&lt;el-step title=&quot;商品图片&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">			&lt;el-step title=&quot;商品内容&quot;&gt;&lt;/el-step&gt;</span><br><span class="line">		&lt;/el-steps&gt;</span><br><span class="line">		&lt;el-form label-position=&apos;top&apos; v-model=&apos;form&apos; height=&apos;400px&apos; class=&apos;form&apos;&gt;</span><br><span class="line">			&lt;el-tabs v-model=&quot;active&quot; @tab-click = &apos;changeTab()&apos; tab-position=&quot;left&quot; style=&quot;height: 550px&quot; class=&apos;tabs&apos;&gt;</span><br><span class="line">				&lt;el-tab-pane name=&apos;1&apos; label=&quot;基本信息&quot;&gt;</span><br><span class="line">					&lt;el-form-item label=&quot;商品名称&quot;&gt;</span><br><span class="line">						&lt;el-input v-model=&quot;form.goods_name&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">					&lt;/el-form-item&gt;</span><br><span class="line">					&lt;el-form-item label=&quot;商品价格&quot;&gt;</span><br><span class="line">						&lt;el-input v-model=&quot;form.goods_price&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">					&lt;/el-form-item&gt;</span><br><span class="line">					&lt;el-form-item label=&quot;商品重量&quot;&gt;</span><br><span class="line">						&lt;el-input v-model=&quot;form.goods_weight&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">					&lt;/el-form-item&gt;</span><br><span class="line">					&lt;el-form-item label=&quot;商品数量&quot;&gt;</span><br><span class="line">						&lt;el-input v-model=&quot;form.goods_number&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">					&lt;/el-form-item&gt;</span><br><span class="line">					&lt;el-form-item label=&quot;商品分类&quot;&gt;</span><br><span class="line">						&lt;el-cascader</span><br><span class="line">							clearable</span><br><span class="line">							expand-trigger=&quot;hover&quot;</span><br><span class="line">							:options=&quot;options&quot;</span><br><span class="line">							v-model=&quot;selectedOptions2&quot;</span><br><span class="line">							:props = &quot;defaultProp&quot;</span><br><span class="line">							@change=&quot;handleChange&quot;&gt;</span><br><span class="line">						&lt;/el-cascader&gt;</span><br><span class="line">					&lt;/el-form-item&gt;</span><br><span class="line">				&lt;/el-tab-pane&gt;</span><br><span class="line">				&lt;el-tab-pane name=&apos;2&apos; label=&quot;商品参数&quot;&gt;</span><br><span class="line">					&lt;el-form-item v-for=&apos;(item1) in arrDy&apos; :key=&apos;item1.attr_id&apos; :label=&quot;item1.attr_name&quot;&gt;</span><br><span class="line">						&lt;!-- v-model控制的是全部选中的元素 --&gt;</span><br><span class="line">						&lt;el-checkbox-group v-model=&quot;item1.attr_vals&quot;&gt;</span><br><span class="line">							&lt;el-checkbox v-for=&apos;(item2,i) in item1.attr_vals&apos; :key=&apos;i&apos; :label=&quot;item2&quot; border&gt;&lt;/el-checkbox&gt;</span><br><span class="line">						&lt;/el-checkbox-group&gt;</span><br><span class="line">					&lt;/el-form-item&gt;</span><br><span class="line">				&lt;/el-tab-pane&gt;</span><br><span class="line">				&lt;el-tab-pane name=&apos;3&apos; label=&quot;商品属性&quot;&gt;</span><br><span class="line">					&lt;el-form-item :label=&quot;item.attr_name&quot; v-for=&apos;(item) in arrStatic&apos; :key=&apos;item.attr_id&apos;&gt;</span><br><span class="line">						&lt;el-input v-model=&quot;item.attr_vals&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">					&lt;/el-form-item&gt;</span><br><span class="line">				&lt;/el-tab-pane&gt;</span><br><span class="line">				&lt;el-tab-pane name=&apos;4&apos; label=&quot;商品图片&quot;&gt;</span><br><span class="line">					&lt;el-form-item&gt;</span><br><span class="line">						&lt;!-- action：图片上传的地址</span><br><span class="line">						:on-remove:  移除图片触发的函数 </span><br><span class="line">						list-type: picture   图片以列表缩略图显示--&gt;</span><br><span class="line">						&lt;el-upload</span><br><span class="line">							action=&quot;http://localhost:8888/api/private/v1/upload&quot;</span><br><span class="line">							:on-remove=&quot;handleRemove&quot;</span><br><span class="line">							:on-success=&quot;handleSuccess&quot;</span><br><span class="line">							:headers = &apos;headers&apos;</span><br><span class="line">							list-type=&quot;picture&quot;&gt;</span><br><span class="line">							&lt;el-button size=&quot;small&quot; type=&quot;primary&quot;&gt;点击上传&lt;/el-button&gt;</span><br><span class="line">							&lt;div slot=&quot;tip&quot; class=&quot;el-upload__tip&quot;&gt;只能上传jpg/png文件，且不超过500kb&lt;/div&gt;</span><br><span class="line">						&lt;/el-upload&gt;</span><br><span class="line">					&lt;/el-form-item&gt;</span><br><span class="line">				&lt;/el-tab-pane&gt;</span><br><span class="line">				&lt;el-tab-pane name=&apos;5&apos; label=&quot;商品内容&quot;&gt;</span><br><span class="line">					&lt;el-form-item&gt;</span><br><span class="line">						&lt;el-button @click=&apos;addGoods()&apos;&gt;添加商品&lt;/el-button&gt;</span><br><span class="line">						//富文本编辑器</span><br><span class="line">						&lt;quill-editor v-model=&apos;form.goods_introduce&apos;&gt;&lt;/quill-editor&gt;</span><br><span class="line">					&lt;/el-form-item&gt;</span><br><span class="line">				&lt;/el-tab-pane&gt;</span><br><span class="line">			&lt;/el-tabs&gt;</span><br><span class="line">		&lt;/el-form&gt;</span><br><span class="line">	&lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">	// 富文本编辑器局部引入</span><br><span class="line">	import &apos;quill/dist/quill.core.css&apos;</span><br><span class="line">	import &apos;quill/dist/quill.snow.css&apos;</span><br><span class="line">	import &apos;quill/dist/quill.bubble.css&apos;</span><br><span class="line">	import &#123; quillEditor &#125; from &apos;vue-quill-editor&apos;</span><br><span class="line">	export default &#123;</span><br><span class="line">		//富文本编辑器</span><br><span class="line">		components: &#123;</span><br><span class="line">			quillEditor</span><br><span class="line">			//quill-editor:quill-edito</span><br><span class="line">		&#125;,</span><br><span class="line">		data()&#123;</span><br><span class="line">			return &#123;</span><br><span class="line">				active: &quot;1&quot;,</span><br><span class="line">				form: &#123;</span><br><span class="line">					goods_name: &apos;&apos;,</span><br><span class="line">					goods_price: &apos;&apos;,</span><br><span class="line">					goods_number: &apos;&apos;,</span><br><span class="line">					goods_weight: &apos;&apos;,</span><br><span class="line">					goods_introduce: &apos;&apos;,</span><br><span class="line">					goods_cat: &apos;&apos;,</span><br><span class="line">					pics: [],</span><br><span class="line">					attrs: []</span><br><span class="line">				&#125;,</span><br><span class="line">				//级联数据要使用的数据</span><br><span class="line">				options: [],</span><br><span class="line">				selectedOptions2: [1,3,6],</span><br><span class="line">				defaultProp: &#123;</span><br><span class="line">					label: &apos;cat_name&apos;,</span><br><span class="line">					value: &apos;cat_id&apos;,</span><br><span class="line">					children: &apos;children&apos;</span><br><span class="line">				&#125;,</span><br><span class="line">				//复选框组数据</span><br><span class="line">				//checkList: [],</span><br><span class="line">				//动态参数数组</span><br><span class="line">				arrDy: [],</span><br><span class="line">				//静态参数数组</span><br><span class="line">				arrStatic: [],</span><br><span class="line">				//上传图片</span><br><span class="line">				headers: &#123;</span><br><span class="line">					Authorization: window.localStorage.getItem(&apos;token&apos;)</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		mounted()&#123;</span><br><span class="line">			this.getGoodsCate();</span><br><span class="line">		&#125;,</span><br><span class="line">		methods:&#123;</span><br><span class="line">			//添加商品</span><br><span class="line">			async addGoods()&#123;</span><br><span class="line">				// 发送请求之前先处理数据</span><br><span class="line">				// goods_cat:商品id以,分割的字符串</span><br><span class="line">				this.form.goods_cat = this.selectedOptions2.join(&apos;,&apos;);</span><br><span class="line">				// 处理临时路径 this.form.pics</span><br><span class="line">				// 处理 attrs  静态参数和动态参数id</span><br><span class="line">				const arr1 = this.arrDy;</span><br><span class="line">				const arr2 = this.arrStatic;</span><br><span class="line">				const arr = [...arr1, ...arr2];</span><br><span class="line">				const newArr = arr.map(item =&gt; &#123;</span><br><span class="line">					return &#123;attr_id: item.attr_id,attr_vals: item.attr_vals&#125;;</span><br><span class="line">				&#125;);</span><br><span class="line">				// console.log(newArr);</span><br><span class="line">				this.form.attrs = newArr;</span><br><span class="line">				const res = await this.$http.post(`goods`,this.form);</span><br><span class="line">				console.log(res.data.meta.status);</span><br><span class="line">				if(res.data.meta.status === 201)&#123;</span><br><span class="line">					this.$router.push(&#123;</span><br><span class="line">						name: &apos;goods&apos;</span><br><span class="line">					&#125;);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;,</span><br><span class="line">			//上传文件的函数</span><br><span class="line">			handleRemove(file)&#123;</span><br><span class="line">				// console.log(&apos;移除成功&apos;);</span><br><span class="line">				//console.log(file);</span><br><span class="line">				const index = this.form.pics.findIndex(item =&gt; &#123;</span><br><span class="line">					return file.response.data.tmp_path === item.pic;</span><br><span class="line">				&#125;);</span><br><span class="line">				//console.log(index);</span><br><span class="line">				this.form.pics.splice(index,1);</span><br><span class="line">			&#125;,</span><br><span class="line">            handleSuccess(response)&#123;</span><br><span class="line">				//console.log(&apos;上传成功&apos;);</span><br><span class="line">				//console.log(response);</span><br><span class="line">				this.form.pics.push(&#123;</span><br><span class="line">					pic: response.data.tmp_path</span><br><span class="line">				&#125;);</span><br><span class="line">				//response.data.tmp_path</span><br><span class="line">			&#125;,</span><br><span class="line">			//当tab栏选中切换时</span><br><span class="line">			async changeTab()&#123;</span><br><span class="line">				// 判断当前是不是商品参数这一项,如果是的话，判断有没有选中三级分类，有则获取动态商品参数</span><br><span class="line">				//当选中哪一项,v-model的值就是该name的值</span><br><span class="line">				if(this.active === &apos;2&apos;)&#123;</span><br><span class="line">					if(this.selectedOptions2.length === 3)&#123;</span><br><span class="line">						const res = await this.$http.get(`categories/$&#123;this.selectedOptions2[2]&#125;/attributes?sel=many`);</span><br><span class="line">						//console.log(res);</span><br><span class="line">						this.arrDy = res.data.data;</span><br><span class="line">						this.arrDy.forEach(item =&gt; &#123;</span><br><span class="line">							item.attr_vals = item.attr_vals.trim().length === 0 ? [] : item.attr_vals.trim().split(&apos;,&apos;);</span><br><span class="line">						&#125;);</span><br><span class="line">					&#125;else&#123;</span><br><span class="line">						this.$message.warning(&apos;请选择完整的三级分类&apos;);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">				//判断当前是不是商品属性这一项,如果是的话判断有没有选中三级分类,有则获取静态商品数据</span><br><span class="line">				if(this.active === &apos;3&apos;)&#123;</span><br><span class="line">					if(this.selectedOptions2.length === 3)&#123;</span><br><span class="line">						const res = await this.$http.get(`categories/$&#123;this.selectedOptions2[2]&#125;/attributes?sel=only`);</span><br><span class="line">						//console.log(res);</span><br><span class="line">						this.arrStatic = res.data.data;</span><br><span class="line">					&#125;else&#123;</span><br><span class="line">						this.$message.warning(&apos;请选择完整的三级分类&apos;);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;,</span><br><span class="line">			//级联选择器中内容改变时触发</span><br><span class="line">			handleChange()&#123;</span><br><span class="line"></span><br><span class="line">			&#125;,</span><br><span class="line">			//获取商品数据列表 级联数据</span><br><span class="line">			async getGoodsCate()&#123;</span><br><span class="line">				const res = await this.$http.get(`categories?type=3`);</span><br><span class="line">				//console.log(res);</span><br><span class="line">				this.options = res.data.data;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">.form &#123;</span><br><span class="line">	height: 400px;</span><br><span class="line">	overflow: auto;</span><br><span class="line">&#125;</span><br><span class="line">.quill-editor &#123;</span><br><span class="line">	margin-top: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.ql-editor &#123;</span><br><span class="line">	height: 200px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="14-树形插件-商品分类"><a href="#14-树形插件-商品分类" class="headerlink" title="14.  树形插件-商品分类"></a>14.  树形插件-商品分类</h2><h3 id="14-1-准备组件-配置路由"><a href="#14-1-准备组件-配置路由" class="headerlink" title="14.1  准备组件-配置路由"></a>14.1  准备组件-配置路由</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.引入goodsCate.vue文件</span><br><span class="line">2.配置路由</span><br></pre></td></tr></table></figure>
<h3 id="14-2-element-tree-grid文档"><a href="#14-2-element-tree-grid文档" class="headerlink" title="14.2  element-tree-grid文档"></a>14.2  element-tree-grid文档</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1.安装  npm install element-tree-grid --save</span><br><span class="line">2.局部导入</span><br><span class="line">	先引入</span><br><span class="line">	var ElTreeGrid = require(&apos;element-tree-grid&apos;);</span><br><span class="line">	局部注册</span><br><span class="line">	var ElTreeGrid = require(&apos;element-tree-grid&apos;);</span><br><span class="line">	Vue.component(ElTreeGrid.name,ElTreeGrid);</span><br><span class="line">3.使用</span><br><span class="line">&lt;el-tree-grid&gt;&lt;/el-tree-grid&gt;</span><br></pre></td></tr></table></figure>
<h3 id="14-3-element-tree-grid配置"><a href="#14-3-element-tree-grid配置" class="headerlink" title="14.3  element-tree-grid配置"></a>14.3  element-tree-grid配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"> &lt;!-- 表格 --&gt;</span><br><span class="line"> 1.  &lt;el-table height=&quot;450&quot; :data=&quot;list&quot; style=&quot;width: 100%&quot;&gt;</span><br><span class="line">              &lt;!-- 表格展开为树形结构 --&gt;</span><br><span class="line">              &lt;!-- treeKey 相当于 nodeKey   每个节点唯一标识 值来源于list数据中的key名</span><br><span class="line">              parentkey 父节点的数据的标识 cat_id</span><br><span class="line">              levelKey  自己层级标识</span><br><span class="line">              childkey  子节点的数据所在key--&gt;</span><br><span class="line">              &lt;el-tree-grid</span><br><span class="line">                prop=&apos;cat_name&apos;</span><br><span class="line">                label=&apos;分类名称&apos;</span><br><span class="line">                treeKey = &apos;cat_id&apos;</span><br><span class="line">                parentkey = &apos;cat_pid&apos;</span><br><span class="line">                levelKey = &apos;cat_level&apos;</span><br><span class="line">                childkey = &apos;children&apos;&gt;</span><br><span class="line">              &lt;/el-tree-grid&gt;</span><br><span class="line">      &lt;el-table-column label=&quot;级别&quot;&gt;</span><br><span class="line">        &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">          &lt;span v-if=&quot;scope.row.cat_level===0&quot;&gt;一级&lt;/span&gt;</span><br><span class="line">          &lt;span v-else-if=&quot;scope.row.cat_level===1&quot;&gt;二级&lt;/span&gt;</span><br><span class="line">          &lt;span v-else-if=&quot;scope.row.cat_level===2&quot;&gt;三级&lt;/span&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/el-table-column&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-table-column label=&quot;是否有效&quot;&gt;</span><br><span class="line">        &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">          &lt;span v-if=&quot;scope.row.cat_deleted===false&quot;&gt;有效&lt;/span&gt;</span><br><span class="line">          &lt;span v-else-if=&quot;scope.row.cat_deleted===true&quot;&gt;无效&lt;/span&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/el-table-column&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-table-column label=&quot;操作&quot; width=&quot;180&quot;&gt;</span><br><span class="line">        &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">          &lt;el-button type=&quot;primary&quot; icon=&quot;el-icon-edit&quot; circle size=&quot;mini&quot; plain&gt;&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button type=&quot;danger&quot; icon=&quot;el-icon-delete&quot; circle size=&quot;mini&quot; plain&gt;&lt;/el-button&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/el-table-column&gt;</span><br><span class="line">    &lt;/el-table&gt;</span><br><span class="line">2.&lt;script&gt;</span><br><span class="line">// 引入 element-tree-grid</span><br><span class="line">var ElTreeGrid = require(&apos;element-tree-grid&apos;);</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    ElTreeGrid</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      list: [],</span><br><span class="line">      pagenum: 1,</span><br><span class="line">      pagesize: 10,</span><br><span class="line">      total: 1,</span><br><span class="line">      dialogFormVisibleAdd: false,</span><br><span class="line">      form: &#123;</span><br><span class="line">        cat_pid: -1,</span><br><span class="line">        cat_name: &quot;&quot;,</span><br><span class="line">        cat_level: -1</span><br><span class="line">      &#125;,</span><br><span class="line">      formLabelWidth: &quot;140px&quot;,</span><br><span class="line">      //  级联选择器要用的数据</span><br><span class="line">      caslist: [],</span><br><span class="line">      selectedOptions: [],</span><br><span class="line">      defaultProp: &#123;</span><br><span class="line">        value: &quot;cat_id&quot;,</span><br><span class="line">        label: &quot;cat_name&quot;,</span><br><span class="line">        children: &quot;children&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    this.getGoodsCate();</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    // 添加分类 - 发送请求</span><br><span class="line">    async addCate() &#123;&#125;,</span><br><span class="line">    // 添加分类- 显示对话框</span><br><span class="line">    async addGoodsCate() &#123;</span><br><span class="line">      // 获取两级分类的数据</span><br><span class="line">      const res = await this.$http.get(`categories?type=2`);</span><br><span class="line">      this.caslist = res.data.data;</span><br><span class="line"></span><br><span class="line">      this.dialogFormVisibleAdd = true;</span><br><span class="line">    &#125;,</span><br><span class="line">    // 获取所有分类</span><br><span class="line">    async getGoodsCate() &#123;</span><br><span class="line">      const res = await this.$http.get(</span><br><span class="line">        `categories?type=3&amp;pagenum=$&#123;this.pagenum&#125;&amp;pagesize=$&#123;this.pagesize&#125;`</span><br><span class="line">      );</span><br><span class="line">      // console.log(res)</span><br><span class="line">      this.list = res.data.data.result;</span><br><span class="line">      // console.log(this.list);</span><br><span class="line"></span><br><span class="line">      this.total = res.data.data.total;</span><br><span class="line">    &#125;,</span><br><span class="line">    // 分页的相关方法</span><br><span class="line">    handleSizeChange(val) &#123;</span><br><span class="line">      // console.log(`每页 $&#123;val&#125; 条`)</span><br><span class="line">      this.pagesize = val;</span><br><span class="line">      this.pagenum = 1;</span><br><span class="line">      this.getGoodsCate();</span><br><span class="line">    &#125;,</span><br><span class="line">    handleCurrentChange(val) &#123;</span><br><span class="line">      // console.log(`当前页: $&#123;val&#125;`)</span><br><span class="line">      // this.pagenum = 2 = val</span><br><span class="line">      this.pagenum = val;</span><br><span class="line">      this.getGoodsCate();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h3 id="14-4-添加分类-打开对话框"><a href="#14-4-添加分类-打开对话框" class="headerlink" title="14.4  添加分类-打开对话框"></a>14.4  添加分类-打开对话框</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">点击添加分类按钮,打开对话框,获取数据级联选择器二级分类数据(type=2)</span><br><span class="line">配置对话框中级联选择器的数据</span><br><span class="line">注意:添加分类,只能添加一二三级分类</span><br></pre></td></tr></table></figure>
<h3 id="14-5-添加分类-发送请求"><a href="#14-5-添加分类-发送请求" class="headerlink" title="14.5  添加分类-发送请求"></a>14.5  添加分类-发送请求</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">接口： 添加分类数据</span><br><span class="line">点击确定按钮，发送请求  处理请求体参数数据 关闭弹出框 刷新表格 清空弹出框数据</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">async addCate() &#123;</span><br><span class="line">      // 处理请求体中的参数</span><br><span class="line">      // cat_name: &quot;&quot;,   绑定的表单数据</span><br><span class="line">      // cat_pid: -1,</span><br><span class="line">      // cat_level: -1</span><br><span class="line">      if(this.selectedOptions.length === 0)&#123;</span><br><span class="line">        this.form.cat_pid = 0;</span><br><span class="line">        this.form.cat_level = 0;</span><br><span class="line">      &#125;</span><br><span class="line">      if(this.selectedOptions.length === 1)&#123;</span><br><span class="line">        this.form.cat_pid = this.selectedOptions[0];</span><br><span class="line">        this.form.cat_level = 1;</span><br><span class="line">      &#125;</span><br><span class="line">      if(this.selectedOptions.length === 2)&#123;</span><br><span class="line">        this.form.cat_pid = this.selectedOptions[1];</span><br><span class="line">        this.form.cat_level = 2;</span><br><span class="line">      &#125;</span><br><span class="line">      const res = await this.$http.post(`categories`,this.form);</span><br><span class="line">      //console.log(res);</span><br><span class="line">      // 清空弹出框数据</span><br><span class="line">      this.form = &#123;&#125;;</span><br><span class="line">      this.selectedOptions = [];</span><br><span class="line">      // 刷新</span><br><span class="line">      this.getGoodsCate();</span><br><span class="line">      // 关闭弹出框</span><br><span class="line">      this.dialogFormVisibleAdd = false;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><code>goodscate.vue</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card class=&quot;box-card&quot;&gt;</span><br><span class="line">    &lt;!-- 面包屑 --&gt;</span><br><span class="line">    &lt;my-bread level1=&quot;商品管理&quot; level2=&quot;商品分类&quot;&gt;&lt;/my-bread&gt;</span><br><span class="line">    &lt;!-- 搜索框 --&gt;</span><br><span class="line">    &lt;el-row&gt;</span><br><span class="line">      &lt;el-col :span=&quot;24&quot; class=&quot;searchArea&quot;&gt;</span><br><span class="line">        &lt;el-button type=&quot;success&quot; @click=&quot;addGoodsCate()&quot;&gt;添加分类&lt;/el-button&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 添加分类的对话框 --&gt;</span><br><span class="line">    &lt;el-dialog title=&quot;添加分类&quot; :visible.sync=&quot;dialogFormVisibleAdd&quot;&gt;</span><br><span class="line">      &lt;el-form :model=&quot;form&quot;&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;分类名称&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span><br><span class="line">          &lt;el-input v-model=&quot;form.cat_name&quot; autocomplete=&quot;off&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;!-- 级联选择器 (表单元素) --&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;分类&quot; :label-width=&quot;formLabelWidth&quot;&gt;</span><br><span class="line">          &lt;el-cascader</span><br><span class="line">            expand-trigger=&quot;hover&quot;</span><br><span class="line">            change-on-select</span><br><span class="line">            clearable</span><br><span class="line">            :options=&quot;caslist&quot;</span><br><span class="line">            v-model=&quot;selectedOptions&quot;</span><br><span class="line">            :props=&quot;defaultProp&quot;</span><br><span class="line">          &gt;&lt;/el-cascader&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">      &lt;/el-form&gt;</span><br><span class="line">      &lt;div slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">        &lt;el-button @click=&quot;dialogFormVisibleAdd = false&quot;&gt;取 消&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; @click=&quot;addCate()&quot;&gt;确 定&lt;/el-button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/el-dialog&gt;</span><br><span class="line">    &lt;!-- 表格 --&gt;</span><br><span class="line">    &lt;el-table height=&quot;350&quot; :data=&quot;list&quot; style=&quot;width: 100%&quot;&gt;</span><br><span class="line">      &lt;!-- 表格展开为树形结构 --&gt;</span><br><span class="line">      &lt;!-- treeKey 相当于 nodeKey   每个节点唯一标识 值来源于list数据中的key名</span><br><span class="line">      parentkey 父节点的数据的标识 cat_id</span><br><span class="line">      levelKey  自己层级标识</span><br><span class="line">      childkey  子节点的数据所在key--&gt;</span><br><span class="line">      &lt;el-tree-grid</span><br><span class="line">        prop=&apos;cat_name&apos;</span><br><span class="line">        label=&apos;分类名称&apos;</span><br><span class="line">        treeKey = &apos;cat_id&apos;</span><br><span class="line">        parentkey = &apos;cat_pid&apos;</span><br><span class="line">        levelKey = &apos;cat_level&apos;</span><br><span class="line">        childkey = &apos;children&apos;&gt;</span><br><span class="line"></span><br><span class="line">      &lt;/el-tree-grid&gt;</span><br><span class="line">      &lt;el-table-column label=&quot;级别&quot;&gt;</span><br><span class="line">        &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">          &lt;span v-if=&quot;scope.row.cat_level===0&quot;&gt;一级&lt;/span&gt;</span><br><span class="line">          &lt;span v-else-if=&quot;scope.row.cat_level===1&quot;&gt;二级&lt;/span&gt;</span><br><span class="line">          &lt;span v-else-if=&quot;scope.row.cat_level===2&quot;&gt;三级&lt;/span&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/el-table-column&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-table-column label=&quot;是否有效&quot;&gt;</span><br><span class="line">        &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">          &lt;span v-if=&quot;scope.row.cat_deleted===false&quot;&gt;有效&lt;/span&gt;</span><br><span class="line">          &lt;span v-else-if=&quot;scope.row.cat_deleted===true&quot;&gt;无效&lt;/span&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/el-table-column&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-table-column label=&quot;操作&quot; width=&quot;180&quot;&gt;</span><br><span class="line">        &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">          &lt;el-button type=&quot;primary&quot; icon=&quot;el-icon-edit&quot; circle size=&quot;mini&quot; plain&gt;&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button type=&quot;danger&quot; icon=&quot;el-icon-delete&quot; circle size=&quot;mini&quot; plain&gt;&lt;/el-button&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/el-table-column&gt;</span><br><span class="line">    &lt;/el-table&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 分页 --&gt;</span><br><span class="line">    &lt;el-pagination</span><br><span class="line">      @size-change=&quot;handleSizeChange&quot;</span><br><span class="line">      @current-change=&quot;handleCurrentChange&quot;</span><br><span class="line">      :current-page=&quot;pagenum&quot;</span><br><span class="line">      :page-sizes=&quot;[5, 10, 15,20]&quot;</span><br><span class="line">      :page-size=&quot;pagesize&quot;</span><br><span class="line">      layout=&quot;total, sizes, prev, pager, next, jumper&quot;</span><br><span class="line">      :total=&quot;total&quot;</span><br><span class="line">    &gt;&lt;/el-pagination&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// 引入 element-tree-grid</span><br><span class="line">var ElTreeGrid = require(&apos;element-tree-grid&apos;);</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    ElTreeGrid</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      list: [],</span><br><span class="line">      pagenum: 1,</span><br><span class="line">      pagesize: 10,</span><br><span class="line">      total: 1,</span><br><span class="line">      dialogFormVisibleAdd: false,</span><br><span class="line">      form: &#123;</span><br><span class="line">        cat_pid: -1,</span><br><span class="line">        cat_name: &quot;&quot;,</span><br><span class="line">        cat_level: -1</span><br><span class="line">      &#125;,</span><br><span class="line">      formLabelWidth: &quot;140px&quot;,</span><br><span class="line">      //  级联选择器要用的数据</span><br><span class="line">      caslist: [],</span><br><span class="line">      selectedOptions: [],</span><br><span class="line">      defaultProp: &#123;</span><br><span class="line">        value: &quot;cat_id&quot;,</span><br><span class="line">        label: &quot;cat_name&quot;,</span><br><span class="line">        children: &quot;children&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    this.getGoodsCate();</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    // 添加分类 - 发送请求</span><br><span class="line">    async addCate() &#123;</span><br><span class="line">      // 处理请求体中的参数</span><br><span class="line">      // cat_name: &quot;&quot;,   绑定的表单数据</span><br><span class="line">      // cat_pid: -1,</span><br><span class="line">      // cat_level: -1</span><br><span class="line">      if(this.selectedOptions.length === 0)&#123;</span><br><span class="line">        this.form.cat_pid = 0;</span><br><span class="line">        this.form.cat_level = 0;</span><br><span class="line">      &#125;</span><br><span class="line">      if(this.selectedOptions.length === 1)&#123;</span><br><span class="line">        this.form.cat_pid = this.selectedOptions[0];</span><br><span class="line">        this.form.cat_level = 1;</span><br><span class="line">      &#125;</span><br><span class="line">      if(this.selectedOptions.length === 2)&#123;</span><br><span class="line">        this.form.cat_pid = this.selectedOptions[1];</span><br><span class="line">        this.form.cat_level = 2;</span><br><span class="line">      &#125;</span><br><span class="line">      const res = await this.$http.post(`categories`,this.form);</span><br><span class="line">      //console.log(res);</span><br><span class="line">      // 清空弹出框数据</span><br><span class="line">      this.form = &#123;&#125;;</span><br><span class="line">      this.selectedOptions = [];</span><br><span class="line">      // 刷新</span><br><span class="line">      this.getGoodsCate();</span><br><span class="line">      // 关闭弹出框</span><br><span class="line">      this.dialogFormVisibleAdd = false;</span><br><span class="line">    &#125;,</span><br><span class="line">    // 添加分类- 显示对话框</span><br><span class="line">    async addGoodsCate() &#123;</span><br><span class="line">      // 获取两级分类的数据</span><br><span class="line">      const res = await this.$http.get(`categories?type=2`);</span><br><span class="line">      this.caslist = res.data.data;</span><br><span class="line"></span><br><span class="line">      this.dialogFormVisibleAdd = true;</span><br><span class="line">    &#125;,</span><br><span class="line">    // 获取所有分类</span><br><span class="line">    async getGoodsCate() &#123;</span><br><span class="line">      const res = await this.$http.get(</span><br><span class="line">        `categories?type=3&amp;pagenum=$&#123;this.pagenum&#125;&amp;pagesize=$&#123;this.pagesize&#125;`</span><br><span class="line">      );</span><br><span class="line">      // console.log(res)</span><br><span class="line">      this.list = res.data.data.result;</span><br><span class="line">      // console.log(this.list);</span><br><span class="line"></span><br><span class="line">      this.total = res.data.data.total;</span><br><span class="line">    &#125;,</span><br><span class="line">    // 分页的相关方法</span><br><span class="line">    handleSizeChange(val) &#123;</span><br><span class="line">      // console.log(`每页 $&#123;val&#125; 条`)</span><br><span class="line">      this.pagesize = val;</span><br><span class="line">      this.pagenum = 1;</span><br><span class="line">      this.getGoodsCate();</span><br><span class="line">    &#125;,</span><br><span class="line">    handleCurrentChange(val) &#123;</span><br><span class="line">      // console.log(`当前页: $&#123;val&#125;`)</span><br><span class="line">      // this.pagenum = 2 = val</span><br><span class="line">      this.pagenum = val;</span><br><span class="line">      this.getGoodsCate();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.box-card &#123;</span><br><span class="line">  height: 100%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.searchArea &#123;</span><br><span class="line">  margin-top: 10px;</span><br><span class="line">  margin-bottom: 10px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.searchArea .searchInput &#123;</span><br><span class="line">  width: 350px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="16-订单管理"><a href="#16-订单管理" class="headerlink" title="16.  订单管理"></a>16.  订单管理</h2><h3 id="16-1-订单列表-配置路由-省市区引入"><a href="#16-1-订单列表-配置路由-省市区引入" class="headerlink" title="16.1  订单列表-配置路由-省市区引入"></a>16.1  订单列表-配置路由-省市区引入</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">orders/  省市区插件没有请求接口,因为几乎所有设备都需要使用</span><br><span class="line">1.引入  </span><br><span class="line">// catlist是一个数组</span><br><span class="line">import catlist from &apos;@/assets/city_data2017_element.js&apos;;</span><br><span class="line">2.点击编辑按钮弹出弹出框,在弹出框里设置数据</span><br><span class="line">this.catlist = catlist;</span><br></pre></td></tr></table></figure>
<h2 id="17-数据统计"><a href="#17-数据统计" class="headerlink" title="17.  数据统计"></a>17.  数据统计</h2><h3 id="17-1-数据报表-Echarts-配置路由"><a href="#17-1-数据报表-Echarts-配置路由" class="headerlink" title="17.1  数据报表-Echarts-配置路由"></a>17.1  数据报表-Echarts-配置路由</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">百度地图  www.echartsjs.com</span><br><span class="line">1.安装 npm install echarts --save</span><br><span class="line">2.导入</span><br><span class="line">import echarts from &apos;echarts&apos;;</span><br><span class="line">3.定义标签</span><br><span class="line"> &lt;!-- 为 ECharts 准备一个具备大小（宽高）的 DOM --&gt;</span><br><span class="line"> &lt;div id=&quot;main&quot; style=&quot;width: 600px;height:400px;&quot;&gt;&lt;/div&gt;</span><br><span class="line"> 4.// 引入图表文件</span><br><span class="line">import echarts from &apos;echarts&apos;;</span><br><span class="line">export default &#123;</span><br><span class="line">    要操作DOM需要在mounted中</span><br><span class="line">    mounted()&#123;</span><br><span class="line">        this.initEcharts();</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        initEcharts()&#123;</span><br><span class="line">            // 初始化</span><br><span class="line">            var myChart = echarts.init(document.getElementById(&apos;main&apos;));</span><br><span class="line">            // 指定图表的配置项和数据</span><br><span class="line">            var option = &#123;</span><br><span class="line">                title: &#123;</span><br><span class="line">                    text: &apos;ECharts 入门示例&apos;</span><br><span class="line">                &#125;,</span><br><span class="line">                tooltip: &#123;&#125;,</span><br><span class="line">                legend: &#123;</span><br><span class="line">                    data:[&apos;销量&apos;]</span><br><span class="line">                &#125;,</span><br><span class="line">                xAxis: &#123;</span><br><span class="line">                    data: [&quot;衬衫&quot;,&quot;羊毛衫&quot;,&quot;雪纺衫&quot;,&quot;裤子&quot;,&quot;高跟鞋&quot;,&quot;袜子&quot;]</span><br><span class="line">                &#125;,</span><br><span class="line">                yAxis: &#123;&#125;,</span><br><span class="line">                series: [&#123;</span><br><span class="line">                    name: &apos;销量&apos;,</span><br><span class="line">                    type: &apos;bar&apos;,</span><br><span class="line">                    data: [5, 20, 36, 10, 10, 20]</span><br><span class="line">                &#125;]</span><br><span class="line">            &#125;;</span><br><span class="line">            // 使用刚指定的配置项和数据显示图表。</span><br><span class="line">            myChart.setOption(option);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="17-2-数据报表-Echarts-配置"><a href="#17-2-数据报表-Echarts-配置" class="headerlink" title="17.2  数据报表-Echarts-配置"></a>17.2  数据报表-Echarts-配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">文档接口参数不正确: 获取图表所需数据</span><br><span class="line">接口: reports/:type</span><br><span class="line">接口文档没写怎么传: :type </span><br><span class="line">测试: </span><br><span class="line">	reports/:type  </span><br><span class="line">	reports</span><br><span class="line">	reports/type=bing</span><br><span class="line">	reports?type=1</span><br><span class="line">	reports/type/1</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;el-card&gt;</span><br><span class="line">        &lt;!-- 面包屑 --&gt;</span><br><span class="line">        &lt;my-bread level1=&quot;数据统计&quot; level2=&quot;数据报表&quot;&gt;&lt;/my-bread&gt;</span><br><span class="line">        &lt;!-- 图表 --&gt;</span><br><span class="line">        &lt;div id=&quot;main&quot; style=&quot;width: 800px;height:400px;margin-top:20px&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">// 引入图表文件</span><br><span class="line">import echarts from &apos;echarts&apos;;</span><br><span class="line">export default &#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    mounted()&#123;</span><br><span class="line">        this.initEcharts();</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        async initEcharts()&#123;</span><br><span class="line">            // 初始化折线图</span><br><span class="line">            var myChart = echarts.init(document.getElementById(&apos;main&apos;));</span><br><span class="line">            // 获取图标数据</span><br><span class="line">            const res = await this.$http.get(`reports/type/1`);</span><br><span class="line">            //console.log(res);</span><br><span class="line">            const option1 = res.data.data;</span><br><span class="line">            // 指定图表的配置项和数据</span><br><span class="line">            const option2 = &#123;</span><br><span class="line">                title: &#123;</span><br><span class="line">                    text: &apos;堆叠区域图&apos;</span><br><span class="line">                &#125;,</span><br><span class="line">                tooltip : &#123;</span><br><span class="line">                    trigger: &apos;axis&apos;,</span><br><span class="line">                    axisPointer: &#123;</span><br><span class="line">                        type: &apos;cross&apos;,</span><br><span class="line">                        label: &#123;</span><br><span class="line">                            backgroundColor: &apos;#6a7985&apos;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                toolbox: &#123;</span><br><span class="line">                    feature: &#123;</span><br><span class="line">                        saveAsImage: &#123;&#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                grid: &#123;</span><br><span class="line">                    left: &apos;3%&apos;,</span><br><span class="line">                    right: &apos;4%&apos;,</span><br><span class="line">                    bottom: &apos;3%&apos;,</span><br><span class="line">                    containLabel: true</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">            const option = &#123;...option1, ...option2&#125;;</span><br><span class="line">            // 使用刚指定的配置项和数据显示图表。</span><br><span class="line">            myChart.setOption(option);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="18-优化-加载动画"><a href="#18-优化-加载动画" class="headerlink" title="18.  优化-加载动画"></a>18.  优化-加载动画</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">组件: loading加载</span><br><span class="line">1.通过自定义指令给表格添加 属性   数据loading为布尔值</span><br><span class="line">&lt;el-table</span><br><span class="line">    v-loading=&quot;loading&quot;</span><br><span class="line">    :data=&quot;tableData&quot;</span><br><span class="line">    style=&quot;width: 100%&quot;&gt;</span><br><span class="line">2.默认数据为false，请求数据之前设置this.loading = true,请求获取之后设置为true</span><br></pre></td></tr></table></figure>
<h2 id="19-优化-拦截器统一处理响应"><a href="#19-优化-拦截器统一处理响应" class="headerlink" title="19.  优化-拦截器统一处理响应"></a>19.  优化-拦截器统一处理响应</h2><p><code>main.js第一种写法</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">// The Vue build version to load with the `import` command</span><br><span class="line">// (runtime-only or standalone) has been set in webpack.base.conf with an alias.</span><br><span class="line">import Vue from &apos;vue&apos;</span><br><span class="line">import App from &apos;./App&apos;</span><br><span class="line">import router from &apos;./router&apos;</span><br><span class="line">// 引入element-ui;</span><br><span class="line">import ElementUI from &apos;element-ui&apos;</span><br><span class="line">import &apos;element-ui/lib/theme-chalk/index.css&apos;</span><br><span class="line">import &apos;@/assets/index.css&apos;</span><br><span class="line">import moment from &apos;moment&apos;</span><br><span class="line">import MyBread from &apos;@/components/cusBread.vue&apos;</span><br><span class="line">// import Http from &apos;@/http/http.js&apos;</span><br><span class="line">// Vue.use(Http);</span><br><span class="line">import axios from &apos;axios&apos;</span><br><span class="line">import &#123;Message&#125; from &apos;element-ui&apos;</span><br><span class="line"></span><br><span class="line">axios.defaults.baseURL = &quot;http://localhost:8888/api/private/v1/&quot;;</span><br><span class="line">// 添加一个请求拦截器</span><br><span class="line">axios.interceptors.request.use(function (config) &#123;</span><br><span class="line">  //在发送请求之前希望做些什么</span><br><span class="line">  //如果请求的不是登录请求，则设置拦截进行下面的代码</span><br><span class="line">  //根据config.url可以获取当前请求的地址</span><br><span class="line">  //console.log(config);</span><br><span class="line">  if(config.url !== &apos;login&apos;)&#123;</span><br><span class="line">      const AUTH_TOKEN = window.localStorage.getItem(&apos;token&apos;);</span><br><span class="line">      config.headers.Authorization = AUTH_TOKEN;</span><br><span class="line">  &#125;</span><br><span class="line">  return config;</span><br><span class="line">&#125;, function (error) &#123;</span><br><span class="line">  // Do something with request error</span><br><span class="line">  return Promise.reject(error);</span><br><span class="line">&#125;);</span><br><span class="line">//添加响应拦截器</span><br><span class="line">// 添加响应拦截器</span><br><span class="line">axios.interceptors.response.use(function (response) &#123;</span><br><span class="line">    console.log(response);</span><br><span class="line">    const msg = response.data.meta.msg;</span><br><span class="line">    const status = response.data.meta.status;</span><br><span class="line">    if(status !== 200 &amp;&amp; status !== 201)&#123;</span><br><span class="line">        Message.warning(msg);</span><br><span class="line">    &#125;</span><br><span class="line">    return response;</span><br><span class="line">&#125;, function (error) &#123;</span><br><span class="line">// 对响应错误做点什么</span><br><span class="line">    return Promise.reject(error);</span><br><span class="line">&#125;);</span><br><span class="line">Vue.prototype.$http = axios;</span><br><span class="line"></span><br><span class="line">Vue.use(ElementUI)</span><br><span class="line">Vue.config.productionTip = false</span><br><span class="line"></span><br><span class="line">//定义全局组件</span><br><span class="line">Vue.component(&quot;my-bread&quot;,MyBread);</span><br><span class="line">// 格式化日期的过滤器</span><br><span class="line">Vue.filter(&apos;fmDate&apos;,(v) =&gt; &#123;</span><br><span class="line">	return moment(v).format(&apos;YYYY-MM-DD&apos;);</span><br><span class="line">&#125;);</span><br><span class="line">/* eslint-disable no-new */</span><br><span class="line">new Vue(&#123;</span><br><span class="line">  el: &apos;#app&apos;,</span><br><span class="line">  router,</span><br><span class="line">  components: &#123; App &#125;,</span><br><span class="line">  template: &apos;&lt;App/&gt;&apos;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><code>main.js第二种写法</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import Http from &apos;@/http/http.js&apos;</span><br><span class="line">Vue.use(Http);</span><br></pre></td></tr></table></figure>
<p><code>http.js</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">import axios from &apos;axios&apos;</span><br><span class="line">import &#123;Message&#125; from &apos;element-ui&apos;</span><br><span class="line">const Http = &#123;&#125;</span><br><span class="line">Http.install = function(Vue, options) &#123;</span><br><span class="line">    axios.defaults.baseURL = &quot;http://localhost:8888/api/private/v1/&quot;;</span><br><span class="line">    // 添加一个请求拦截器</span><br><span class="line">    axios.interceptors.request.use(function (config) &#123;</span><br><span class="line">        //在发送请求之前希望做些什么</span><br><span class="line">        //如果请求的不是登录请求，则设置拦截进行下面的代码</span><br><span class="line">        //根据config.url可以获取当前请求的地址</span><br><span class="line">        //console.log(config);</span><br><span class="line">        if(config.url !== &apos;login&apos;)&#123;</span><br><span class="line">            const AUTH_TOKEN = window.localStorage.getItem(&apos;token&apos;);</span><br><span class="line">            config.headers.Authorization = AUTH_TOKEN;</span><br><span class="line">        &#125;</span><br><span class="line">        return config;</span><br><span class="line">    &#125;, function (error) &#123;</span><br><span class="line">        // Do something with request error</span><br><span class="line">        return Promise.reject(error);</span><br><span class="line">    &#125;);</span><br><span class="line">    //添加响应拦截器</span><br><span class="line">    // 添加响应拦截器</span><br><span class="line">    axios.interceptors.response.use(function (response) &#123;</span><br><span class="line">        console.log(response);</span><br><span class="line">        const msg = response.data.meta.msg;</span><br><span class="line">        const status = response.data.meta.status;</span><br><span class="line">        if(status !== 200 &amp;&amp; status !== 201)&#123;</span><br><span class="line">            Message.warning(msg);</span><br><span class="line">        &#125;</span><br><span class="line">        return response;</span><br><span class="line">    &#125;, function (error) &#123;</span><br><span class="line">    // 对响应错误做点什么</span><br><span class="line">        return Promise.reject(error);</span><br><span class="line">    &#125;);</span><br><span class="line">    Vue.prototype.$http = axios;</span><br><span class="line">&#125;</span><br><span class="line">export default Http</span><br></pre></td></tr></table></figure>
<h2 id="20-优化-路由懒加载"><a href="#20-优化-路由懒加载" class="headerlink" title="20.  优化-路由懒加载"></a>20.  优化-路由懒加载</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">首屏加载慢: 一次性加载所有组件</span><br><span class="line">使用哪个组件加载哪个组件</span><br><span class="line">vueejs.com  路由懒加载</span><br><span class="line">把所有index.js组件中所有的路由配置修改为</span><br><span class="line">const Vue = () =&gt; import(&apos;vue&apos;);</span><br><span class="line">将页面中需要的标识对应的组件，写成懒加载形式</span><br><span class="line">import Vue from &apos;vue&apos;</span><br><span class="line">import Router from &apos;vue-router&apos;</span><br><span class="line">import &#123;Message&#125; from &apos;element-ui&apos;</span><br><span class="line">const Login = () =&gt; import(&apos;@/components/login.vue&apos;)</span><br><span class="line">const Home = () =&gt; import(&apos;@/components/home.vue&apos;)</span><br><span class="line">const Users = () =&gt; import(&apos;@/components/users.vue&apos;)</span><br><span class="line">const Rights = () =&gt; import(&apos;@/components/rights.vue&apos;)</span><br><span class="line">const Roles = () =&gt; import(&apos;@/components/roles.vue&apos;)</span><br><span class="line">const Goodslist = () =&gt; import(&apos;@/components/goodslist.vue&apos;)</span><br><span class="line">const Goodsadd = () =&gt; import(&apos;@/components/goodsadd.vue&apos;)</span><br><span class="line">const Params = () =&gt; import(&apos;@/components/params.vue&apos;)</span><br><span class="line">const Goodscate = () =&gt; import(&apos;@/components/goodsCate.vue&apos;)</span><br><span class="line">const Order = () =&gt; import(&apos;@/components/order.vue&apos;)</span><br><span class="line">const Reports = () =&gt; import(&apos;@/components/reports.vue&apos;)</span><br><span class="line">多会需要多会加载</span><br><span class="line">如果不处理 - 打包后 -项目中所有的组件 会生成一个js文件</span><br><span class="line">如果路由懒加载 - 打包后 - 项目中每个组件-&gt;会生成自己的js文件</span><br><span class="line">npm  run build  打包</span><br></pre></td></tr></table></figure>
<h2 id="21-nextTick方法"><a href="#21-nextTick方法" class="headerlink" title="21.  nextTick方法"></a>21.  nextTick方法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">改变数据需要时间-经过时间-&gt;渲染视图</span><br><span class="line">修改过数据之后，立马获取DOM元素的数据，获取到的是之前的数据,执行完数据之后，需要经过updata和beforeUpdata钩子函数之后，数据才能改变,而这一过程需要时间,所以,如果想要实时获取DOM元素的数据,可以在获取元素时,</span><br><span class="line">1）使用定时器</span><br><span class="line">2）使用vue实例的 $nextTick()方法</span><br><span class="line"></span><br><span class="line">this.$nextTick(() =&gt; &#123;</span><br><span class="line">    console.log(this.$refs.p.innerText);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><code>111.html</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;main&quot;&gt;</span><br><span class="line">        &lt;button @click=&apos;add()&apos;&gt;按钮&lt;/button&gt;&#123;&#123;num&#125;&#125;</span><br><span class="line">        &lt;p ref=&apos;p&apos;&gt;&#123;&#123;num&#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;script src=&quot;vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        new Vue(&#123;</span><br><span class="line">            el: &apos;.main&apos;,</span><br><span class="line">            data: &#123;</span><br><span class="line">                num: &apos;&apos;</span><br><span class="line">            &#125;,</span><br><span class="line">            methods: &#123;</span><br><span class="line">                add()&#123;</span><br><span class="line">                    this.num ++;</span><br><span class="line">                    console.log(this.$refs.p.innerText);</span><br><span class="line">                    打印的p标签中的值是++之前的值,因为数据加完之后，执行update函数还需要一段时间，如果想要获取++之后的值,需要添加定时器或者使用vue的$nextTick函数</span><br><span class="line">                    1)setInterval(() =&gt; &#123;</span><br><span class="line">                        console.log(this.$refs.p.innerText);</span><br><span class="line">                    &#125;);</span><br><span class="line">                    2)this.$nextTick(() =&gt; &#123;</span><br><span class="line">                        console.log(this.$refs.p.innerText);</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="22-优化－CDN配置"><a href="#22-优化－CDN配置" class="headerlink" title="22.  优化－CDN配置"></a>22.  优化－CDN配置</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">１.项目中引用的资源是通过node_module来获取，在打包过程中，node_modelu也会被打包－＞项目包会很大</span><br><span class="line">２.项目资源改成从网络资源获取，从CDN获取</span><br><span class="line">３.package.json  文件中　依赖项　dependencies配置项中的内容都是从npm下载的,  把里面的资源改成cdn引入</span><br><span class="line">package.json文件</span><br><span class="line">&quot;dependencies&quot;: &#123;</span><br><span class="line">    &quot;vue&quot;: &quot;^2.5.2&quot;,</span><br><span class="line">    &quot;vue-router&quot;: &quot;^3.0.1&quot;,</span><br><span class="line">    &quot;element-ui&quot;: &quot;^2.6.1&quot;,</span><br><span class="line">    &quot;axios&quot;: &quot;^0.18.0&quot;,</span><br><span class="line">    &quot;moment&quot;: &quot;^2.24.0&quot;,</span><br><span class="line">    &quot;echarts&quot;: &quot;^4.2.1&quot;,</span><br><span class="line">    &quot;element-tree-grid&quot;: &quot;^0.1.3&quot;,</span><br><span class="line">    &quot;vue-quill-editor&quot;: &quot;^3.0.6&quot;</span><br><span class="line">  &#125;</span><br><span class="line">４.在vue官网找到对应得cdn资源，将cdn添加到index.html文件中</span><br><span class="line">&lt;script src=&quot;https://cdn.jsdelivr.net/npm/vue&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;https://cdn.bootcss.com/vue-router/3.0.2/vue-router.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;https://unpkg.com/element-ui/lib/index.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;https://cdn.bootcss.com/axios/0.19.0-beta.1/axios.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;https://cdn.bootcss.com/moment.js/2.24.0/moment.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;https://cdn.bootcss.com/echarts/4.2.1-rc1/echarts.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">５.所有的主流框架和三方资源都可以在CDN网站中找到</span><br><span class="line">https://www.bootcdn.cn</span><br><span class="line">6.小的插件资源找不到　文件大小比较小　　不替换也可以</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">1.找到package.json中使用的包</span><br><span class="line">2.找包的对应cdn网址　－ 官网＋bootcdn</span><br><span class="line">3.引入　index.html　　src</span><br><span class="line">4.修改webpack打包配置   https://www.webpackjs.com/</span><br><span class="line">在webpack网站配置查找cdn配置方法</span><br><span class="line">webpack.base.config.js</span><br><span class="line">module.exports = &#123;</span><br><span class="line">  //...</span><br><span class="line">  externals: &#123;</span><br><span class="line">  	key =&gt; 包名 =&gt; package.json</span><br><span class="line">  	value =&gt; 该包源码中暴露在全局中的变量名</span><br><span class="line">    &quot;vue&quot;: &apos;Vue&apos;,</span><br><span class="line">    &quot;vue-router&quot;: &apos;vueRouter&apos;,</span><br><span class="line">    &quot;element-ui&quot;: &apos;ELEMENT&apos;,</span><br><span class="line">    &quot;axios&quot;: &apos;axios&apos;,</span><br><span class="line">    &quot;moment&quot;: &apos;moment&apos;,</span><br><span class="line">    &quot;echarts&quot;: &apos;echarts&apos;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">5.把页面中所有导包所接收的变量与上面的全局中的变量名一样</span><br><span class="line">import Vue from &apos;vue&apos;;</span><br><span class="line"></span><br><span class="line">注意：　配置js的CDN资源－全局变量名－源码前几行define／exports／require／global</span><br><span class="line">link的src不需要单独配置　－在main.js中　把之前引入.css文件的代码删除掉</span><br></pre></td></tr></table></figure>
      </div>
        <div class="support-author">
          <p>感谢您的阅读。 🙏
          <a href target="_blank">关于转载请看这里</a>
            <!--<a class="btn-pay"  href="#pay-modal">¥ 打赏支持</a>-->
          </p>
        </div>
        <!--
            <div class="like ">
              <div class="like-button">
                <a id="like-note" href="">
                  <i class="icon-heart"></i>喜欢
                </a>
              </div>
              <span id="likes-count">256</span>
            </div>
        -->
        <div class="otherLink">
          <div class="previous">
          </div>
          <div class="next">
          </div>
        </div>
        <div class="comments" id="comments">
          
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script type="text/javascript">
  const gitalk = new Gitalk({
    clientID: '8888a8888',
    clientSecret: '8888886666666',
    repo: 'xxxx.github.io',
    owner: 'admin',
    admin: ['admin'],
    id: location.pathname,      // Ensure uniqueness and length less than 50
    distractionFreeMode: false
  })

  gitalk.render('comments');
</script>


        </div>
      </div>
    </div>
   
</main>
<div class="footer">
  <div class="info">
    <p>
    <a href="https://hexo.io"> Hexo </a> 强力驱动 |
      <a href="https://github.com/Youthink/hexo-themes-yearn"> Yearn </a>
      主题
    </p>
    <p>&copy;2013-2018 Ren Fang的博客 京ICP备xxxxxx号</p>
  </div>
</div>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script>//console
  var consoleConfig = '\n欢迎访问 https://hufangyun.com ，围观小猿大圣的博客(づ｡◕‿‿◕｡)づ！\n,\n本博客使用 %cHexo%c 搭建，博客主题为小猿大圣开发的 %chexo-themes-yearn%c ~~~ 🎉🎉🎉 \n\n源码 https://github.com/Youthink/hexo-themes-yearn \n\n如果喜欢可以 star 支持一下 ❤️~\n'.split(',');
  var canConsole = true;
  var consoleInfo = (function(consoleConfig) {
  if (!canConsole || !consoleConfig || consoleConfig.length < 1) {
    return;
  }
  var consoleColor = '#6190e8';
  var _console;
  var backgroundTextStyle = 'padding: 1px 5px;color: #fff;background: ' + consoleColor + ';'
  var textStyle = 'color: ' + consoleColor + ';';

  consoleConfig.map(o => {
    var num = (o.match(/%c/g) || []).length;
    if(/^http(s)?:\/\//.test(o)) {
      console.log('%c     ', 'background: url(' + o + ') no-repeat left center;font-size: 180px;');
      return;
    }
    if (num > 0) {
      var logArguments = [];
      for (var i = 0; i < num; i++) {
        if (i % 2 === 0) {
          logArguments.push(backgroundTextStyle);
        } else {
          logArguments.push(textStyle);
        }
      }
      (_console = console).log.apply(_console, ['%c' + o, textStyle].concat(logArguments));
      return;
    }
    console.log('%c' + o, textStyle);
  });
}(consoleConfig));</script><script type="text/javascript" src="/songfang0/./js/main.d9e3dd.js"></script>

</body>
</html>
