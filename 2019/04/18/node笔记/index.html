<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="keywords" content="hexo,个人博客,blog">
  <meta name="description" content="个人博客">
  <meta http-equiv="x-dns-prefetch-control" content="on">
  <link rel="dns-prefetch" href="https://busuanzi.ibruce.info">
  
  <link rel="dns-prefetch" href="https://widget.daovoice.io">
  <link rel="dns-prefetch" href="https://widget-static-cdn.daovoice.io">
  <link rel="dns-prefetch" href="https://im.daovoice.io">
  
  
  <link rel="dns-prefetch" href="https://hm.baidu.com/">
  
  
  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
  <link rel="dns-prefetch" href="https://api.github.com">
  <link rel="dns-prefetch" href="https://avatars3.githubusercontent.com">
  
  <link rel="stylesheet" type="text/css" href="/songfang0/./style/main.d9e3dd.css">
	<link rel="shortcut icon" href="/favicon.ico" title="Favicon">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
	<title>node笔记</title>
  
  <script>var _hmt=_hmt||[];(function(){var hm=document.createElement("script");hm.src="https://hm.baidu.com/hm.js?awwssw1snsnsnn1ndndnndnd99j";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s);})();
  </script>
  
  
    <script>(function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/123456.js","daovoice");daovoice('init',{app_id: "123456"});daovoice('update');
  </script>
  
</head>
<body>
<canvas id="pattern-placeholder" height="230"></canvas>
<div class="navbar-header">
  <a class="blog-title" href="/songfang0/">web前端总结</a>
  <a class="face-img" href="/songfang0/">
    <img src="https://tse1-mm.cn.bing.net/th?id=OIP.Wo0E2kACycBZa4AF_UoUjwAAAA&amp;w=97&amp;h=100&amp;c=8&amp;rs=1&amp;qlt=90&amp;pid=3.1&amp;rm=2">
  </a>
</div>
<main>
  <div class="article-title">
    
  
  <h1 class="title">
    node笔记
  </h1>
  


    <ul class="article-info">
      <li>
        发布
        <time datetime="2019-04-18T14:46:37.000Z" itemprop="datePublished">2019-04-18</time>
      </li>
      <li>
        
    更新 <time datetime="2019-04-18T14:47:40.500Z" itemprop="dateUpdated">2019-04-18</time>

      </li>
      <li id="busuanzi_container_page_pv">
        阅读 <span id="busuanzi_value_page_pv"></span>
      </li>
    </ul>
  </div>
  <div class="container">
    <div class="article">
      <div class="content">
        
        <h1 id="Node"><a href="#Node" class="headerlink" title="Node"></a>Node</h1><h2 id="1-Node是什么"><a href="#1-Node是什么" class="headerlink" title="1.  Node是什么"></a>1.  Node是什么</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">nodejs.cn   node中文网</span><br><span class="line">https://nodejs.org/en  英文网</span><br><span class="line">node社区: https://cnodejs.org</span><br><span class="line">js代码是浏览器里面的解释器来运行js代码。</span><br><span class="line">Node.js是一个基于Chrome V8引擎的JavaScript的运行环境，node.js使用了一个事件驱动、非阻塞式I/O的模型，使其轻量又高效。。</span><br><span class="line">node是js的运行环境。</span><br><span class="line">浏览器和node中js的区别：</span><br><span class="line">	1.没有DOM和BOM</span><br><span class="line">	2.有ECMAScript</span><br><span class="line">	3.有自己的API</span><br><span class="line">node -v:检测是否安装好node</span><br><span class="line">按node回车：进入REPL环境中,进行代码的简单测试</span><br><span class="line">按ctrl+c两次退出REPL环境</span><br><span class="line">node运行js文件：</span><br><span class="line">	1.命令行窗口进入.js文件所在目录</span><br><span class="line">	2.node+空格+.js文件名+回车</span><br><span class="line">	3.输入cls命令 清屏</span><br><span class="line">	node helloworld.js</span><br></pre></td></tr></table></figure>
<h2 id="2-模块体验"><a href="#2-模块体验" class="headerlink" title="2.  模块体验"></a>2.  模块体验</h2><h3 id="2-1-fs文件模块"><a href="#2-1-fs文件模块" class="headerlink" title="2.1  fs文件模块"></a>2.1  fs文件模块</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">1.node中模块fs 读取本地文件</span><br><span class="line">	1)导入模块</span><br><span class="line">	var fs = require(&apos;fs&apos;);</span><br><span class="line">	2)使用该模块的API</span><br><span class="line">	fs.readFile(形参1，形参2，形参3);</span><br><span class="line">	形参1:path要读取文件的文件路径</span><br><span class="line">	形参2:可选参数</span><br><span class="line">	形参3:回调函数 callback(err,data)</span><br><span class="line">	fs.readFile(&apos;txt.txt&apos;,function(error,data)&#123;</span><br><span class="line">        console.log(error);</span><br><span class="line">        如果错误，抛出异常，后续代码不会执行，不需要写return|else;s</span><br><span class="line">        throw： js关键字</span><br><span class="line">        if(error)&#123;</span><br><span class="line">            throw error;</span><br><span class="line">        &#125;</span><br><span class="line">        data默认类型是Buffer16进制数据,toString()把数据转化为字符串格式</span><br><span class="line">        data = data.toString();</span><br><span class="line">        console.log(data);</span><br><span class="line">	&#125;);</span><br><span class="line">2.node中模块fs 写入文件</span><br><span class="line">	1）导入fs模块</span><br><span class="line">	var fs = require(&apos;fs&apos;);</span><br><span class="line">	2）使用fs的API</span><br><span class="line">	fs.writeFile(形参1，形参2，形参3,形参四);</span><br><span class="line">	形参1:path要读取文件的文件路径</span><br><span class="line">	形参2:要写入的数据</span><br><span class="line">	形参3:可选参数</span><br><span class="line">	形参4:回调函数 callback(err)</span><br><span class="line">	fs.writeFile(&apos;txt.txt&apos;,&apos;我是数据&apos;,function(error)&#123;</span><br><span class="line">        console.log(error);</span><br><span class="line">	&#125;);</span><br><span class="line">	注意:如果文件路径不存在此文件,会自动创建该文件;如果文件存在，会把数据重新写入此文件,会覆盖原来的内容。</span><br></pre></td></tr></table></figure>
<h3 id="2-2-http模块"><a href="#2-2-http模块" class="headerlink" title="2.2   http模块"></a>2.2   http模块</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">http快速搭建服务器</span><br><span class="line">1.导入http模块</span><br><span class="line">var http = require(&apos;http&apos;);</span><br><span class="line">2.创建服务器实例对象</span><br><span class="line">var server = http.createServer();</span><br><span class="line">3.绑定事件，处理请求和响应</span><br><span class="line">.on(&apos;request&apos;,callback(request,response));</span><br><span class="line">&apos;request&apos;:固定语法</span><br><span class="line">回调函数中,request是请求对象(请求路径/请求浏览器信息/系统信息等)，reponse是响应对象</span><br><span class="line">var app = server.on(&apos;request&apos;,function(request,response)&#123;	</span><br><span class="line">	处理请求对象</span><br><span class="line">	返回响应</span><br><span class="line">	console.log(&apos;发送请求&apos;);</span><br><span class="line">	向发起请求的页面写入字符串</span><br><span class="line">	response.write(&apos;sadfjsakjfla&apos;);</span><br><span class="line">	结束当前响应</span><br><span class="line">    response.end(); 如果没有结束响应，前端发起请求，会一直等待服务端返回响应,当超时之后就会。。</span><br><span class="line">&#125;);</span><br><span class="line">4.监听端口号</span><br><span class="line">.listen(端口号，callback());</span><br><span class="line">app.listen(8080,function()&#123;</span><br><span class="line">    console.log(&apos;run it at localhost:12345 in your bower&apos;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">注意：</span><br><span class="line">	在客户端输入localhost:8080,页面上会出现字符</span><br><span class="line">	在node服务端会显示两次&quot;发送请求&quot;,原因是发送了两次请求</span><br><span class="line">		除了自己发送的请求之外，还有浏览器默认的请求，网站的小图标，facvico.ico</span><br></pre></td></tr></table></figure>
<h3 id="2-3-模块特点"><a href="#2-3-模块特点" class="headerlink" title="2.3  模块特点"></a>2.3  模块特点</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">模块：具有独立功能的js文件是一个模块</span><br><span class="line">导出: module.exports.xxx = xxx;</span><br><span class="line">导入模块： require(&quot;文件路径&quot;);</span><br><span class="line"></span><br><span class="line">111.js</span><br><span class="line">var model = require(&apos;./222.js&apos;);</span><br><span class="line">console.log(model);   &#123;num: 10&#125;</span><br><span class="line">console.log(model.num);  10</span><br><span class="line"></span><br><span class="line">222.js</span><br><span class="line">var num = 10;</span><br><span class="line">module.exports.num = num;</span><br></pre></td></tr></table></figure>
<h3 id="2-4-模块系统"><a href="#2-4-模块系统" class="headerlink" title="2.4  模块系统"></a>2.4  模块系统</h3><h4 id="2-4-1-导出模块"><a href="#2-4-1-导出模块" class="headerlink" title="2.4.1  导出模块"></a>2.4.1  导出模块</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">每个js模块都会有一个module.exports对象</span><br><span class="line">module.exports.成员名 = 值;</span><br><span class="line">var add = function(x,y)&#123;</span><br><span class="line">    return x + y;</span><br><span class="line">&#125;</span><br><span class="line">导出</span><br><span class="line">module.exports: 原来是个空对象  &#123;&#125;</span><br><span class="line">module.exports.add = add;</span><br><span class="line">module.exports: &#123;add:function()&#123;&#125; &#125;</span><br><span class="line"></span><br><span class="line">导入</span><br><span class="line">vae model = require(&apos;222.js&apos;);</span><br><span class="line">console.log(model.add(1+5));</span><br></pre></td></tr></table></figure>
<h4 id="2-4-2-导入模块"><a href="#2-4-2-导入模块" class="headerlink" title="2.4.2  导入模块"></a>2.4.2  导入模块</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">require方法的注意事项：</span><br><span class="line">	1.require方法的作用   导入模块并且执行模块中的代码</span><br><span class="line">		var model = require(&quot;./b.js&quot;);</span><br><span class="line">	2.require方法 同步加载模块</span><br><span class="line">	3.加载模块时，如果后面是js文件，可以不写后缀</span><br><span class="line">		var model = require(&quot;./b&quot;);</span><br><span class="line">	4.require方法导入模块时，路径是不能省略的，如果省略了，就会当作是自己模块中的方法，会报错。必须添加./或../</span><br><span class="line">	require(&apos;b&apos;);    报错，找不到b模块</span><br><span class="line">	require(&apos;./b&apos;);</span><br><span class="line">	5.不会重复加载</span><br><span class="line">	var model1 = require(&apos;./b&apos;);</span><br><span class="line">	var model2 = require(&apos;./b&apos;);</span><br><span class="line">	var model3 = require(&apos;./b&apos;);</span><br><span class="line">	就会执行一次结果，不会重复执行,会把第一次执行结果，自动缓存，无论后面导入几次，都不会去执行，为了提高性能，提高内存。</span><br></pre></td></tr></table></figure>
<h3 id="2-5-模块分类及第三方包的使用"><a href="#2-5-模块分类及第三方包的使用" class="headerlink" title="2.5  模块分类及第三方包的使用"></a>2.5  模块分类及第三方包的使用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">1.核心模块</span><br><span class="line">	由module本身自己提供,例如fs文件模块、http模块</span><br><span class="line">2.自己定义的模块</span><br><span class="line">	自己写的.js文件，按照路径来加载，注意./或者../不能省略</span><br><span class="line">3.第三方模块</span><br><span class="line">	1)在npm网站找包（模块）  https://www.npmjs.com/ npmjs官网</span><br><span class="line">		npm -v</span><br><span class="line">		npm init</span><br><span class="line">		npm install 包名：安装包,会多node_modules等很多文件</span><br><span class="line">	2)打开cmd，使用命令npm install 包名 安装</span><br><span class="line">	3)在需要使用的位置，通过require(&apos;第三方包名&apos;)加载包</span><br><span class="line">		var $ = require(&apos;jquery&apos;);</span><br><span class="line">		第三方包的加载方式和核心模块的方式一样。</span><br><span class="line">	4)看文档调用API</span><br></pre></td></tr></table></figure>
<h2 id="3-node命令使用"><a href="#3-node命令使用" class="headerlink" title="3.  node命令使用"></a>3.  node命令使用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm -v 查看npm版本</span><br><span class="line">npm init</span><br><span class="line">npm install 包名：   npm install jquery</span><br></pre></td></tr></table></figure>
<h2 id="4-npm包管理器"><a href="#4-npm包管理器" class="headerlink" title="4.  npm包管理器"></a>4.  npm包管理器</h2><h4 id="4-1-npm是什么"><a href="#4-1-npm是什么" class="headerlink" title="4.1  npm是什么"></a>4.1  npm是什么</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">npm:Node Package Manager</span><br><span class="line">第一次使用npm需要npm init</span><br><span class="line">npm init</span><br><span class="line">	一直回车，在项目的目录下，会生成一个配置文件，package.json文件。</span><br><span class="line">npm install jquery</span><br><span class="line">	1.在目录下,会生成node_module文件，各种第三方包的源码，同时会生成一个package-lock.json文件</span><br><span class="line">	2.修改配置文件package.json的信息，在依赖项里面增加包的名字</span><br></pre></td></tr></table></figure>
<h4 id="4-2-npm常用指令"><a href="#4-2-npm常用指令" class="headerlink" title="4.2  npm常用指令"></a>4.2  npm常用指令</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1.npm init简化 npm init -y   生成package.json</span><br><span class="line">	使用这个指令，不需要一直敲回车，会自动生成默认值</span><br><span class="line">2.npm install 包名|npm i 包名</span><br><span class="line">	会默认下载最新稳定版</span><br><span class="line">3.npm install 包名@版本号    下载指定版本的jquery</span><br><span class="line">	npm install jquery@1.11.2  </span><br><span class="line">	install可以简写为i</span><br><span class="line">4.简写 npm i 包名</span><br><span class="line">5.卸载包 npm uninstall 包名</span><br><span class="line">	简写为 npm un 包名</span><br><span class="line">6.升级/更新包</span><br><span class="line">	npm i npm -g</span><br></pre></td></tr></table></figure>
<h4 id="4-3-package-json文件"><a href="#4-3-package-json文件" class="headerlink" title="4.3  package.json文件"></a>4.3  package.json文件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dependencies 依赖项:当前项目依赖了哪些包</span><br><span class="line">如果只输入npm i会自动的去package.json的dependencies中找依赖的包并下载。</span><br><span class="line">npm i </span><br><span class="line">如果写完项目,需要上传到github,不需要上传node_module文件夹，只需上传package.json文件即可。</span><br></pre></td></tr></table></figure>
<h4 id="4-4-package-lock-json文件"><a href="#4-4-package-lock-json文件" class="headerlink" title="4.4  package-lock.json文件"></a>4.4  package-lock.json文件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.锁定包的版本 更安全</span><br><span class="line">2.锁定包下载地址  第二次下载时速度更快</span><br><span class="line">npm5以下的版本不会自动生成  npm5以上版本会自动生成这个文件</span><br></pre></td></tr></table></figure>
<h4 id="4-5-npm使用总结"><a href="#4-5-npm使用总结" class="headerlink" title="4.5  npm使用总结"></a>4.5  npm使用总结</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">npm init -y      生成package.json文件</span><br><span class="line">npm i 包名@版本号</span><br><span class="line">npm i </span><br><span class="line">npm un 包名   卸载包</span><br><span class="line">node_modules 不需要关心这个文件夹里面的东西，是各个包</span><br><span class="line">package-lock.json:锁定包版本和下载地址</span><br></pre></td></tr></table></figure>
<h2 id="5-ES6介绍"><a href="#5-ES6介绍" class="headerlink" title="5.   ES6介绍"></a>5.   ES6介绍</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://es6.ruanyifeng.com</span><br><span class="line">ECMAScript 6 入门</span><br></pre></td></tr></table></figure>
<h3 id="5-1-ES6关键字-let"><a href="#5-1-ES6关键字-let" class="headerlink" title="5.1  ES6关键字 - let"></a>5.1  ES6关键字 - let</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">var变量：</span><br><span class="line">	变量提升</span><br><span class="line">	全部变量/局部变量</span><br><span class="line">	可以声明同名的变量</span><br><span class="line">	没有块级作用域</span><br><span class="line">let: 用来声明变量</span><br><span class="line">	1.在同一个作用域内不能声明多个同名变量</span><br><span class="line">        let a = 10;</span><br><span class="line">        let a = 20;</span><br><span class="line">        console.log(a);  报错,a已经声明</span><br><span class="line">	2.变量必须先声明再使用，如果直接使用会报错,变量没有被定义，没有变量提升</span><br><span class="line">        console.log(a);</span><br><span class="line">        let a = 10;    变量不会被提升</span><br><span class="line">    3.let声明的变量有块级作用域 &#123;&#125;</span><br><span class="line">    	if(1)&#123;</span><br><span class="line">            let a = 10;</span><br><span class="line">    	&#125;</span><br><span class="line">    	console.log(a);</span><br><span class="line">    4.let声明的变量可以被重新赋值</span><br><span class="line">    	let a= 10;</span><br><span class="line">    	a = 20;</span><br><span class="line">    	console.log(a);    20</span><br></pre></td></tr></table></figure>
<h3 id="5-2-ES6关键字-const"><a href="#5-2-ES6关键字-const" class="headerlink" title="5.2  ES6关键字 - const"></a>5.2  ES6关键字 - const</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">const:用来声明常量</span><br><span class="line">const a = 10;</span><br><span class="line">console.log(a);   10</span><br><span class="line">特点：</span><br><span class="line">	1.声明的同时必须赋值</span><br><span class="line">		const a;    报错，少了一个初始值</span><br><span class="line">	2.const声明的常量不能被重新赋值</span><br><span class="line">		const a = 10;</span><br><span class="line">		a = 20;</span><br><span class="line">	3.其他特点和let一样</span><br><span class="line">		块级作用域 先声明后使用 没有变量提升 在同一个作用域内不能声明多个同名变量</span><br><span class="line">	4.如果不知道变量和常量怎么区分，建议全使用const，如果报错，使用let.</span><br></pre></td></tr></table></figure>
<h3 id="5-3-ES6-解构赋值"><a href="#5-3-ES6-解构赋值" class="headerlink" title="5.3  ES6 解构赋值"></a>5.3  ES6 解构赋值</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">解构赋值：把变量的值提取出来赋值给新变量的过程</span><br></pre></td></tr></table></figure>
<h4 id="5-3-1-数组的解构赋值"><a href="#5-3-1-数组的解构赋值" class="headerlink" title="5.3.1  数组的解构赋值"></a>5.3.1  数组的解构赋值</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">1.var arr = [1,2,3];</span><br><span class="line">var [a,b,c] = arr;</span><br><span class="line">console.log(a,b,c); 	1 2 3</span><br><span class="line">2.var arr = [1,2,3];</span><br><span class="line">var [a,b] = arr;</span><br><span class="line">console.log(a,b); 		1 2</span><br><span class="line">3.var arr = [1,2,3];</span><br><span class="line">var [a, ,c] = arr;</span><br><span class="line">console.log(a,c); 		1 3</span><br><span class="line">4.var arr = [1,2,3];</span><br><span class="line">var [a,b,c,d] = arr;</span><br><span class="line">console.log(a,b,c,d); 		1 2 3 undefined</span><br><span class="line">5.var arr = [1,2,3];</span><br><span class="line">var [a,b,c,d=20] = arr;</span><br><span class="line">console.log(a,b,c,d); 		1 2 3 20</span><br><span class="line">6.交换两个变量的值</span><br><span class="line">var a = 10;</span><br><span class="line">var b = 20;</span><br><span class="line">var [a,b] = [b,a];</span><br><span class="line">console.log(a,b);</span><br></pre></td></tr></table></figure>
<h4 id="5-3-2-对象的解构赋值"><a href="#5-3-2-对象的解构赋值" class="headerlink" title="5.3.2  对象的解构赋值"></a>5.3.2  对象的解构赋值</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">写法一：</span><br><span class="line">1.var per = &#123;</span><br><span class="line">    name: &apos;哈哈哈&apos;，</span><br><span class="line">    age:19</span><br><span class="line">&#125;</span><br><span class="line">var &#123;name,age&#125; = per;</span><br><span class="line">console.log(name,age);   哈哈哈 19</span><br><span class="line">2.对象的结构赋值与参数的顺序无关，但参数名必须一样。</span><br><span class="line">	var &#123;age,name&#125; = per;   正确</span><br><span class="line">	var &#123;xxx,age&#125; = per;    错误</span><br><span class="line">3.写法二：给每个key起一个新名字</span><br><span class="line">var per = &#123;</span><br><span class="line">    name: &apos;小四&apos;,</span><br><span class="line">    age: 20</span><br><span class="line">&#125;;</span><br><span class="line">var &#123;name:newname, age:newage&#125; = per;</span><br><span class="line">console.log(newname,newage);      小四 20</span><br></pre></td></tr></table></figure>
<h2 id="6-ES6字符串新特性"><a href="#6-ES6字符串新特性" class="headerlink" title="6.  ES6字符串新特性"></a>6.  ES6字符串新特性</h2><h3 id="6-1-新增API"><a href="#6-1-新增API" class="headerlink" title="6.1  新增API"></a>6.1  新增API</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1.startsWith()</span><br><span class="line">判断字符串是不是以形参的字符串开始，返回值是boolean类型</span><br><span class="line">var bool = &quot;abc&quot;.startsWith(&apos;ab&apos;);</span><br><span class="line">console.log(bool);       true</span><br><span class="line">2.endsWith();</span><br><span class="line">判断字符串是不是以形参的字符串结尾，返回值是boolean类型</span><br><span class="line">var result = &quot;abc&quot;.endsWith(&apos;c&apos;);</span><br><span class="line">console.log(result);</span><br><span class="line">3.includes();</span><br><span class="line">判断字符串是不是包含形参字符，返回值是boolean类型</span><br><span class="line">var result = &quot;abc&quot;.includes(&apos;b&apos;);</span><br><span class="line">console.log(result);</span><br></pre></td></tr></table></figure>
<h3 id="6-2-模板字符串"><a href="#6-2-模板字符串" class="headerlink" title="6.2  模板字符串"></a>6.2  模板字符串</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1.模板字符串使用的是反引号：    1旁边的符号</span><br><span class="line">2.模板用 $&#123;&#125;来填充</span><br><span class="line">3.支持换行</span><br><span class="line">var per = &#123;</span><br><span class="line">    name: &apos;哈哈哈&apos;,</span><br><span class="line">    age:18</span><br><span class="line">&#125;;</span><br><span class="line">var strHtml = `我的名字是$&#123;per.name&#125;,</span><br><span class="line"></span><br><span class="line">年龄是$&#123;per.age&#125;`;</span><br><span class="line">console.log(strHtml);</span><br></pre></td></tr></table></figure>
<h2 id="7-函数新特性-gt-箭头函数"><a href="#7-函数新特性-gt-箭头函数" class="headerlink" title="7.  函数新特性=&gt;箭头函数"></a>7.  函数新特性=&gt;箭头函数</h2><h3 id="7-1-新特性-gt-形参"><a href="#7-1-新特性-gt-形参" class="headerlink" title="7.1  新特性=&gt;形参"></a>7.1  新特性=&gt;形参</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">1.函数参数可以指定默认值</span><br><span class="line">function fn1()&#123;</span><br><span class="line">    x = x||10;</span><br><span class="line">    return x;</span><br><span class="line">&#125;</span><br><span class="line">console.log(fn1());</span><br><span class="line">2.函数如果给定了实参，则使用实参，否则的话使用默认值。</span><br><span class="line">function fn(x=10)&#123;</span><br><span class="line">    return x;</span><br><span class="line">&#125;</span><br><span class="line">console.log(fn());</span><br><span class="line"></span><br><span class="line">function fn(x=10,y)&#123;</span><br><span class="line">    return x+y;</span><br><span class="line">&#125;</span><br><span class="line">console.log(fn(1,2));     3  </span><br><span class="line">3.函数形参可以和数组解构赋值连用</span><br><span class="line">function fn2([x,y])&#123;</span><br><span class="line">    return x+y;</span><br><span class="line">&#125;</span><br><span class="line">var arr = [10,20];</span><br><span class="line">console.log(fn2(arr));</span><br><span class="line">4.函数参数    剩余参数...rest   ...参数名    相当于arguments</span><br><span class="line">rest 是形参名</span><br><span class="line">...rest  保存函数的剩余参数</span><br><span class="line">rest是数组</span><br><span class="line">...rest 取代arguments</span><br><span class="line"> </span><br><span class="line"> 1)function fn3(x,...rest)&#123;</span><br><span class="line">     console.log(x,rest);</span><br><span class="line"> &#125;</span><br><span class="line"> fn3(1,2,3,5);         1  [2,3,5]</span><br><span class="line"> </span><br><span class="line"> 2)function fn3(...rest)&#123;</span><br><span class="line">     console.log(rest);</span><br><span class="line"> &#125;</span><br><span class="line"> fn3(1,2,3,5);         [1,2,3,5]</span><br><span class="line"> 3)不能这样写</span><br><span class="line"> 剩余参数必须写在参数列表的末尾，不能写在首位</span><br><span class="line"> function fn4(...rest,x)&#123;</span><br><span class="line">     </span><br><span class="line"> &#125;</span><br><span class="line"> fn4(1,2,3,4);</span><br></pre></td></tr></table></figure>
<h3 id="7-2-新特性-gt-箭头函数"><a href="#7-2-新特性-gt-箭头函数" class="headerlink" title="7.2   新特性=&gt;箭头函数"></a>7.2   新特性=&gt;箭头函数</h3><h4 id="7-2-1-箭头函数-gt-形参"><a href="#7-2-1-箭头函数-gt-形参" class="headerlink" title="7.2.1  箭头函数=&gt;形参"></a>7.2.1  箭头函数=&gt;形参</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">var 函数名 = 形参 =&gt; &#123;函数体&#125;</span><br><span class="line">var fn1 = (x) =&gt; &#123;</span><br><span class="line">    return x;</span><br><span class="line">&#125;</span><br><span class="line">console.log(fn1(10));</span><br><span class="line">1.箭头函数=&gt;形参的不同情况</span><br><span class="line">1)没有形参   ()不能省略</span><br><span class="line">    var fn = () =&gt; &#123;</span><br><span class="line">        console.log(10);</span><br><span class="line">    &#125;</span><br><span class="line">    fn();</span><br><span class="line">2)一个形参,括号可以省略</span><br><span class="line">	写法一：</span><br><span class="line">        var fn = (x) =&gt; &#123;</span><br><span class="line">            console.log(x);</span><br><span class="line">        &#125;</span><br><span class="line">        fn(10);</span><br><span class="line">    写法二：一个形参，括号可以省略</span><br><span class="line">    	var fn = x =&gt; &#123;</span><br><span class="line">            console.log(x);</span><br><span class="line">        &#125;</span><br><span class="line">        fn(10);</span><br><span class="line">3)多个形参  ()号不能省略</span><br><span class="line">var fn3 = (x,y) =&gt; &#123;</span><br><span class="line">    console.log(x+y);</span><br><span class="line">&#125;</span><br><span class="line">fn3(10,20);</span><br></pre></td></tr></table></figure>
<h4 id="7-3-2-箭头函数-gt-函数体"><a href="#7-3-2-箭头函数-gt-函数体" class="headerlink" title="7.3.2  箭头函数=&gt;函数体"></a>7.3.2  箭头函数=&gt;函数体</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1.只有一句函数体,&#123;&#125;可以省略,默认返回，相当于前面有return</span><br><span class="line">var fn = (x) =&gt; x;</span><br><span class="line">=&gt; 等价于  var fn = (x) =&gt; &#123;return x;&#125;;</span><br><span class="line">console.log(fn(10));</span><br><span class="line">2.函数体有多行,&#123;&#125;不能省略</span><br><span class="line">var fn = (x) =&gt; &#123;</span><br><span class="line">    x++;</span><br><span class="line">    return x;</span><br><span class="line">&#125;</span><br><span class="line">var result = fn(10);</span><br><span class="line">console.log(result);</span><br></pre></td></tr></table></figure>
<h4 id="7-3-3-箭头函数-gt-this问题"><a href="#7-3-3-箭头函数-gt-this问题" class="headerlink" title="7.3.3  箭头函数=&gt;this问题"></a>7.3.3  箭头函数=&gt;this问题</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">1.对象中的this</span><br><span class="line">var per = &#123;</span><br><span class="line">    name: &apos;哈哈哈&apos;,</span><br><span class="line">    sayHi: function()&#123;</span><br><span class="line">        setTimeout(function()&#123;</span><br><span class="line">            console.log(this.name);    //undefined</span><br><span class="line">        &#125;,1000);</span><br><span class="line">    &#125;</span><br><span class="line">    改为箭头函数</span><br><span class="line">    sayHi: () =&gt; &#123;</span><br><span class="line">        setTimeout(function()&#123;</span><br><span class="line">            console.log(this.name);     //undefined</span><br><span class="line">        &#125;,1000);</span><br><span class="line">    &#125;</span><br><span class="line">    改为箭头函数,箭头函数中没有自己的this</span><br><span class="line">    sayHi: () =&gt; &#123; </span><br><span class="line">   		console.log(this);     &#123;&#125;  空对象</span><br><span class="line">        setTimeout(() =&gt; &#123;</span><br><span class="line">        	console.log(this);   &#123;&#125;空对象                           ？？？？？？？？？？？？？？？？？？</span><br><span class="line">            console.log(this.name);     //undefined</span><br><span class="line">        &#125;,1000);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">2.箭头函数</span><br><span class="line">var per = &#123;</span><br><span class="line">    name: &apos;哈哈哈&apos;,</span><br><span class="line">    // 改为箭头函数,箭头函数中没有自己的this</span><br><span class="line">    sayHi: function() &#123;</span><br><span class="line">    	此时this是per对象</span><br><span class="line">    	上级作用域:当前对象</span><br><span class="line">        setTimeout(() =&gt; &#123;</span><br><span class="line">            console.log(this.name);     //哈哈哈</span><br><span class="line">        &#125;,1000);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">per.sayHi();</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">注意：</span><br><span class="line">	1.箭头函数中没有自己的this</span><br><span class="line">	2.会逐层向上一级作用域找this</span><br><span class="line">	3.箭头函数不可以用于构造函数，因为没有this</span><br><span class="line">	4.箭头函数通常用于匿名函数，在写匿名函数时，最好变成箭头函数，好处是：不需要关心this的指向变来变去，会自动找this的产生效应的位置。</span><br><span class="line">		定时器</span><br></pre></td></tr></table></figure>
<h2 id="8-导出模块成员的几种写法"><a href="#8-导出模块成员的几种写法" class="headerlink" title="8.  导出模块成员的几种写法"></a>8.  导出模块成员的几种写法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">写法1: 导出多个成员</span><br><span class="line">b.js</span><br><span class="line">var num = 100;</span><br><span class="line">var add = function()&#123;&#125;</span><br><span class="line">module.exports.num = num;</span><br><span class="line">module.exports.add = add;</span><br><span class="line"></span><br><span class="line">a.js</span><br><span class="line">var model = require(&apos;./b.js&apos;);</span><br><span class="line">console.log(model);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">写法2：导出多个成员</span><br><span class="line">exports相当于module.exports别名</span><br><span class="line">var num = 100;</span><br><span class="line">var add = function()&#123;&#125;</span><br><span class="line">console.log(exports);   //&#123;&#125;</span><br><span class="line">exports.num = num;</span><br><span class="line">exports.add = add;</span><br><span class="line">console.log(exports);   &#123;num:100,add:fun&#125;</span><br><span class="line">console.log(module.exports === exports);  true</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">写法3:导出一个成员</span><br><span class="line">var num = 100;</span><br><span class="line">var add = function()&#123;&#125;</span><br><span class="line">module.exports = &#123;</span><br><span class="line">	num: num,</span><br><span class="line">	add: add</span><br><span class="line">&#125;;</span><br><span class="line">module.exports = 100;</span><br><span class="line">如果只导出一个成员，不能使用exports,使用的是module.exports。</span><br><span class="line">如果使用exports导出一个成员，在另一个页面导入后，为&#123;&#125;空对象。</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">每个模块末尾默认导出的是module.exports；</span><br><span class="line">return module.exports;</span><br><span class="line">如果只导出一个成员，不能使用exports。</span><br><span class="line">解释：</span><br><span class="line">	原来 module.exports = &#123;&#125;;</span><br><span class="line">		module.exports = exports;</span><br><span class="line">		exports = &#123;&#125;;</span><br><span class="line">		如果只导出一个成员,那么</span><br><span class="line">		exports = &#123;</span><br><span class="line">            name:&apos;&apos;,</span><br><span class="line">            fn:function()&#123;&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">		相当于给exports重新赋值,改变this的指向</span><br></pre></td></tr></table></figure>
<p><img src="E:\黑马\Node\导出模块的emodule.exports.png" alt="导出模块的emodule.exports"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.导出多个成员时 module.exports.成员= 值</span><br><span class="line">2.导出多个成员时 exports.成员= 值</span><br><span class="line">3.导出一个成员时 module.exports = 成员</span><br><span class="line">每个模块最终导出的是module.exports，而不是exports</span><br><span class="line">当导出一个成员时,使用exports不可以。</span><br></pre></td></tr></table></figure>
<h2 id="9-express"><a href="#9-express" class="headerlink" title="9. express"></a>9. express</h2><h3 id="9-1-express介绍及安装"><a href="#9-1-express介绍及安装" class="headerlink" title="9.1  express介绍及安装"></a>9.1  express介绍及安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">express是基于node.js平台开发出来的一个框架。</span><br><span class="line">可以搭建服务器</span><br><span class="line">express官方文档： expressjs.com</span><br><span class="line">中文网: www.expressjs.com.cn</span><br><span class="line">安装express</span><br><span class="line">	npm i express</span><br><span class="line">	package.json：文件中会多一个express配置项</span><br><span class="line">使用express需要先导入</span><br><span class="line">	var obj = require(&apos;express&apos;);</span><br></pre></td></tr></table></figure>
<h3 id="9-2-体验express代码"><a href="#9-2-体验express代码" class="headerlink" title="9.2  体验express代码"></a>9.2  体验express代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">使用express提供的API快速搭建服务器</span><br><span class="line">1.使用node</span><br><span class="line">2.使用express</span><br><span class="line">	1)导包</span><br><span class="line">	const express = require(&apos;express&apos;);</span><br><span class="line">	express是一个对象，同时自带一个方法，express中的所有方法，都需要express方法的返回值去调用。</span><br><span class="line">	2）实例化app</span><br><span class="line">	const app = express();</span><br><span class="line">	3)配置路由</span><br><span class="line">	监听客户端请求 请求方式是get  请求标识是/ 服务端要做处理</span><br><span class="line">	app.get(请求标识，callback(req,res));</span><br><span class="line">	app.get(&apos;/&apos;,function(req,res)&#123;</span><br><span class="line">	    res.write(&quot;asfsdaf----&quot;);</span><br><span class="line">        res.end();</span><br><span class="line">	&#125;);</span><br><span class="line">	4)监听端口</span><br><span class="line">	app.listen(端口,函数);</span><br><span class="line">	app.listen(12345，function()&#123;</span><br><span class="line">        console.log(&quot;run it=----&quot;);</span><br><span class="line">	&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="9-3-express路由"><a href="#9-3-express路由" class="headerlink" title="9.3  express路由"></a>9.3  express路由</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">路由配置|路由分发：根据客户端不同的请求（请求方式、请求标识），服务端去做不同的处理</span><br><span class="line">app.get(&apos;/&apos;,(req,res)=&gt;&#123;</span><br><span class="line">    res.write(&apos;dfd&apos;);</span><br><span class="line">    res.end();</span><br><span class="line">&#125;);</span><br><span class="line">app.get(&apos;/login&apos;,(req,res)=&gt;&#123;</span><br><span class="line">    res.write(&apos;sdafsaf&apos;);</span><br><span class="line">    res.end();</span><br><span class="line">&#125;);</span><br><span class="line">app.post(&apos;login&apos;,(req,res)=&gt;&#123;</span><br><span class="line">    res.write(&apos;ssdafafsaf&apos;);</span><br><span class="line">    res.end();</span><br><span class="line">&#125;);</span><br><span class="line">注意：</span><br><span class="line">res.write(&apos;ssdafafsaf&apos;);</span><br><span class="line">res.end();</span><br><span class="line">这两个方法可以简化为</span><br><span class="line">res.send(&apos;sfad&apos;);</span><br></pre></td></tr></table></figure>
<h3 id="9-4-返回字符串到页面"><a href="#9-4-返回字符串到页面" class="headerlink" title="9.4  返回字符串到页面"></a>9.4  返回字符串到页面</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1)导包</span><br><span class="line">const express = require(&apos;express&apos;);</span><br><span class="line">2）实例化</span><br><span class="line">const app = express();</span><br><span class="line">3）配置路由</span><br><span class="line">app.get(&apos;/&apos;,(req,res) =&gt; &#123;</span><br><span class="line">    res.send(&apos;&lt;p&gt;我是p标签&lt;/p&gt;&apos;);</span><br><span class="line">&#125;);</span><br><span class="line">4）监听端口</span><br><span class="line">app.listen(12345,()=&gt;&#123;</span><br><span class="line">    console.log(&apos;run it as localhost&apos;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">const fs = require(&apos;fs&apos;);</span><br><span class="line">const express = require(&apos;express);</span><br><span class="line">const app = express();</span><br><span class="line">app.get(&apos;/&apos;,(req,res) =&gt; &#123;</span><br><span class="line">	读取页面文件 编码格式</span><br><span class="line">    fs.readFile(&apos;./login.html&apos;,(err,data) =&gt; &#123;</span><br><span class="line">        把十六进制转化为字符串</span><br><span class="line">        data = data.toString();</span><br><span class="line">        res.send(data);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line">app.listen(12345,() =&gt; &#123;</span><br><span class="line">    console.log(&apos;run it as localost&apos;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">如果不使用toString()方法，则需要在参数中添加一个utf8格式</span><br><span class="line">fs.readFile(&apos;./login.html&apos;, &quot;utf8&quot;, (err,data) =&gt; &#123;</span><br><span class="line">    res.send(data);</span><br><span class="line">&#125;）</span><br></pre></td></tr></table></figure>
<h2 id="10-留言板案例"><a href="#10-留言板案例" class="headerlink" title="10.  留言板案例"></a>10.  留言板案例</h2><h3 id="10-1-案例说明和准备"><a href="#10-1-案例说明和准备" class="headerlink" title="10.1 案例说明和准备"></a>10.1 案例说明和准备</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">目的：</span><br><span class="line">	练习express中的常用API</span><br><span class="line">	熟悉ES6中的新特性: const 箭头函数()=&gt;&#123;&#125;</span><br><span class="line">	使用常用的第三方包,如mysql express-art-template</span><br><span class="line">介绍：</span><br><span class="line">	留言板列表页</span><br><span class="line">	新增页面</span><br></pre></td></tr></table></figure>
<h3 id="10-2-搭建服务器"><a href="#10-2-搭建服务器" class="headerlink" title="10.2  搭建服务器"></a>10.2  搭建服务器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">1.创建一个空文件夹</span><br><span class="line">	先初始化文件: npm init -y</span><br><span class="line">	安装express包: npm i express</span><br><span class="line">2.新建一个js文件</span><br><span class="line">app.js</span><br><span class="line">// 搭建服务器</span><br><span class="line">// 导包</span><br><span class="line">const express = require(&apos;express&apos;);</span><br><span class="line">const app = express();</span><br><span class="line">// 配置路由</span><br><span class="line">app.get(&apos;/&apos;,(req,res) =&gt; &#123;</span><br><span class="line">	// res.write(&apos;sfafsaklf&apos;);</span><br><span class="line">	// res.end();</span><br><span class="line">	res.send(&apos;/////&apos;);</span><br><span class="line">&#125;);</span><br><span class="line">// 监听端口</span><br><span class="line">app.listen(12345,() =&gt; &#123;</span><br><span class="line">	console.log(&apos;run it as localhost:12345&apos;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="10-3-服务端渲染列表页"><a href="#10-3-服务端渲染列表页" class="headerlink" title="10.3  服务端渲染列表页"></a>10.3  服务端渲染列表页</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">app.js</span><br><span class="line">// 搭建服务器</span><br><span class="line">// 导包</span><br><span class="line">const fs = require(&apos;fs&apos;);</span><br><span class="line">const express = require(&apos;express&apos;);</span><br><span class="line">const app = express();</span><br><span class="line">// 配置路由</span><br><span class="line">app.get(&apos;/&apos;,(req,res) =&gt; &#123;</span><br><span class="line">	// res.write(&apos;sfafsaklf&apos;);</span><br><span class="line">	// res.end();</span><br><span class="line">	fs.readFile(&apos;./index.html&apos;,&quot;utf8&quot;,(error,data) =&gt; &#123;</span><br><span class="line">		res.send(data);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;);</span><br><span class="line">// 监听端口</span><br><span class="line">app.listen(12345,() =&gt; &#123;</span><br><span class="line">	console.log(&apos;run it as localhost:12345&apos;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">index.html</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;留言板列表&lt;/title&gt;</span><br><span class="line">	&lt;style&gt;</span><br><span class="line">		* &#123;</span><br><span class="line">			margin: 0;</span><br><span class="line">			padding: 0;</span><br><span class="line">		&#125;</span><br><span class="line">		a &#123;</span><br><span class="line">			display: block;</span><br><span class="line">			margin: 20px;</span><br><span class="line">		&#125;</span><br><span class="line">		ul &#123;</span><br><span class="line">			margin-left: 20px;</span><br><span class="line">			list-style: none;</span><br><span class="line">		&#125;</span><br><span class="line">		li &#123;</span><br><span class="line">			height: 30px;</span><br><span class="line">			line-height: 30px;</span><br><span class="line">		&#125;</span><br><span class="line">		.name &#123;</span><br><span class="line">			padding: 0 10px;</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;h1&gt;留言板案例&lt;/h1&gt;</span><br><span class="line">	&lt;a href=&quot;/publish&quot;&gt;发布留言&lt;/a&gt;</span><br><span class="line">	&lt;ul&gt;</span><br><span class="line">		&lt;li&gt;&lt;span class=&apos;name&apos;&gt;小宝&lt;/span&gt;&lt;span&gt;hahhhhahhahh&lt;/span&gt;&lt;/li&gt;</span><br><span class="line">		&lt;li&gt;&lt;span class=&apos;name&apos;&gt;小宝&lt;/span&gt;&lt;span&gt;hahhhhahhahh&lt;/span&gt;&lt;/li&gt;</span><br><span class="line">		&lt;li&gt;&lt;span class=&apos;name&apos;&gt;小宝&lt;/span&gt;&lt;span&gt;hahhhhahhahh&lt;/span&gt;&lt;/li&gt;</span><br><span class="line">		&lt;li&gt;&lt;span class=&apos;name&apos;&gt;小宝&lt;/span&gt;&lt;span&gt;hahhhhahhahh&lt;/span&gt;&lt;/li&gt;</span><br><span class="line">		&lt;li&gt;&lt;span class=&apos;name&apos;&gt;小宝&lt;/span&gt;&lt;span&gt;hahhhhahhahh&lt;/span&gt;&lt;/li&gt;</span><br><span class="line">	&lt;/ul&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h3 id="10-4-模板引擎渲染页面"><a href="#10-4-模板引擎渲染页面" class="headerlink" title="10.4  模板引擎渲染页面"></a>10.4  模板引擎渲染页面</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">1.使用假数据</span><br><span class="line">操作数据库=&gt;获取数据</span><br><span class="line">	const list = &#123;</span><br><span class="line">        items: [&#123;</span><br><span class="line">            name: &apos;aaa&apos;,</span><br><span class="line">            eamil: &apos;aaa@aa.com&apos;,</span><br><span class="line">            content: &apos;aaaaaaaaaaaa&apos;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            name: &apos;aaa&apos;,</span><br><span class="line">            eamil: &apos;aaa@aa.com&apos;,</span><br><span class="line">            content: &apos;aaaaaaaaaaaa&apos;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            name: &apos;aaa&apos;,</span><br><span class="line">            eamil: &apos;aaa@aa.com&apos;,</span><br><span class="line">            content: &apos;aaaaaaaaaaaa&apos;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            name: &apos;aaa&apos;,</span><br><span class="line">            eamil: &apos;aaa@aa.com&apos;,</span><br><span class="line">            content: &apos;aaaaaaaaaaaa&apos;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            name: &apos;aaa&apos;,</span><br><span class="line">            eamil: &apos;aaa@aa.com&apos;,</span><br><span class="line">            content: &apos;aaaaaaaaaaaa&apos;</span><br><span class="line">        &#125;]</span><br><span class="line">	&#125;</span><br><span class="line">2.下载模板引擎</span><br><span class="line">	官方文档: http://aui.github.io/art-template/zh-cn/docs/syntax.html</span><br><span class="line">	npm install art-template</span><br><span class="line">	下载包之后,在package.json文件中配置项中会增加art-template</span><br><span class="line">	1)导包</span><br><span class="line">	const template = require(&apos;art-template&apos;);</span><br><span class="line">	2)使用方法</span><br><span class="line">	在渲染页面的同时把数据添加进去</span><br><span class="line">	template.render(source,data,options);</span><br><span class="line">	source:页面字符串</span><br><span class="line">	data:该页面要使用的数据   要求类型是：&#123;&#125;对象</span><br><span class="line">	options:可选项</span><br><span class="line">	返回值: 携带了数据的页面字符串</span><br><span class="line">	3）配置路由</span><br><span class="line">	app.get(&apos;/&apos;,(req,res) =&gt; &#123;</span><br><span class="line">        // res.write(&apos;sfafsaklf&apos;);</span><br><span class="line">        // res.end();</span><br><span class="line">        fs.readFile(&apos;./index.html&apos;,&quot;utf8&quot;,(error,data) =&gt; &#123;</span><br><span class="line">            模板引擎</span><br><span class="line">            var strHtmlWithData = template.render(data,&#123;</span><br><span class="line">                items: list.items</span><br><span class="line">            &#125;);</span><br><span class="line">            res.send(strHtmlWithData);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">    4）渲染页面</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">		&#123;&#123;each items&#125;&#125;</span><br><span class="line">			&lt;li&gt;&lt;span class=&apos;name&apos;&gt;&#123;&#123;$value.name&#125;&#125;&lt;/span&gt;&lt;span&gt;&#123;&#123;$value.content&#125;&#125;&lt;/span&gt;&lt;/li&gt;</span><br><span class="line">		&#123;&#123;/each&#125;&#125;</span><br><span class="line">	&lt;/ul&gt;</span><br></pre></td></tr></table></figure>
<h3 id="10-5-编辑页面搭建"><a href="#10-5-编辑页面搭建" class="headerlink" title="10.5  编辑页面搭建"></a>10.5  编辑页面搭建</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">publish.html</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;编辑页面&lt;/title&gt;</span><br><span class="line">	&lt;style&gt;</span><br><span class="line">		label &#123;</span><br><span class="line">			display: inline-block;</span><br><span class="line">			width: 80px;</span><br><span class="line">			text-align: right;</span><br><span class="line">		&#125;</span><br><span class="line">		.box &#123;</span><br><span class="line">			margin-top: 10px;</span><br><span class="line">		&#125;</span><br><span class="line">		#btn &#123;</span><br><span class="line">			margin-left: 85px;</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;h1&gt;添加留言&lt;/h1&gt;</span><br><span class="line">	&lt;form action=&quot;/publish&quot;&gt;</span><br><span class="line">		&lt;div class=&quot;box&quot;&gt;</span><br><span class="line">			&lt;label for=&quot;&quot;&gt;名字:&lt;/label&gt;</span><br><span class="line">			&lt;input type=&quot;text&quot; name=&quot;name&quot; value=&apos;名字&apos;&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">		&lt;div class=&quot;box&quot;&gt;</span><br><span class="line">			&lt;label for=&quot;&quot;&gt;邮箱:&lt;/label&gt;</span><br><span class="line">			&lt;input type=&quot;url&quot; name=&quot;email&quot; value=&apos;邮箱&apos;&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">		&lt;div class=&quot;box&quot;&gt;</span><br><span class="line">			&lt;label for=&quot;&quot;&gt;评论内容:&lt;/label&gt;</span><br><span class="line">			&lt;textarea name=&quot;content&quot; id=&quot;&quot; cols=&quot;30&quot; rows=&quot;10&quot;&gt;&lt;/textarea&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">		&lt;div&gt;</span><br><span class="line">			&lt;input type=&quot;submit&quot; value=&quot;提交&quot; id=&apos;btn&apos;&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line">	&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h3 id="10-6-服务端渲染编辑页面"><a href="#10-6-服务端渲染编辑页面" class="headerlink" title="10.6  服务端渲染编辑页面"></a>10.6  服务端渲染编辑页面</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1.列表页 &lt;a href=&apos;/publish&apos;&gt;&lt;/a&gt;</span><br><span class="line">2.http.js文件中</span><br><span class="line">	配置路由</span><br><span class="line">	app.get(&apos;/publish&apos;,(req,res) =&gt; &#123;</span><br><span class="line">        fs.readFile(&apos;./publish.html&apos;,&quot;utf8&quot;,(error,data) =&gt; &#123;</span><br><span class="line">            res.send(data);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>
<h3 id="10-7-第三方包-express-art-template"><a href="#10-7-第三方包-express-art-template" class="headerlink" title="10.7  第三方包-express-art-template"></a>10.7  第三方包-express-art-template</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">使用第三方包简化配置路由的代码: express-art-template</span><br><span class="line">1.安装包: npm i express-art-template</span><br><span class="line">	使用express-art-template包时,需要下载包art-template，依赖此包</span><br><span class="line">	npm install --save art-template</span><br><span class="line">	npm install --save express-art-template</span><br><span class="line">2.配置express-art-template包并且导入包</span><br><span class="line">	当渲染后缀是html的文件时  使用express-art-template进行渲染</span><br><span class="line">	结果是res对象增加一个方法render()</span><br><span class="line">	res.render();原来没有这个方法，是配置并引入express-art-template包之后增加的方法</span><br><span class="line">	app.engine(&apos;html&apos;,require(&apos;express-art-template&apos;));</span><br><span class="line">3.配置路由简化代码</span><br><span class="line">app.get(&apos;/&apos;, function (req, res) &#123;</span><br><span class="line">	res.render(参数1，参数2);</span><br><span class="line">	参数1：要渲染的文件的名字  自动的去文件夹名为views的下面去找文件后缀为html的文件，</span><br><span class="line">	文件夹名必须为views,不能任意命名</span><br><span class="line">	参数2：类型为对象 该文件要用的数据</span><br><span class="line">    res.render(&apos;index.html&apos;, &#123;</span><br><span class="line">        items: list.items</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line">4. res.render()方法内部做的事</span><br><span class="line">	1)fs读文件</span><br><span class="line">	2)使用模板引擎处理数据</span><br><span class="line">	3)发送页面字符串并且结束响应</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">简化后的代码</span><br><span class="line">// 搭建服务器</span><br><span class="line">// 导包</span><br><span class="line">const fs = require(&apos;fs&apos;);</span><br><span class="line">const express = require(&apos;express&apos;);</span><br><span class="line">const template = require(&apos;art-template&apos;);</span><br><span class="line">const app = express();</span><br><span class="line">// 第一步：配置并导入包</span><br><span class="line">// 结果是为res对象添加了一个方法 render();</span><br><span class="line">app.engine(&apos;html&apos;,require(&apos;express-art-template&apos;));</span><br><span class="line">const list = &#123;</span><br><span class="line">	items: [&#123;</span><br><span class="line">		name: &apos;aaa&apos;,</span><br><span class="line">		eamil: &apos;aaa@aaa.com&apos;,</span><br><span class="line">		content: &apos;aaaaaaaaa&apos;</span><br><span class="line">	&#125;,&#123;</span><br><span class="line">		name: &apos;aaa&apos;,</span><br><span class="line">		eamil: &apos;aaa@aaa.com&apos;,</span><br><span class="line">		content: &apos;aaaaaaaaa&apos;</span><br><span class="line">	&#125;]</span><br><span class="line">&#125;;</span><br><span class="line">// 配置路由</span><br><span class="line">app.get(&apos;/&apos;,(req,res) =&gt; &#123;</span><br><span class="line">	res.render(&apos;index.html&apos;,&#123;</span><br><span class="line">		items: list.items</span><br><span class="line">	&#125;);</span><br><span class="line">	// fs.readFile(&apos;./index.html&apos;,&quot;utf8&quot;,(error,data) =&gt; &#123;</span><br><span class="line">	// 	var strHtmlWithData = template.render(data,&#123;</span><br><span class="line">	// 		items: list.items</span><br><span class="line">	// 	&#125;);</span><br><span class="line">	// 	res.send(strHtmlWithData);</span><br><span class="line">	// &#125;);</span><br><span class="line">&#125;);</span><br><span class="line">app.get(&apos;/publish&apos;,(req,res) =&gt; &#123;</span><br><span class="line">	res.render(&apos;publish.html&apos;);</span><br><span class="line">	// fs.readFile(&apos;./publish.html&apos;,&quot;utf8&quot;,(error,data) =&gt; &#123;</span><br><span class="line">	// 	res.send(data);</span><br><span class="line">	// &#125;);</span><br><span class="line">&#125;);</span><br><span class="line">// 监听端口</span><br><span class="line">app.listen(12345,() =&gt; &#123;</span><br><span class="line">	console.log(&apos;run it as localhost:12345&apos;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="10-8-获取表单post请求的表单数据req"><a href="#10-8-获取表单post请求的表单数据req" class="headerlink" title="10.8  获取表单post请求的表单数据req"></a>10.8  获取表单post请求的表单数据req</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">增加第三方包给req请求对象增加一个body属性来获取表单数据</span><br><span class="line">// post请求的数据 隐藏在请求的请求体中</span><br><span class="line">// 通过第三方包body-parser 给req增加属性 body -&gt; 请求体数据</span><br><span class="line">// req.body就是post请求中的表单数据 &#123;&#125;</span><br><span class="line">1.安装包</span><br><span class="line">	npm i body-parser</span><br><span class="line">2.导包</span><br><span class="line">	var bodyParser = require(&apos;body-parser&apos;);</span><br><span class="line">3.配置body-parser</span><br><span class="line">    app.use(bodyParser.urlencoded(&#123; extended: false &#125;));</span><br><span class="line">    app.use(bodyParser.json());</span><br><span class="line">4.获取表单数据</span><br><span class="line">	app.post(&apos;/publish&apos;,(req,res) =&gt; &#123;</span><br><span class="line">		req.body就是post请求中的表单数据</span><br><span class="line">         console.log(req.body);</span><br><span class="line">	    //&#123; name: &apos;dg&apos;, email: &apos;saf&apos;, content: &apos;safdafafs&apos; &#125;</span><br><span class="line">	&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">表单</span><br><span class="line">&lt;form action=&quot;/publish&quot; method=&apos;post&apos;&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">// 搭建服务器</span><br><span class="line">// 导包</span><br><span class="line">const fs = require(&apos;fs&apos;);</span><br><span class="line">const express = require(&apos;express&apos;);</span><br><span class="line">const template = require(&apos;art-template&apos;);</span><br><span class="line">// 给req增加一个body属性来获取表单中的数据</span><br><span class="line">const bodyParser = require(&apos;body-parser&apos;);</span><br><span class="line">const app = express();</span><br><span class="line">// 配置body-parser</span><br><span class="line">app.use(bodyParser.urlencoded(&#123; extended: false &#125;));</span><br><span class="line">app.use(bodyParser.json());</span><br><span class="line">// 第一步：配置并导入包</span><br><span class="line">// 结果是为res对象添加了一个方法 render();</span><br><span class="line">app.engine(&apos;html&apos;,require(&apos;express-art-template&apos;));</span><br><span class="line">const list = &#123;</span><br><span class="line">	items: [&#123;</span><br><span class="line">		name: &apos;aaa&apos;,</span><br><span class="line">		eamil: &apos;aaa@aaa.com&apos;,</span><br><span class="line">		content: &apos;aaaaaaaaa&apos;</span><br><span class="line">	&#125;,&#123;</span><br><span class="line">		name: &apos;aaa&apos;,</span><br><span class="line">		eamil: &apos;aaa@aaa.com&apos;,</span><br><span class="line">		content: &apos;aaaaaaaaa&apos;</span><br><span class="line">	&#125;]</span><br><span class="line">&#125;;</span><br><span class="line">// 配置路由</span><br><span class="line">app.get(&apos;/&apos;,(req,res) =&gt; &#123;</span><br><span class="line">	res.render(&apos;index.html&apos;,&#123;</span><br><span class="line">		items: list.items</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;);</span><br><span class="line">app.get(&apos;/publish&apos;,(req,res) =&gt; &#123;</span><br><span class="line">	res.render(&apos;publish.html&apos;);</span><br><span class="line">&#125;);</span><br><span class="line">app.post(&apos;/publish&apos;,(req,res) =&gt; &#123;</span><br><span class="line">	console.log(req.body);</span><br><span class="line">	//获取表单请求体中的数据</span><br><span class="line">&#125;);</span><br><span class="line">// 监听端口</span><br><span class="line">app.listen(12345,() =&gt; &#123;</span><br><span class="line">	console.log(&apos;run it as localhost:12345&apos;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="10-9-编辑页—更新数据"><a href="#10-9-编辑页—更新数据" class="headerlink" title="10.9  编辑页—更新数据"></a>10.9  编辑页—更新数据</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">获取表单数据 =&gt; post请求 =&gt; 请求体里 =&gt; body-parser =&gt; req.body =&gt; &#123;&#125;</span><br><span class="line">获取到表单数据 =&gt; 将数据添加到items对象中</span><br><span class="line">app.post(&apos;/publish&apos;,(req,res) =&gt; &#123;</span><br><span class="line">	// console.log(req.body);</span><br><span class="line">	const body = req.body;</span><br><span class="line">	list.items.unshift(body);</span><br><span class="line">	console.log(list);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="10-10-编辑页—重定向到列表页"><a href="#10-10-编辑页—重定向到列表页" class="headerlink" title="10.10  编辑页—重定向到列表页"></a>10.10  编辑页—重定向到列表页</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">在list数组数据变化之后，回到列表页</span><br><span class="line">将/publish的标识改为/</span><br><span class="line">由于服务端没有BOM和DOM,所以不能使用window.location.href = &apos;/&apos;;</span><br><span class="line">使用服务端重定向的方法,将/publish的标识改为/,跳转到列表页</span><br><span class="line">res.redirect(&quot;/&quot;); 根据/表示发送的请求，重新渲染页面</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">app.post(&apos;/publish&apos;,(req,res) =&gt; &#123;</span><br><span class="line">	// console.log(req.body);</span><br><span class="line">	const body = req.body;</span><br><span class="line">	list.items.unshift(body);</span><br><span class="line">	页面重定向</span><br><span class="line">	res.redirect(&quot;/&quot;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="11-数据持久化-本地文件"><a href="#11-数据持久化-本地文件" class="headerlink" title="11.  数据持久化-本地文件"></a>11.  数据持久化-本地文件</h2><h3 id="11-1-数据持久化-本地文件-列表数据"><a href="#11-1-数据持久化-本地文件-列表数据" class="headerlink" title="11.1  数据持久化-本地文件-列表数据"></a>11.1  数据持久化-本地文件-列表数据</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">每次重新启动服务器，之前添加的数据都没有了</span><br><span class="line">数据持久化</span><br><span class="line">1.本地文件保存数据</span><br><span class="line">2.操作数据库</span><br><span class="line">步骤:</span><br><span class="line">	1.把数据保存在data.json文件中</span><br><span class="line">	2.读取文件中的数据,把字符串转化为json对象</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">data.json</span><br><span class="line">json文件中，key和value都必须使用双引号包裹</span><br><span class="line">&#123;</span><br><span class="line">	&quot;items&quot;: [</span><br><span class="line">		&#123;</span><br><span class="line">			&quot;name&quot;: &quot;aaa&quot;,</span><br><span class="line">			&quot;eamil&quot;: &quot;aaa@aaa.com&quot;,</span><br><span class="line">			&quot;content&quot;: &quot;aaaaaaaaa&quot;</span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">			&quot;name&quot;: &quot;aaa&quot;,</span><br><span class="line">			&quot;eamil&quot;: &quot;aaa@aaa.com&quot;,</span><br><span class="line">			&quot;content&quot;: &quot;aaaaaaaaa&quot;</span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">			&quot;name&quot;: &quot;aaa&quot;,</span><br><span class="line">			&quot;eamil&quot;: &quot;aaa@aaa.com&quot;,</span><br><span class="line">			&quot;content&quot;: &quot;aaaaaaaaa&quot;</span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">			&quot;name&quot;: &quot;aaa&quot;,</span><br><span class="line">			&quot;eamil&quot;: &quot;aaa@aaa.com&quot;,</span><br><span class="line">			&quot;content&quot;: &quot;aaaaaaaaa&quot;</span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">			&quot;name&quot;: &quot;aaa&quot;,</span><br><span class="line">			&quot;eamil&quot;: &quot;aaa@aaa.com&quot;,</span><br><span class="line">			&quot;content&quot;: &quot;aaaaaaaaa&quot;</span><br><span class="line">		&#125;</span><br><span class="line">	]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">http.js</span><br><span class="line">app.get(&apos;/&apos;,(req,res) =&gt; &#123;</span><br><span class="line">	// 从文件中读取数据</span><br><span class="line">	fs.readFile(&apos;./data.json&apos;,&apos;utf8&apos;,(error, data) =&gt; &#123;</span><br><span class="line">		// 从文件中读取出来的是json字符串</span><br><span class="line">		// JSON.parse(data);    将字符串转化为json对象</span><br><span class="line">		data = JSON.parse(data);</span><br><span class="line">		res.render(&apos;index.html&apos;,&#123;</span><br><span class="line">			items: data.items</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="11-2-数据持久化-本地文件-编辑数据"><a href="#11-2-数据持久化-本地文件-编辑数据" class="headerlink" title="11.2  数据持久化-本地文件-编辑数据"></a>11.2  数据持久化-本地文件-编辑数据</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">如果要写入数据，先把文件中的数据拿出来</span><br><span class="line">app.post(&apos;/publish&apos;,(req,res) =&gt; &#123;</span><br><span class="line">    通过第三方包获取表单数据 body-parser</span><br><span class="line">    0.获取表单数据</span><br><span class="line">    const body = req.body;</span><br><span class="line">    1.读文件</span><br><span class="line">    fs.readFile(&apos;./data.json&apos;,&apos;utf8&apos;,(error,data) =&gt; &#123;</span><br><span class="line">    	2.把读取文件中的字符串转化为json对象</span><br><span class="line">        data = JSON.parse(data);</span><br><span class="line">        3.把获取的表单的数据添加到json对象中</span><br><span class="line">        data.items.unshift(body);</span><br><span class="line">        5.将json对象转化为json字符串</span><br><span class="line">        data = JSON.stringify(data);</span><br><span class="line">        4.写入文件</span><br><span class="line">        参数: 文件名字 要写入的数据（类型是字符串）  回调函数</span><br><span class="line">        fs.writeFile(&apos;./data.json&apos;,data,(error) =&gt; &#123;</span><br><span class="line">            6.页面重定向</span><br><span class="line">            res.redirect(&apos;/&apos;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="11-3-请求样式文件的处理"><a href="#11-3-请求样式文件的处理" class="headerlink" title="11.3  请求样式文件的处理"></a>11.3  请求样式文件的处理</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">引入css文件</span><br><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;../css/common.css&quot;&gt;</span><br><span class="line">1.由于引入文件common.css文件,页面请求的是http://localhost:12345/css/common.css,而服务器并没有对标识为/css/common.css的文件做对应的处理，所以不能访问，客户端请求失败</span><br><span class="line">2.在路由配置中，配置对/css/common.css文件的发送请求的处理</span><br><span class="line">// 读取样式文件</span><br><span class="line">app.get(&apos;/css/common.css&apos;,(req,res) =&gt; &#123;</span><br><span class="line">	// 当客户端请求这个文件时,服务器读取文件中的内容，将内容响应给客户端</span><br><span class="line">	2.1 读取样式文件</span><br><span class="line">	fs.readFile(&apos;./css/common.css&apos;,&quot;utf8&quot;,(error,data) =&gt; &#123;</span><br><span class="line">		// console.log(data);</span><br><span class="line">		// 将获取到的内容发送给客户端，由于默认的返回客户端的响应类型为 text/html,所以没有效果</span><br><span class="line">		// 将响应类型设置为text/css</span><br><span class="line">		2.2 修改返回给客户端的内容的响应类型</span><br><span class="line">		res.setHeader(&apos;Content-Type&apos;,&apos;text/css&apos;);</span><br><span class="line">		// 返回相应</span><br><span class="line">		2.2 返回给客户端 </span><br><span class="line">		res.send(data);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">以上方法，可以处理css样式文件，但是对于处理多个样式文件，这样写起来比较麻烦</span><br></pre></td></tr></table></figure>
<h3 id="11-4-统一处理静态资源-样式文件"><a href="#11-4-统一处理静态资源-样式文件" class="headerlink" title="11.4  统一处理静态资源(样式文件)"></a>11.4  统一处理静态资源(样式文件)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">静态资源  样式文件、图片、字体</span><br><span class="line">1.使用express的方法来处理</span><br><span class="line">	const app = express();</span><br><span class="line">2.统一处理所有静态资源文件</span><br><span class="line">	static(静态资源文件路径);</span><br><span class="line">	app.use(express.static(&quot;./css&quot;)); </span><br><span class="line">	公开暴露css文件夹的所有静态资源</span><br><span class="line">3.在引入静态资源文件时，直接写文件名即可</span><br><span class="line">	&lt;link rel=&quot;stylesheet&quot; href=&quot;/common.css&quot;&gt;</span><br><span class="line">4.使用此方法，不需要在路由配置中，对静态文件分别处理</span><br></pre></td></tr></table></figure>
<h3 id="11-5-统一处理第三方资源"><a href="#11-5-统一处理第三方资源" class="headerlink" title="11.5  统一处理第三方资源"></a>11.5  统一处理第三方资源</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">第一种:</span><br><span class="line">app.use(只写一个参数);</span><br><span class="line">1.安装第三方文件资源</span><br><span class="line">	npm i bootstrap</span><br><span class="line">2.公开暴露node_modules文件夹下的资源文件</span><br><span class="line">	app.use(express.static(&apos;./node_modules&apos;));</span><br><span class="line">3.引入样式文件时</span><br><span class="line">	&lt;!-- 引入第三方资源文件,直接引入node_modules文件夹下的资源文件 --&gt;</span><br><span class="line">	&lt;link rel=&quot;stylesheet&quot; href=&quot;/bootstrap/dist/css/bootstrap.css&quot;&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">第二种:限定请求的前缀</span><br><span class="line">2.公开暴露node_modules文件夹下的资源文件</span><br><span class="line">当请求标识是以/abc开始的,暴露node_modules文件夹下的资源文件</span><br><span class="line">app.use(&apos;/abc&apos;,express.static(&apos;./node_modules&apos;));</span><br><span class="line">3.引入样式文件时</span><br><span class="line">	&lt;!-- 引入第三方资源文件,资源文件的标识是/abc --&gt;</span><br><span class="line">	&lt;link rel=&quot;stylesheet&quot; href=&quot;/abc/bootstrap/dist/css/bootstrap.css&quot;&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">公开根目录下的所有资源文件</span><br><span class="line">app.use(express.static(&apos;./&apos;));</span><br><span class="line">但是不要这么些，不安全</span><br></pre></td></tr></table></figure>
<h3 id="11-6-统一处理静态资源-小结"><a href="#11-6-统一处理静态资源-小结" class="headerlink" title="11.6  统一处理静态资源-小结"></a>11.6  统一处理静态资源-小结</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">配置包</span><br><span class="line">//处理资源 </span><br><span class="line">// 1. 自己静态资源</span><br><span class="line">app.use(express.static(&quot;./public&quot;))</span><br><span class="line">// app.use(&quot;/abc&quot;, express.static(&quot;./public&quot;))</span><br><span class="line">// app.use(&quot;/public&quot;, express.static(&quot;./public&quot;))</span><br><span class="line"></span><br><span class="line">// 2. 第三方资源</span><br><span class="line">// app.use(express.static(&quot;./node_modules&quot;))</span><br><span class="line">app.use(&quot;/node_modules&quot;, express.static(&quot;./node_modules&quot;))</span><br><span class="line">// 3. 统一配置</span><br><span class="line">// app.use(express.static(&quot;./&quot;));</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">对应的客户端代码</span><br><span class="line">1.自己静态资源</span><br><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;/base.css&quot;&gt; </span><br><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;/abc/main.css&quot;&gt;</span><br><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;/public/main.css&quot;&gt; </span><br><span class="line">2.第三方资源</span><br><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;/bootstrap/dist/css/bootstrap.min.css&quot;&gt;</span><br><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;/node_modules/bootstrap/dist/css/bootstrap.min.css&quot;&gt;</span><br></pre></td></tr></table></figure>
<h3 id="11-7-提取路由模块"><a href="#11-7-提取路由模块" class="headerlink" title="11.7  提取路由模块"></a>11.7  提取路由模块</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">http.js 是一个程序入口文件</span><br><span class="line">入口文件作用：监听端口 启动服务</span><br><span class="line">1.将文件中配置路由的代码提取出来封装成一个模块</span><br><span class="line">模块是具有独立功能的js文件</span><br><span class="line">2.提取路由模块  router.js  配置路由</span><br><span class="line">	1) 导包</span><br><span class="line">	const fs = require(&apos;fs&apos;);</span><br><span class="line">	const express = require(&apos;express&apos;);</span><br><span class="line">	2) 实例化路由router</span><br><span class="line">	const router = express.Router();</span><br><span class="line">	3) 配置路由</span><br><span class="line">        router.get(&apos;/&apos;,(req,res) =&gt; &#123;</span><br><span class="line">            // 从文件中读取数据</span><br><span class="line">            fs.readFile(&apos;./data.json&apos;,&apos;utf8&apos;,(error, data) =&gt; &#123;</span><br><span class="line">                // 从文件中读取出来的是json字符串</span><br><span class="line">                // JSON.parse(data);    将字符串转化为json对象</span><br><span class="line">                data = JSON.parse(data);</span><br><span class="line">                res.render(&apos;index.html&apos;,&#123;</span><br><span class="line">                    items: data.items</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">        router.get(&apos;/publish&apos;,(req,res) =&gt; &#123;</span><br><span class="line">            res.render(&apos;publish.html&apos;);</span><br><span class="line">        &#125;);</span><br><span class="line">        router.post(&apos;/publish&apos;,(req,res) =&gt; &#123;</span><br><span class="line">            // console.log(req.body);</span><br><span class="line">            const body = req.body;</span><br><span class="line">            fs.readFile(&apos;./data.json&apos;,&apos;utf8&apos;,(error,data) =&gt; &#123;</span><br><span class="line">                data = JSON.parse(data);</span><br><span class="line">                data.items.unshift(body);</span><br><span class="line">                data = JSON.stringify(data);</span><br><span class="line">                fs.writeFile(&apos;./data.json&apos;,data,(error) =&gt; &#123;</span><br><span class="line">                    res.redirect(&apos;/&apos;);</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">	4) 导出router对象</span><br><span class="line">	module.exports = router;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">在程序入口文件中导入</span><br><span class="line">1.导包</span><br><span class="line">const router = require(&apos;./router&apos;);</span><br><span class="line">2.配置</span><br><span class="line">3.使用路由</span><br><span class="line">app.use(router);</span><br><span class="line">4.监听端口</span><br></pre></td></tr></table></figure>
<p><code>注意</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fs的导入包的位置要修改</span><br><span class="line">app.use(router);代码位置放在配置包的后面 (先配置包,再使用包)</span><br><span class="line">入口程序模块: 监听端口启动服务</span><br><span class="line">配置路由模块：具有独立功能的js文件</span><br><span class="line">路由模块文件：监听请求 并且找到对应的处理函数</span><br></pre></td></tr></table></figure>
<h3 id="11-8-提取处理函数模块"><a href="#11-8-提取处理函数模块" class="headerlink" title="11.8  提取处理函数模块"></a>11.8  提取处理函数模块</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">把路由router.js模块中处理函数的具体实现的代码提取出来放在一个单独的模块中</span><br></pre></td></tr></table></figure>
<p><code>router01.js</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">导出方法，封装在函数中</span><br><span class="line">// 1.导包</span><br><span class="line">const fs = require(&apos;fs&apos;);</span><br><span class="line">const express = require(&apos;express&apos;);</span><br><span class="line">const router = express.Router();</span><br><span class="line">// 2.配置路由模块</span><br><span class="line">// 封装函数处理的具体代码</span><br><span class="line">// 渲染列表页</span><br><span class="line">const showList = (req,res) =&gt; &#123;</span><br><span class="line">	// 从文件中读取数据</span><br><span class="line">	fs.readFile(&apos;./data.json&apos;,&apos;utf8&apos;,(error, data) =&gt; &#123;</span><br><span class="line">		// 从文件中读取出来的是json字符串</span><br><span class="line">		// JSON.parse(data);    将字符串转化为json对象</span><br><span class="line">		data = JSON.parse(data);</span><br><span class="line">		res.render(&apos;index.html&apos;,&#123;</span><br><span class="line">			items: data.items</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;);</span><br><span class="line">	// fs.readFile(&apos;./index.html&apos;,&quot;utf8&quot;,(error,data) =&gt; &#123;</span><br><span class="line">	// 	var strHtmlWithData = template.render(data,&#123;</span><br><span class="line">	// 		items: list.items</span><br><span class="line">	// 	&#125;);</span><br><span class="line">	// 	res.send(strHtmlWithData);</span><br><span class="line">	// &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 编辑页</span><br><span class="line">const edit = (req,res) =&gt; &#123;</span><br><span class="line">	res.render(&apos;publish.html&apos;);</span><br><span class="line">	// fs.readFile(&apos;./publish.html&apos;,&quot;utf8&quot;,(error,data) =&gt; &#123;</span><br><span class="line">	// 	res.send(data);</span><br><span class="line">	// &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 从编辑页跳转到列表页</span><br><span class="line">const editList = (req,res) =&gt; &#123;</span><br><span class="line">	// console.log(req.body);</span><br><span class="line">	const body = req.body;</span><br><span class="line">	fs.readFile(&apos;./data.json&apos;,&apos;utf8&apos;,(error,data) =&gt; &#123;</span><br><span class="line">		data = JSON.parse(data);</span><br><span class="line">		data.items.unshift(body);</span><br><span class="line">		data = JSON.stringify(data);</span><br><span class="line">		fs.writeFile(&apos;./data.json&apos;,data,(error) =&gt; &#123;</span><br><span class="line">			res.redirect(&apos;/&apos;);</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;;</span><br><span class="line">router.get(&apos;/&apos;,showList);</span><br><span class="line">router.get(&apos;/publish&apos;,edit);</span><br><span class="line">router.post(&apos;/publish&apos;,editList);</span><br><span class="line">// 3.导出模块成员</span><br><span class="line">module.exports = router;</span><br></pre></td></tr></table></figure>
<p><code>router02.js</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">导出方法，将封装的函数放在另一个模块中,并在此模块中引入</span><br><span class="line">// 1.导包</span><br><span class="line">const fun = require(&apos;./fun&apos;);</span><br><span class="line">const express = require(&apos;express&apos;);</span><br><span class="line">const router = express.Router();</span><br><span class="line">// 2.配置路由模块</span><br><span class="line">// 封装函数处理的具体代码</span><br><span class="line">// 渲染列表页</span><br><span class="line">router.get(&apos;/&apos;,fun.showList);</span><br><span class="line">router.get(&apos;/publish&apos;,fun.edit);</span><br><span class="line">router.post(&apos;/publish&apos;,fun.editList);</span><br><span class="line">// 3.导出模块成员</span><br><span class="line">module.exports = router;</span><br></pre></td></tr></table></figure>
<p><code>fun02.js</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">// 1.导包</span><br><span class="line">const fs = require(&apos;fs&apos;);</span><br><span class="line">// 2.导出模块成员</span><br><span class="line">module.exports.showList = (req,res) =&gt; &#123;</span><br><span class="line">	// 从文件中读取数据</span><br><span class="line">	fs.readFile(&apos;./data.json&apos;,&apos;utf8&apos;,(error, data) =&gt; &#123;</span><br><span class="line">		// 从文件中读取出来的是json字符串</span><br><span class="line">		// JSON.parse(data);    将字符串转化为json对象</span><br><span class="line">		data = JSON.parse(data);</span><br><span class="line">		res.render(&apos;index.html&apos;,&#123;</span><br><span class="line">			items: data.items</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;);</span><br><span class="line">	// fs.readFile(&apos;./index.html&apos;,&quot;utf8&quot;,(error,data) =&gt; &#123;</span><br><span class="line">	// 	var strHtmlWithData = template.render(data,&#123;</span><br><span class="line">	// 		items: list.items</span><br><span class="line">	// 	&#125;);</span><br><span class="line">	// 	res.send(strHtmlWithData);</span><br><span class="line">	// &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 编辑页</span><br><span class="line">module.exports.edit = (req,res) =&gt; &#123;</span><br><span class="line">	res.render(&apos;publish.html&apos;);</span><br><span class="line">	// fs.readFile(&apos;./publish.html&apos;,&quot;utf8&quot;,(error,data) =&gt; &#123;</span><br><span class="line">	// 	res.send(data);</span><br><span class="line">	// &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">// 从编辑页跳转到列表页</span><br><span class="line">module.exports.editList = (req,res) =&gt; &#123;</span><br><span class="line">	// console.log(req.body);</span><br><span class="line">	const body = req.body;</span><br><span class="line">	fs.readFile(&apos;./data.json&apos;,&apos;utf8&apos;,(error,data) =&gt; &#123;</span><br><span class="line">		data = JSON.parse(data);</span><br><span class="line">		data.items.unshift(body);</span><br><span class="line">		data = JSON.stringify(data);</span><br><span class="line">		fs.writeFile(&apos;./data.json&apos;,data,(error) =&gt; &#123;</span><br><span class="line">			res.redirect(&apos;/&apos;);</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="12-数据持久化-mysql操作数据库"><a href="#12-数据持久化-mysql操作数据库" class="headerlink" title="12.  数据持久化-mysql操作数据库"></a>12.  数据持久化-mysql操作数据库</h2><h3 id="12-1-数据持久化-mysql包体验-配置"><a href="#12-1-数据持久化-mysql包体验-配置" class="headerlink" title="12.1  数据持久化-mysql包体验-配置"></a>12.1  数据持久化-mysql包体验-配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">在node中操作数据库实现数据持久化</span><br><span class="line">使用第三方包 mysql:在node环境下操作mysql数据库</span><br><span class="line">文档参考:https://www.npmjs.com/package/mysql</span><br><span class="line">1.安装mysql包</span><br><span class="line">	npm install mysql</span><br><span class="line">2.配置mysql文档</span><br><span class="line">	// 1.导包</span><br><span class="line">    var mysql = require(&apos;mysql&apos;);</span><br><span class="line">    // 2.配置mysql</span><br><span class="line">    var connection = mysql.createConnection(&#123;</span><br><span class="line">      //主机</span><br><span class="line">      host     : &apos;localhost&apos;,</span><br><span class="line">      //用户名</span><br><span class="line">      user     : &apos;root&apos;,</span><br><span class="line">      //密码</span><br><span class="line">      password : &apos;root&apos;,</span><br><span class="line">      //数据库名</span><br><span class="line">      database : &apos;message&apos;</span><br><span class="line">    &#125;);</span><br><span class="line">    // 3.开启链接</span><br><span class="line">    connection.connect();</span><br><span class="line">    // 4.执行sql语句</span><br><span class="line">    connection.query(&apos;SELECT 1 + 1 AS solution&apos;, function (error, results, fields) &#123;</span><br><span class="line">        if (error) throw error;</span><br><span class="line">        console.log(&apos;The solution is: &apos;, results[0].solution);</span><br><span class="line">    &#125;);</span><br><span class="line">    fields:可选参数</span><br><span class="line">    // 5.关闭数据库连接</span><br><span class="line">    connection.end();</span><br><span class="line"> 3.必须开启mysql服务</span><br></pre></td></tr></table></figure>
<h3 id="12-2-mysql-查询"><a href="#12-2-mysql-查询" class="headerlink" title="12.2  mysql-查询"></a>12.2  mysql-查询</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">sql语句: var str = &quot;select * from `posts`&quot;;</span><br><span class="line">如果添加了反引号,就算字符串之间紧挨着也能识别是表名。</span><br><span class="line">// 4.执行sql语句</span><br><span class="line">// 1.返回结果 results是数组，数组里面是对象 每个对象是一条数据</span><br><span class="line">// var sqlStr = &quot;select * from `posts`&quot;;</span><br><span class="line">// 2.返回结果results 是数组 数组里面是满足条件的数据 对象</span><br><span class="line">// var sqlStr = &quot;select * from `posts` where id=1&quot;;</span><br><span class="line">// 3.sql语句中的？是一个占位符 ，相当于是形参，在query方法中的第二个参数是？号处的值 ？号是mysql包给我们提供的</span><br><span class="line">// const ID = 1;</span><br><span class="line">// var sqlStr = &quot;select * from `posts` where id=?&quot;;</span><br><span class="line">// connection.query(sqlStr,ID, function (error, results) &#123;</span><br><span class="line">//   if (error) throw error;</span><br><span class="line">//   console.log(results);</span><br><span class="line">// &#125;);</span><br><span class="line">// 4.sql语句中查询的是多个条件 query函数中，第二个参数传入的是数组</span><br><span class="line">var name=&apos;abc&apos;;</span><br><span class="line">var content = &apos;ss&apos;;</span><br><span class="line">var sqlStr = &quot;select * from `posts` where name = ? and content = ?&quot;;</span><br><span class="line">connection.query(sqlStr,[name,content], function (error, results) &#123;</span><br><span class="line">  if (error) throw error;</span><br><span class="line">  console.log(results);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="12-3-mysql-插入、增加"><a href="#12-3-mysql-插入、增加" class="headerlink" title="12.3  mysql-插入、增加"></a>12.3  mysql-插入、增加</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql中，除了查询返回的是数组，其他都是对象。</span><br><span class="line">对象中的key是字段名，不可以乱写</span><br><span class="line">添加使用关键字 set</span><br><span class="line">results:返回的是对象</span><br><span class="line">const item = &#123;</span><br><span class="line">    name:&apos;chengsong&apos;,</span><br><span class="line">    content:&apos;tama&apos;,</span><br><span class="line">    mail:&apos;ccc@ccc.com&apos;,</span><br><span class="line">    date: &apos;2014-11-11&apos;</span><br><span class="line">&#125;</span><br><span class="line">const sqlStr = &apos;insert into `posts` set ?&apos;;</span><br><span class="line">connection.query(sqlStr,item,(err,results) =&gt; &#123;</span><br><span class="line">    consoel.log(results);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><code>结果</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">OkPacket &#123;</span><br><span class="line">  fieldCount: 0,</span><br><span class="line">  affectedRows: 1,</span><br><span class="line">  insertId: 259,</span><br><span class="line">  serverStatus: 2,</span><br><span class="line">  warningCount: 0,</span><br><span class="line">  message: &apos;&apos;,</span><br><span class="line">  protocol41: true,</span><br><span class="line">  changedRows: 0 </span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h3 id="12-4-mysql-修改和删除"><a href="#12-4-mysql-修改和删除" class="headerlink" title="12.4  mysql-修改和删除"></a>12.4  mysql-修改和删除</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">修改:</span><br><span class="line">	修改id为1的数据 把name改为xxx</span><br><span class="line">	const ID = 1;</span><br><span class="line">	const name = &apos;xxx&apos;;</span><br><span class="line">	const sqlStr = &apos;update `posts` set name = ? where id = ?&apos;;</span><br><span class="line">	connection.query(sqlStr,[name,ID],(error,results) =&gt; &#123;</span><br><span class="line">        console.log(results);</span><br><span class="line">	&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">删除:</span><br><span class="line">	删除数据id=257的数据</span><br><span class="line">	const id = 257;</span><br><span class="line">	const sqlStr = &apos;delete from `posts` where id = ?&apos;;</span><br><span class="line">	connection.query(sqlStr,[id],(error,results)=&gt;&#123;</span><br><span class="line">        console.log(results);</span><br><span class="line">	&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">总结：</span><br><span class="line">	查询返回的是数组</span><br><span class="line">	增删改返回的是对象</span><br></pre></td></tr></table></figure>
<h2 id="13-全局命令行工具的使用-nodemon"><a href="#13-全局命令行工具的使用-nodemon" class="headerlink" title="13.  全局命令行工具的使用-nodemon"></a>13.  全局命令行工具的使用-nodemon</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">安装全局的包，每次修改代码后不需要重启服务器，会自动重启。</span><br><span class="line">安装全局的包: nodemon</span><br><span class="line">	npm i nodemon -g</span><br><span class="line">使用 nodemon 文件名 的方式自动重启服务器</span><br></pre></td></tr></table></figure>
<h3 id="13-1-全局命令行工具"><a href="#13-1-全局命令行工具" class="headerlink" title="13.1  全局命令行工具"></a>13.1  全局命令行工具</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">npm git:在任意路径下都可以使用/全局安装/指令操作</span><br><span class="line">1.nodemon:自动重新执行文件</span><br><span class="line">	全局安装 npm i nodemon -g</span><br><span class="line">	运行: nodemon 文件名</span><br><span class="line">2.http-server:快速开启本地服务器</span><br><span class="line">	把一个文件夹变成服务器的根目录,同时启动该服务</span><br><span class="line">	安装: npm i http-server -g</span><br><span class="line">	指令: </span><br><span class="line">		http-server   启动服务器</span><br><span class="line">		http-server -o 启动服务器的同时打开浏览器</span><br><span class="line">		http-server -o -p 8081  启动服务器的同时打开浏览器并修改端口</span><br><span class="line">3.查看全局命令行工具安装的位置</span><br><span class="line">	npm root -g</span><br></pre></td></tr></table></figure>
<h3 id="13-2-自定义指令"><a href="#13-2-自定义指令" class="headerlink" title="13.2  自定义指令"></a>13.2  自定义指令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">自定义指令：把很长的指令简化为一个简单的指令</span><br><span class="line">npm提供的功能</span><br><span class="line">1.在package.json文件中:</span><br><span class="line">	修改script键中的值：</span><br><span class="line">		&quot;scripts&quot;: &#123;</span><br><span class="line">           &quot;build&quot;: &quot;node app.js&quot;</span><br><span class="line">		&#125;</span><br><span class="line">2.在npm中运行</span><br><span class="line">	npm run build相当于是运行node app.js</span><br></pre></td></tr></table></figure>
<h2 id="14-留言板数据持久化-mysql"><a href="#14-留言板数据持久化-mysql" class="headerlink" title="14.  留言板数据持久化-mysql"></a>14.  留言板数据持久化-mysql</h2><h3 id="14-1-mysql-列表数据"><a href="#14-1-mysql-列表数据" class="headerlink" title="14.1  mysql-列表数据"></a>14.1  mysql-列表数据</h3><p><code>fun.js</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">// 1.导包</span><br><span class="line">const mysql = require(&apos;mysql&apos;);</span><br><span class="line">// 2.配置mysql</span><br><span class="line">const connection = mysql.createConnection(&#123;</span><br><span class="line">  host     : &apos;localhost&apos;,</span><br><span class="line">  user     : &apos;root&apos;,</span><br><span class="line">  password : &apos;root&apos;,</span><br><span class="line">  database : &apos;message&apos;</span><br><span class="line">&#125;);</span><br><span class="line">// 3.开启链接</span><br><span class="line">connection.connect();</span><br><span class="line">// 2.导出模块成员</span><br><span class="line">module.exports.showList = (req,res) =&gt; &#123;</span><br><span class="line">	// 从数据库中读取文件</span><br><span class="line">	// 4.执行sql语句</span><br><span class="line">	const sqlStr = &apos;select * from `posts` order by id desc&apos;;</span><br><span class="line">	connection.query(sqlStr,(error,results) =&gt; &#123;</span><br><span class="line">		if(error)&#123;</span><br><span class="line">			throw error;</span><br><span class="line">		&#125;</span><br><span class="line">		// console.log(results);</span><br><span class="line">		// 将数据通过模板引擎渲染到页面上</span><br><span class="line">		res.render(&apos;index.html&apos;,&#123;</span><br><span class="line">			items: results</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">最后不能关闭数据库</span><br></pre></td></tr></table></figure>
<h3 id="14-2-mysql-编辑数据"><a href="#14-2-mysql-编辑数据" class="headerlink" title="14.2  mysql-编辑数据"></a>14.2  mysql-编辑数据</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">// 从编辑页跳转到列表页</span><br><span class="line">module.exports.editList = (req,res) =&gt; &#123;</span><br><span class="line">	// console.log(req.body);</span><br><span class="line">	const body = req.body;</span><br><span class="line">	body.date = new Date();</span><br><span class="line">	//body对象的key必须和数据库字段一样</span><br><span class="line">	// mysql增加mysql语句</span><br><span class="line">	const sqlStr = &apos;insert into `posts` set ?&apos;;</span><br><span class="line">	connection.query(sqlStr,body,(error,results) =&gt; &#123;</span><br><span class="line">		if(error) &#123;</span><br><span class="line">			throw error;</span><br><span class="line">		&#125;</span><br><span class="line">		// console.log(results);</span><br><span class="line">		res.redirect(&apos;/&apos;);</span><br><span class="line"></span><br><span class="line">	&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	// fs.readFile(&apos;./data.json&apos;,&apos;utf8&apos;,(error,data) =&gt; &#123;</span><br><span class="line">	// 	data = JSON.parse(data);</span><br><span class="line">	// 	data.items.unshift(body);</span><br><span class="line">	// 	data = JSON.stringify(data);</span><br><span class="line">	// 	fs.writeFile(&apos;./data.json&apos;,data,(error) =&gt; &#123;</span><br><span class="line">	// 		res.redirect(&apos;/&apos;);</span><br><span class="line">	// 	&#125;);</span><br><span class="line">	// &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">最后不能关闭数据库</span><br></pre></td></tr></table></figure>
<h3 id="14-3-mysql使用注意"><a href="#14-3-mysql使用注意" class="headerlink" title="14.3  mysql使用注意"></a>14.3  mysql使用注意</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">数据库操作是异步操作：后面的代码不等待前面的代码执行完就继续执行</span><br><span class="line">	最后不能关闭数据库</span><br><span class="line">常见异步操作: ajax 事件 定时器 数据库操作</span><br></pre></td></tr></table></figure>
<h2 id="15-文件分析"><a href="#15-文件分析" class="headerlink" title="15.  文件分析"></a>15.  文件分析</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">app.js  程序入口函数</span><br><span class="line">router.js 路由配置(监听请求)</span><br><span class="line">handle.js 实现处理函数</span><br><span class="line">views/  视图 html文件</span><br><span class="line">public/  静态资源文件</span><br></pre></td></tr></table></figure>
<h2 id="16-回调函数"><a href="#16-回调函数" class="headerlink" title="16.  回调函数"></a>16.  回调函数</h2><h3 id="16-1-回调函数-基本使用"><a href="#16-1-回调函数-基本使用" class="headerlink" title="16.1  回调函数-基本使用"></a>16.1  回调函数-基本使用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">需求场景:想在函数外部 获取到函数内部异步操作里面的结果</span><br><span class="line">解决方法:在异步操作有结果的位置，调用函数，把结果以实参方式进行传递</span><br><span class="line">function add(x,y，fn)&#123;</span><br><span class="line">	console.log(1);</span><br><span class="line">	setTimeout(function()&#123;</span><br><span class="line">		var temp = x+y;</span><br><span class="line">		fn(temp);</span><br><span class="line">	&#125;,1000);</span><br><span class="line">	console.log(2);</span><br><span class="line">&#125;</span><br><span class="line">add(5,7,function(x)&#123;</span><br><span class="line">    console.log(x);</span><br><span class="line">&#125;);</span><br><span class="line">结果为:</span><br><span class="line">	1 2 12</span><br></pre></td></tr></table></figure>
<h3 id="16-2-回调函数-应用-封装ajax"><a href="#16-2-回调函数-应用-封装ajax" class="headerlink" title="16.2  回调函数-应用-封装ajax"></a>16.2  回调函数-应用-封装ajax</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function get(url,callback)&#123;</span><br><span class="line">    var xhr = new XMLHttpRequest();</span><br><span class="line">    xhr.onload = function()&#123;</span><br><span class="line">        callback(responseText);</span><br><span class="line">    &#125;</span><br><span class="line">    hr.open(&apos;get&apos;,url);</span><br><span class="line">    xhr.send();</span><br><span class="line">&#125;</span><br><span class="line">get(&apos;index.js&apos;,function(data)&#123;</span><br><span class="line">    console.log(data);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h2><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">先用express搭建服务器：</span><br><span class="line">	下载-&gt;导包-&gt;实例化-&gt;配置路由(根据不同请求标识,服务端做不同处理)-&gt;监听端口</span><br><span class="line">	渲染列表页：文件模块读取文件，并将返回的结果渲染渲染到页面</span><br><span class="line">	模板引擎渲染列表数据</span><br><span class="line">	编辑页面搭建</span><br><span class="line">	在app.js文件中 根据不同的标识 服务端做不同处理</span><br><span class="line">	下载express-art-template包，可以解决： 文件读取、模板引擎渲染、结束服务器响应等问题</span><br><span class="line">	编辑页面post请求,安装包body-parser为req增加body属性，获取请求的数据</span><br><span class="line">统一处理所有的静态资源：</span><br><span class="line">	app.use(express.static(&quot;./css&quot;));    统一暴露css文件夹下所有的静态资源文件</span><br></pre></td></tr></table></figure>
<h3 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">避免全局变量被污染</span><br></pre></td></tr></table></figure>
<h3 id="改变this的指向的方法"><a href="#改变this的指向的方法" class="headerlink" title="改变this的指向的方法"></a>改变this的指向的方法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">1)通过变量，将this的值指向该变量</span><br><span class="line">2）通过bind(),apply(),call()来改变this的指向</span><br><span class="line">	var per = &#123;</span><br><span class="line">        name: &apos;sfdsa&apos;,</span><br><span class="line">        sayHai: function()&#123;</span><br><span class="line">            console.log(this.name);</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;;</span><br><span class="line">	per.sayHai.call(null);</span><br><span class="line">	per.sayHai.call(obj);   将this的指向改变为obj</span><br><span class="line">	per.sayHai.call(obj,num1,num2);   将this的指向改变为obj</span><br><span class="line">	per.sayHai.apply(obj,[num1,num2]);</span><br><span class="line">	setTimeout(function()&#123;</span><br><span class="line">        console.log(this.name);</span><br><span class="line">	&#125;.bind(this),1000);</span><br></pre></td></tr></table></figure>
<h3 id="箭头函数this的指向-问题"><a href="#箭头函数this的指向-问题" class="headerlink" title="箭头函数this的指向   问题"></a>箭头函数this的指向   问题</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var per = &#123;</span><br><span class="line">    name: &apos;哈哈哈&apos;,</span><br><span class="line">    sayHi: () =&gt; &#123; </span><br><span class="line">    	console.log(this);        &#123;&#125;</span><br><span class="line">        setTimeout(() =&gt; &#123;</span><br><span class="line">        	console.log(this);    &#123;&#125;</span><br><span class="line">            console.log(this.name);     //undefined</span><br><span class="line">        &#125;,1000);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">per.sayHi();</span><br></pre></td></tr></table></figure>
<h3 id="npm上下载包名"><a href="#npm上下载包名" class="headerlink" title="npm上下载包名"></a>npm上下载包名</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://www.npmjs.com</span><br><span class="line">搜索包名=&gt;下载</span><br></pre></td></tr></table></figure>
<h3 id="文档链接"><a href="#文档链接" class="headerlink" title="文档链接"></a>文档链接</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">npm   https://www.npmjs.com</span><br><span class="line">express中文文档  http://www.expressjs.com.cn/en/guide/routing.html</span><br><span class="line">express英文文档  http://expressjs.com/en/guide/routing.html</span><br><span class="line">nodejs.cn   node中文网</span><br><span class="line">https://nodejs.org/en  英文网</span><br><span class="line">node社区: https://cnodejs.org</span><br><span class="line">npm网站找包（模块）  https://www.npmjs.com/ npmjs官网</span><br><span class="line">express官方文档： expressjs.com</span><br><span class="line">中文网: www.expressjs.com.cn</span><br><span class="line">npm模板引擎官方文档: http://aui.github.io/art-template/zh-cn/docs/syntax.html</span><br></pre></td></tr></table></figure>
<h3 id="定时器异步加载"><a href="#定时器异步加载" class="headerlink" title="定时器异步加载"></a>定时器异步加载</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">1.function add(x,y)&#123;</span><br><span class="line">	console.log(1);</span><br><span class="line">    setTimeout(function()&#123;</span><br><span class="line">    	console.log(3);</span><br><span class="line">        return x+y;</span><br><span class="line">    &#125;,1000);</span><br><span class="line">    console.log(2);</span><br><span class="line">&#125;</span><br><span class="line">var result = add(1,3);</span><br><span class="line">console.log(result);</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">undefined</span><br><span class="line">3</span><br><span class="line">由于定时器异步加载,定时器还没执行完代码已经执行完毕了,所以result的结果为undefined。</span><br><span class="line">2.function add(x,y)&#123;</span><br><span class="line">	var temp;</span><br><span class="line">    setTimeout(function()&#123;</span><br><span class="line">    	temp = x+y;</span><br><span class="line">    &#125;,1000);</span><br><span class="line">    return temp;</span><br><span class="line">&#125;</span><br><span class="line">var result = add(1,3);</span><br><span class="line">console.log(result);</span><br><span class="line">结果为undefined,原因是定时器异步加载</span><br></pre></td></tr></table></figure>

      </div>
        <div class="support-author">
          <p>感谢您的阅读。 🙏
          <a href target="_blank">关于转载请看这里</a>
            <!--<a class="btn-pay"  href="#pay-modal">¥ 打赏支持</a>-->
          </p>
        </div>
        <!--
            <div class="like ">
              <div class="like-button">
                <a id="like-note" href="">
                  <i class="icon-heart"></i>喜欢
                </a>
              </div>
              <span id="likes-count">256</span>
            </div>
        -->
        <div class="otherLink">
          <div class="previous">
          </div>
          <div class="next">
          </div>
        </div>
        <div class="comments" id="comments">
          
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script type="text/javascript">
  const gitalk = new Gitalk({
    clientID: '8888a8888',
    clientSecret: '8888886666666',
    repo: 'xxxx.github.io',
    owner: 'admin',
    admin: ['admin'],
    id: location.pathname,      // Ensure uniqueness and length less than 50
    distractionFreeMode: false
  })

  gitalk.render('comments');
</script>


        </div>
      </div>
    </div>
   
</main>
<div class="footer">
  <div class="info">
    <p>
    <a href="https://hexo.io"> Hexo </a> 强力驱动 |
      <a href="https://github.com/Youthink/hexo-themes-yearn"> Yearn </a>
      主题
    </p>
    <p>&copy;2013-2018 Ren Fang的博客 京ICP备xxxxxx号</p>
  </div>
</div>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script>//console
  var consoleConfig = '\n欢迎访问 https://hufangyun.com ，围观小猿大圣的博客(づ｡◕‿‿◕｡)づ！\n,\n本博客使用 %cHexo%c 搭建，博客主题为小猿大圣开发的 %chexo-themes-yearn%c ~~~ 🎉🎉🎉 \n\n源码 https://github.com/Youthink/hexo-themes-yearn \n\n如果喜欢可以 star 支持一下 ❤️~\n'.split(',');
  var canConsole = true;
  var consoleInfo = (function(consoleConfig) {
  if (!canConsole || !consoleConfig || consoleConfig.length < 1) {
    return;
  }
  var consoleColor = '#6190e8';
  var _console;
  var backgroundTextStyle = 'padding: 1px 5px;color: #fff;background: ' + consoleColor + ';'
  var textStyle = 'color: ' + consoleColor + ';';

  consoleConfig.map(o => {
    var num = (o.match(/%c/g) || []).length;
    if(/^http(s)?:\/\//.test(o)) {
      console.log('%c     ', 'background: url(' + o + ') no-repeat left center;font-size: 180px;');
      return;
    }
    if (num > 0) {
      var logArguments = [];
      for (var i = 0; i < num; i++) {
        if (i % 2 === 0) {
          logArguments.push(backgroundTextStyle);
        } else {
          logArguments.push(textStyle);
        }
      }
      (_console = console).log.apply(_console, ['%c' + o, textStyle].concat(logArguments));
      return;
    }
    console.log('%c' + o, textStyle);
  });
}(consoleConfig));</script><script type="text/javascript" src="/songfang0/./js/main.d9e3dd.js"></script>

</body>
</html>
